// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.sidebar.clients');
goog.require('cljs.core');
goog.require('crate.binding');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.context');
goog.require('lt.objs.popup');
goog.require('lt.objs.popup');
goog.require('lt.objs.context');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.clients.ws');
goog.require('lt.objs.command');
goog.require('lt.objs.clients.tcp');
goog.require('lt.objs.clients');
goog.require('lt.objs.clients.tcp');
goog.require('crate.binding');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.clients.ws');
goog.require('lt.objs.clients');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.command');
lt.objs.sidebar.clients.close_button = (function close_button(i){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button","span.button",4282180040),"disconnect"], null));var seq__12151_12157 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.clients.close_BANG_.call(null,i);
})], null)));var chunk__12152_12158 = null;var count__12153_12159 = 0;var i__12154_12160 = 0;while(true){
if((i__12154_12160 < count__12153_12159))
{var vec__12155_12161 = cljs.core._nth.call(null,chunk__12152_12158,i__12154_12160);var ev__4336__auto___12162 = cljs.core.nth.call(null,vec__12155_12161,0,null);var func__4337__auto___12163 = cljs.core.nth.call(null,vec__12155_12161,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12162,func__4337__auto___12163);
{
var G__12164 = seq__12151_12157;
var G__12165 = chunk__12152_12158;
var G__12166 = count__12153_12159;
var G__12167 = (i__12154_12160 + 1);
seq__12151_12157 = G__12164;
chunk__12152_12158 = G__12165;
count__12153_12159 = G__12166;
i__12154_12160 = G__12167;
continue;
}
} else
{var temp__4092__auto___12168 = cljs.core.seq.call(null,seq__12151_12157);if(temp__4092__auto___12168)
{var seq__12151_12169__$1 = temp__4092__auto___12168;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12151_12169__$1))
{var c__4150__auto___12170 = cljs.core.chunk_first.call(null,seq__12151_12169__$1);{
var G__12171 = cljs.core.chunk_rest.call(null,seq__12151_12169__$1);
var G__12172 = c__4150__auto___12170;
var G__12173 = cljs.core.count.call(null,c__4150__auto___12170);
var G__12174 = 0;
seq__12151_12157 = G__12171;
chunk__12152_12158 = G__12172;
count__12153_12159 = G__12173;
i__12154_12160 = G__12174;
continue;
}
} else
{var vec__12156_12175 = cljs.core.first.call(null,seq__12151_12169__$1);var ev__4336__auto___12176 = cljs.core.nth.call(null,vec__12156_12175,0,null);var func__4337__auto___12177 = cljs.core.nth.call(null,vec__12156_12175,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12176,func__4337__auto___12177);
{
var G__12178 = cljs.core.next.call(null,seq__12151_12169__$1);
var G__12179 = null;
var G__12180 = 0;
var G__12181 = 0;
seq__12151_12157 = G__12178;
chunk__12152_12158 = G__12179;
count__12153_12159 = G__12180;
i__12154_12160 = G__12181;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.unset_button = (function unset_button(i){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button.unset","span.button.unset",4681740547),"unset"], null));var seq__12188_12194 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,lt.objs.sidebar.clients.clients,new cljs.core.Keyword(null,"unset!","unset!",4468628874),i);
})], null)));var chunk__12189_12195 = null;var count__12190_12196 = 0;var i__12191_12197 = 0;while(true){
if((i__12191_12197 < count__12190_12196))
{var vec__12192_12198 = cljs.core._nth.call(null,chunk__12189_12195,i__12191_12197);var ev__4336__auto___12199 = cljs.core.nth.call(null,vec__12192_12198,0,null);var func__4337__auto___12200 = cljs.core.nth.call(null,vec__12192_12198,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12199,func__4337__auto___12200);
{
var G__12201 = seq__12188_12194;
var G__12202 = chunk__12189_12195;
var G__12203 = count__12190_12196;
var G__12204 = (i__12191_12197 + 1);
seq__12188_12194 = G__12201;
chunk__12189_12195 = G__12202;
count__12190_12196 = G__12203;
i__12191_12197 = G__12204;
continue;
}
} else
{var temp__4092__auto___12205 = cljs.core.seq.call(null,seq__12188_12194);if(temp__4092__auto___12205)
{var seq__12188_12206__$1 = temp__4092__auto___12205;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12188_12206__$1))
{var c__4150__auto___12207 = cljs.core.chunk_first.call(null,seq__12188_12206__$1);{
var G__12208 = cljs.core.chunk_rest.call(null,seq__12188_12206__$1);
var G__12209 = c__4150__auto___12207;
var G__12210 = cljs.core.count.call(null,c__4150__auto___12207);
var G__12211 = 0;
seq__12188_12194 = G__12208;
chunk__12189_12195 = G__12209;
count__12190_12196 = G__12210;
i__12191_12197 = G__12211;
continue;
}
} else
{var vec__12193_12212 = cljs.core.first.call(null,seq__12188_12206__$1);var ev__4336__auto___12213 = cljs.core.nth.call(null,vec__12193_12212,0,null);var func__4337__auto___12214 = cljs.core.nth.call(null,vec__12193_12212,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12213,func__4337__auto___12214);
{
var G__12215 = cljs.core.next.call(null,seq__12188_12206__$1);
var G__12216 = null;
var G__12217 = 0;
var G__12218 = 0;
seq__12188_12194 = G__12215;
chunk__12189_12195 = G__12216;
count__12190_12196 = G__12217;
i__12191_12197 = G__12218;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.add_button = (function add_button(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2.toggle.add.button","h2.toggle.add.button",3718387527),"Add Connection"], null));var seq__12225_12231 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selecting!","selecting!",3653545709));
})], null)));var chunk__12226_12232 = null;var count__12227_12233 = 0;var i__12228_12234 = 0;while(true){
if((i__12228_12234 < count__12227_12233))
{var vec__12229_12235 = cljs.core._nth.call(null,chunk__12226_12232,i__12228_12234);var ev__4336__auto___12236 = cljs.core.nth.call(null,vec__12229_12235,0,null);var func__4337__auto___12237 = cljs.core.nth.call(null,vec__12229_12235,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12236,func__4337__auto___12237);
{
var G__12238 = seq__12225_12231;
var G__12239 = chunk__12226_12232;
var G__12240 = count__12227_12233;
var G__12241 = (i__12228_12234 + 1);
seq__12225_12231 = G__12238;
chunk__12226_12232 = G__12239;
count__12227_12233 = G__12240;
i__12228_12234 = G__12241;
continue;
}
} else
{var temp__4092__auto___12242 = cljs.core.seq.call(null,seq__12225_12231);if(temp__4092__auto___12242)
{var seq__12225_12243__$1 = temp__4092__auto___12242;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12225_12243__$1))
{var c__4150__auto___12244 = cljs.core.chunk_first.call(null,seq__12225_12243__$1);{
var G__12245 = cljs.core.chunk_rest.call(null,seq__12225_12243__$1);
var G__12246 = c__4150__auto___12244;
var G__12247 = cljs.core.count.call(null,c__4150__auto___12244);
var G__12248 = 0;
seq__12225_12231 = G__12245;
chunk__12226_12232 = G__12246;
count__12227_12233 = G__12247;
i__12228_12234 = G__12248;
continue;
}
} else
{var vec__12230_12249 = cljs.core.first.call(null,seq__12225_12243__$1);var ev__4336__auto___12250 = cljs.core.nth.call(null,vec__12230_12249,0,null);var func__4337__auto___12251 = cljs.core.nth.call(null,vec__12230_12249,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12250,func__4337__auto___12251);
{
var G__12252 = cljs.core.next.call(null,seq__12225_12243__$1);
var G__12253 = null;
var G__12254 = 0;
var G__12255 = 0;
seq__12225_12231 = G__12252;
chunk__12226_12232 = G__12253;
count__12227_12233 = G__12254;
i__12228_12234 = G__12255;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.choose_cancel = (function choose_cancel(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2.toggle.button","h2.toggle.button",1431469146),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),"Choose a client type"], null)], null));var seq__12262_12268 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"cancel","cancel",3941147116));
})], null)));var chunk__12263_12269 = null;var count__12264_12270 = 0;var i__12265_12271 = 0;while(true){
if((i__12265_12271 < count__12264_12270))
{var vec__12266_12272 = cljs.core._nth.call(null,chunk__12263_12269,i__12265_12271);var ev__4336__auto___12273 = cljs.core.nth.call(null,vec__12266_12272,0,null);var func__4337__auto___12274 = cljs.core.nth.call(null,vec__12266_12272,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12273,func__4337__auto___12274);
{
var G__12275 = seq__12262_12268;
var G__12276 = chunk__12263_12269;
var G__12277 = count__12264_12270;
var G__12278 = (i__12265_12271 + 1);
seq__12262_12268 = G__12275;
chunk__12263_12269 = G__12276;
count__12264_12270 = G__12277;
i__12265_12271 = G__12278;
continue;
}
} else
{var temp__4092__auto___12279 = cljs.core.seq.call(null,seq__12262_12268);if(temp__4092__auto___12279)
{var seq__12262_12280__$1 = temp__4092__auto___12279;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12262_12280__$1))
{var c__4150__auto___12281 = cljs.core.chunk_first.call(null,seq__12262_12280__$1);{
var G__12282 = cljs.core.chunk_rest.call(null,seq__12262_12280__$1);
var G__12283 = c__4150__auto___12281;
var G__12284 = cljs.core.count.call(null,c__4150__auto___12281);
var G__12285 = 0;
seq__12262_12268 = G__12282;
chunk__12263_12269 = G__12283;
count__12264_12270 = G__12284;
i__12265_12271 = G__12285;
continue;
}
} else
{var vec__12267_12286 = cljs.core.first.call(null,seq__12262_12280__$1);var ev__4336__auto___12287 = cljs.core.nth.call(null,vec__12267_12286,0,null);var func__4337__auto___12288 = cljs.core.nth.call(null,vec__12267_12286,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12287,func__4337__auto___12288);
{
var G__12289 = cljs.core.next.call(null,seq__12262_12280__$1);
var G__12290 = null;
var G__12291 = 0;
var G__12292 = 0;
seq__12262_12268 = G__12289;
chunk__12263_12269 = G__12290;
count__12264_12270 = G__12291;
i__12265_12271 = G__12292;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.__GT_active_QMARK_ = (function __GT_active_QMARK_(cur,clients){var actives = new cljs.core.Keyword(null,"active","active",3885920888).cljs$core$IFn$_invoke$arity$1(clients);var found_QMARK_ = cljs.core.first.call(null,cljs.core.filter.call(null,((function (actives){
return (function (p1__12293_SHARP_){return cljs.core._EQ_.call(null,cur,cljs.core.val.call(null,p1__12293_SHARP_));
});})(actives))
,actives));var connected_QMARK_ = new cljs.core.Keyword(null,"connected","connected",4729661051).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,cur));if(cljs.core.truth_((function (){var and__3396__auto__ = found_QMARK_;if(cljs.core.truth_(and__3396__auto__))
{return connected_QMARK_;
} else
{return and__3396__auto__;
}
})()))
{return [cljs.core.str("active client-"),cljs.core.str(cljs.core.name.call(null,cljs.core.first.call(null,found_QMARK_)))].join('');
} else
{return "";
}
});
lt.objs.sidebar.clients.client_item_STAR_ = (function client_item_STAR_(i){if(cljs.core.truth_(new cljs.core.Keyword(null,"connected","connected",4729661051).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i))))
{return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",1013907516),new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i))], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.details","div.details",4139669847),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"table","table",1124020032),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tr","tr",1013907952),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),"Type"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i))], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tr","tr",1013907952),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),"Commands"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),(function (){var iter__4119__auto__ = (function iter__12298(s__12299){return (new cljs.core.LazySeq(null,(function (){var s__12299__$1 = s__12299;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__12299__$1);if(temp__4092__auto__)
{var s__12299__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__12299__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__12299__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__12301 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__12300 = 0;while(true){
if((i__12300 < size__4118__auto__))
{var c = cljs.core._nth.call(null,c__4117__auto__,i__12300);cljs.core.chunk_append.call(null,b__12301,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),c], null));
{
var G__12302 = (i__12300 + 1);
i__12300 = G__12302;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12301),iter__12298.call(null,cljs.core.chunk_rest.call(null,s__12299__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12301),null);
}
} else
{var c = cljs.core.first.call(null,s__12299__$2);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),c], null),iter__12298.call(null,cljs.core.rest.call(null,s__12299__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,new cljs.core.Keyword(null,"commands","commands",4706336250).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i)));
})()], null)], null)], null)], null),lt.objs.sidebar.clients.close_button.call(null,i),lt.objs.sidebar.clients.unset_button.call(null,i)], null)], null);
} else
{return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.connecting","div.connecting",1770928039),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.load-wrapper","div.load-wrapper",4672926811),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.img","div.img",2686470232)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),"Connecting.."], null)], null);
}
});
lt.objs.sidebar.clients.connector_QMARK_ = (function connector_QMARK_(clients){return [cljs.core.str("clients "),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"selecting?","selecting?",3653545739).cljs$core$IFn$_invoke$arity$1(clients))?"selecting":"")),cljs.core.str((cljs.core.truth_(lt.util.dom.has_class_QMARK_.call(null,new cljs.core.Keyword(null,"content","content",1965434859).cljs$core$IFn$_invoke$arity$1(clients),new cljs.core.Keyword(null,"active","active",3885920888)))?" active":null))].join('');
});
lt.objs.sidebar.clients.client_item = (function client_item(clients,i){var e__4335__auto__ = crate.core.html.call(null,(function (){var i__$1 = cljs.core.deref.call(null,i);return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,clients,((function (i__$1){
return (function (p1__12303_SHARP_){return lt.objs.sidebar.clients.__GT_active_QMARK_.call(null,i__$1,p1__12303_SHARP_);
});})(i__$1))
)], null),crate.binding.bound.call(null,i__$1,((function (i__$1){
return (function (){return lt.objs.sidebar.clients.client_item_STAR_.call(null,i__$1);
});})(i__$1))
)], null);
})());var seq__12310_12316 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__12311_12317 = null;var count__12312_12318 = 0;var i__12313_12319 = 0;while(true){
if((i__12313_12319 < count__12312_12318))
{var vec__12314_12320 = cljs.core._nth.call(null,chunk__12311_12317,i__12313_12319);var ev__4336__auto___12321 = cljs.core.nth.call(null,vec__12314_12320,0,null);var func__4337__auto___12322 = cljs.core.nth.call(null,vec__12314_12320,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12321,func__4337__auto___12322);
{
var G__12323 = seq__12310_12316;
var G__12324 = chunk__12311_12317;
var G__12325 = count__12312_12318;
var G__12326 = (i__12313_12319 + 1);
seq__12310_12316 = G__12323;
chunk__12311_12317 = G__12324;
count__12312_12318 = G__12325;
i__12313_12319 = G__12326;
continue;
}
} else
{var temp__4092__auto___12327 = cljs.core.seq.call(null,seq__12310_12316);if(temp__4092__auto___12327)
{var seq__12310_12328__$1 = temp__4092__auto___12327;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12310_12328__$1))
{var c__4150__auto___12329 = cljs.core.chunk_first.call(null,seq__12310_12328__$1);{
var G__12330 = cljs.core.chunk_rest.call(null,seq__12310_12328__$1);
var G__12331 = c__4150__auto___12329;
var G__12332 = cljs.core.count.call(null,c__4150__auto___12329);
var G__12333 = 0;
seq__12310_12316 = G__12330;
chunk__12311_12317 = G__12331;
count__12312_12318 = G__12332;
i__12313_12319 = G__12333;
continue;
}
} else
{var vec__12315_12334 = cljs.core.first.call(null,seq__12310_12328__$1);var ev__4336__auto___12335 = cljs.core.nth.call(null,vec__12315_12334,0,null);var func__4337__auto___12336 = cljs.core.nth.call(null,vec__12315_12334,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12335,func__4337__auto___12336);
{
var G__12337 = cljs.core.next.call(null,seq__12310_12328__$1);
var G__12338 = null;
var G__12339 = 0;
var G__12340 = 0;
seq__12310_12316 = G__12337;
chunk__12311_12317 = G__12338;
count__12312_12318 = G__12339;
i__12313_12319 = G__12340;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.connection_type = (function connection_type(this$,i){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",1013907516),i.call(null,new cljs.core.Keyword(null,"name","name",1017277949))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),i.call(null,new cljs.core.Keyword(null,"desc","desc",1016984067))], null)], null));var seq__12347_12353 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selected","selected",2205476365));
return new cljs.core.Keyword(null,"connect","connect",1965255772).cljs$core$IFn$_invoke$arity$1(i).call(null);
})], null)));var chunk__12348_12354 = null;var count__12349_12355 = 0;var i__12350_12356 = 0;while(true){
if((i__12350_12356 < count__12349_12355))
{var vec__12351_12357 = cljs.core._nth.call(null,chunk__12348_12354,i__12350_12356);var ev__4336__auto___12358 = cljs.core.nth.call(null,vec__12351_12357,0,null);var func__4337__auto___12359 = cljs.core.nth.call(null,vec__12351_12357,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12358,func__4337__auto___12359);
{
var G__12360 = seq__12347_12353;
var G__12361 = chunk__12348_12354;
var G__12362 = count__12349_12355;
var G__12363 = (i__12350_12356 + 1);
seq__12347_12353 = G__12360;
chunk__12348_12354 = G__12361;
count__12349_12355 = G__12362;
i__12350_12356 = G__12363;
continue;
}
} else
{var temp__4092__auto___12364 = cljs.core.seq.call(null,seq__12347_12353);if(temp__4092__auto___12364)
{var seq__12347_12365__$1 = temp__4092__auto___12364;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12347_12365__$1))
{var c__4150__auto___12366 = cljs.core.chunk_first.call(null,seq__12347_12365__$1);{
var G__12367 = cljs.core.chunk_rest.call(null,seq__12347_12365__$1);
var G__12368 = c__4150__auto___12366;
var G__12369 = cljs.core.count.call(null,c__4150__auto___12366);
var G__12370 = 0;
seq__12347_12353 = G__12367;
chunk__12348_12354 = G__12368;
count__12349_12355 = G__12369;
i__12350_12356 = G__12370;
continue;
}
} else
{var vec__12352_12371 = cljs.core.first.call(null,seq__12347_12365__$1);var ev__4336__auto___12372 = cljs.core.nth.call(null,vec__12352_12371,0,null);var func__4337__auto___12373 = cljs.core.nth.call(null,vec__12352_12371,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12372,func__4337__auto___12373);
{
var G__12374 = cljs.core.next.call(null,seq__12347_12365__$1);
var G__12375 = null;
var G__12376 = 0;
var G__12377 = 0;
seq__12347_12353 = G__12374;
chunk__12348_12354 = G__12375;
count__12349_12355 = G__12376;
i__12350_12356 = G__12377;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.connectors = (function connectors(this$,connectors__$1){var iter__4119__auto__ = (function iter__12386(s__12387){return (new cljs.core.LazySeq(null,(function (){var s__12387__$1 = s__12387;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__12387__$1);if(temp__4092__auto__)
{var s__12387__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__12387__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__12387__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__12389 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__12388 = 0;while(true){
if((i__12388 < size__4118__auto__))
{var vec__12392 = cljs.core._nth.call(null,c__4117__auto__,i__12388);var k = cljs.core.nth.call(null,vec__12392,0,null);var c = cljs.core.nth.call(null,vec__12392,1,null);cljs.core.chunk_append.call(null,b__12389,lt.objs.sidebar.clients.connection_type.call(null,this$,c));
{
var G__12394 = (i__12388 + 1);
i__12388 = G__12394;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12389),iter__12386.call(null,cljs.core.chunk_rest.call(null,s__12387__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12389),null);
}
} else
{var vec__12393 = cljs.core.first.call(null,s__12387__$2);var k = cljs.core.nth.call(null,vec__12393,0,null);var c = cljs.core.nth.call(null,vec__12393,1,null);return cljs.core.cons.call(null,lt.objs.sidebar.clients.connection_type.call(null,this$,c),iter__12386.call(null,cljs.core.rest.call(null,s__12387__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,connectors__$1);
});
lt.objs.sidebar.clients.connect_ui = (function connect_ui(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,lt.objs.sidebar.clients.connector_QMARK_),new cljs.core.Keyword(null,"tabindex","tabindex",4410954191),-1], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.list","div.list",1323928397),lt.objs.sidebar.clients.add_button.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),crate.binding.map_bound.call(null,cljs.core.partial.call(null,lt.objs.sidebar.clients.client_item,this$),lt.objs.clients.cs)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.connector","div.connector",4086365858),lt.objs.sidebar.clients.choose_cancel.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"connectors","connectors",4533225784)], null)),cljs.core.partial.call(null,lt.objs.sidebar.clients.connectors,this$))], null)], null)], null));var seq__12401_12407 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"sidebar.clients","sidebar.clients",3856103656),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"sidebar.clients","sidebar.clients",3856103656),this$);
})], null)));var chunk__12402_12408 = null;var count__12403_12409 = 0;var i__12404_12410 = 0;while(true){
if((i__12404_12410 < count__12403_12409))
{var vec__12405_12411 = cljs.core._nth.call(null,chunk__12402_12408,i__12404_12410);var ev__4336__auto___12412 = cljs.core.nth.call(null,vec__12405_12411,0,null);var func__4337__auto___12413 = cljs.core.nth.call(null,vec__12405_12411,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12412,func__4337__auto___12413);
{
var G__12414 = seq__12401_12407;
var G__12415 = chunk__12402_12408;
var G__12416 = count__12403_12409;
var G__12417 = (i__12404_12410 + 1);
seq__12401_12407 = G__12414;
chunk__12402_12408 = G__12415;
count__12403_12409 = G__12416;
i__12404_12410 = G__12417;
continue;
}
} else
{var temp__4092__auto___12418 = cljs.core.seq.call(null,seq__12401_12407);if(temp__4092__auto___12418)
{var seq__12401_12419__$1 = temp__4092__auto___12418;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12401_12419__$1))
{var c__4150__auto___12420 = cljs.core.chunk_first.call(null,seq__12401_12419__$1);{
var G__12421 = cljs.core.chunk_rest.call(null,seq__12401_12419__$1);
var G__12422 = c__4150__auto___12420;
var G__12423 = cljs.core.count.call(null,c__4150__auto___12420);
var G__12424 = 0;
seq__12401_12407 = G__12421;
chunk__12402_12408 = G__12422;
count__12403_12409 = G__12423;
i__12404_12410 = G__12424;
continue;
}
} else
{var vec__12406_12425 = cljs.core.first.call(null,seq__12401_12419__$1);var ev__4336__auto___12426 = cljs.core.nth.call(null,vec__12406_12425,0,null);var func__4337__auto___12427 = cljs.core.nth.call(null,vec__12406_12425,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12426,func__4337__auto___12427);
{
var G__12428 = cljs.core.next.call(null,seq__12401_12419__$1);
var G__12429 = null;
var G__12430 = 0;
var G__12431 = 0;
seq__12401_12407 = G__12428;
chunk__12402_12408 = G__12429;
count__12403_12409 = G__12430;
i__12404_12410 = G__12431;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.__BEH__track_active_client = (function __BEH__track_active_client(ed){return lt.object.merge_BANG_.call(null,lt.objs.sidebar.clients.clients,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",3885920888),new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed))], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","track-active-client","lt.objs.sidebar.clients/track-active-client",667432058),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__track_active_client,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"set-client","set-client",2248164104),null,new cljs.core.Keyword(null,"active","active",3885920888),null], null), null));
lt.objs.sidebar.clients.__BEH__unset_client = (function __BEH__unset_client(this$,cur){var ed = lt.objs.editor.pool.last_active.call(null);var actives = new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed));var found_QMARK_ = cljs.core.first.call(null,cljs.core.filter.call(null,((function (ed,actives){
return (function (p1__12432_SHARP_){return cljs.core._EQ_.call(null,cur,cljs.core.val.call(null,p1__12432_SHARP_));
});})(ed,actives))
,actives));if(cljs.core.truth_(found_QMARK_))
{lt.object.update_BANG_.call(null,ed,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"client","client",3951159101)], null),cljs.core.dissoc,cljs.core.first.call(null,found_QMARK_));
} else
{}
return lt.objs.editor.pool.focus_last.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","unset-client","lt.objs.sidebar.clients/unset-client",3530183417),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__unset_client,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"unset!","unset!",4468628874),null], null), null));
lt.objs.sidebar.clients.__BEH__selecting_BANG_ = (function __BEH__selecting_BANG_(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selecting?","selecting?",3653545739),true], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","selecting!","lt.objs.sidebar.clients/selecting!",2845524117),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__selecting_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selecting!","selecting!",3653545709),null], null), null));
lt.objs.sidebar.clients.__BEH__done_selecting = (function __BEH__done_selecting(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selecting?","selecting?",3653545739),false], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","done-selecting","lt.objs.sidebar.clients/done-selecting",1238663413),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__done_selecting,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"cancel","cancel",3941147116),null,new cljs.core.Keyword(null,"selected","selected",2205476365),null], null), null));
lt.objs.sidebar.clients.__BEH__hide_on_select = (function __BEH__hide_on_select(this$){return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"close!","close!",3951350939));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","hide-on-select","lt.objs.sidebar.clients/hide-on-select",1437883881),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__hide_on_select,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selected","selected",2205476365),null], null), null));
lt.objs.sidebar.clients.__BEH__focus_BANG_ = (function __BEH__focus_BANG_(this$){return lt.util.dom.focus.call(null,lt.object.__GT_content.call(null,this$));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","focus!","lt.objs.sidebar.clients/focus!",3198076775),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__focus_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"focus!","focus!",4039653819),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","sidebar.clients","lt.objs.sidebar.clients/sidebar.clients",3045557908),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar.clients","sidebar.clients",3856103656),null], null), null),new cljs.core.Keyword(null,"label","label",1116631654),"connect",new cljs.core.Keyword(null,"connectors","connectors",4533225784),cljs.core.sorted_map.call(null),new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return lt.objs.sidebar.clients.connect_ui.call(null,this$);
}));
lt.objs.sidebar.clients.clients = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","sidebar.clients","lt.objs.sidebar.clients/sidebar.clients",3045557908));
lt.objs.sidebar.add_item.call(null,lt.objs.sidebar.rightbar,lt.objs.sidebar.clients.clients);
lt.objs.sidebar.clients.add_connector = (function add_connector(c){return lt.object.update_BANG_.call(null,lt.objs.sidebar.clients.clients,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"connectors","connectors",4533225784)], null),cljs.core.assoc,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(c),c);
});
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"show-connect","show-connect",2165693836),new cljs.core.Keyword(null,"desc","desc",1016984067),"Connect: Show connect bar",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"toggle","toggle",4440567494),lt.objs.sidebar.clients.clients);
return lt.object.raise.call(null,lt.objs.sidebar.clients.clients,new cljs.core.Keyword(null,"focus!","focus!",4039653819));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"hide-connect","hide-connect",3579890385),new cljs.core.Keyword(null,"desc","desc",1016984067),"Connect: hide connect bar",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"close!","close!",3951350939));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"show-add-connection","show-add-connection",3671605196),new cljs.core.Keyword(null,"desc","desc",1016984067),"Connect: Add Connection",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"toggle","toggle",4440567494),lt.objs.sidebar.clients.clients,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"force?","force?",4040082982),true,new cljs.core.Keyword(null,"transient?","transient?",3584270951),false], null));
return lt.object.raise.call(null,lt.objs.sidebar.clients.clients,new cljs.core.Keyword(null,"selecting!","selecting!",3653545709));
})], null));
lt.objs.sidebar.clients.add_connector.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1017277949),"Ports",new cljs.core.Keyword(null,"desc","desc",1016984067),"Get the ports for the local TCP and Websocket servers",new cljs.core.Keyword(null,"connect","connect",1965255772),(function (){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Ports",new cljs.core.Keyword(null,"body","body",1016933652),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dl#ports","dl#ports",1671270345),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",1013907458),"TCP: "], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",1013907442),[cljs.core.str(lt.objs.clients.tcp.port)].join('')], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",1013907458),"WebSocket: "], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",1013907442),[cljs.core.str(lt.objs.clients.ws.port)].join('')], null)], null),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"label","label",1116631654),"ok"], null)], null)], null));
})], null));

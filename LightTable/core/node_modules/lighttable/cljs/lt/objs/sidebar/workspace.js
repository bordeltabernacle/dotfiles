// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.sidebar.workspace');
goog.require('cljs.core');
goog.require('lt.util.cljs');
goog.require('crate.binding');
goog.require('lt.objs.files');
goog.require('lt.objs.opener');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.context');
goog.require('lt.objs.popup');
goog.require('lt.objs.popup');
goog.require('lt.objs.workspace');
goog.require('lt.objs.context');
goog.require('lt.objs.workspace');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('clojure.string');
goog.require('lt.util.cljs');
goog.require('lt.objs.command');
goog.require('lt.objs.files');
goog.require('lt.objs.opener');
goog.require('clojure.string');
goog.require('crate.binding');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.command');
lt.objs.sidebar.workspace.active_dialog = null;
lt.objs.sidebar.workspace.gui = require("nw.gui");
lt.objs.sidebar.workspace.menu_item = (function menu_item(opts){var mi = lt.objs.sidebar.workspace.gui.MenuItem;return (new mi(cljs.core.clj__GT_js.call(null,opts)));
});
lt.objs.sidebar.workspace.menu = (function menu(items){var m = lt.objs.sidebar.workspace.gui.Menu;var menu__$1 = (new m());var seq__12717_12721 = cljs.core.seq.call(null,items);var chunk__12718_12722 = null;var count__12719_12723 = 0;var i__12720_12724 = 0;while(true){
if((i__12720_12724 < count__12719_12723))
{var i_12725 = cljs.core._nth.call(null,chunk__12718_12722,i__12720_12724);menu__$1.append(lt.objs.sidebar.workspace.menu_item.call(null,i_12725));
{
var G__12726 = seq__12717_12721;
var G__12727 = chunk__12718_12722;
var G__12728 = count__12719_12723;
var G__12729 = (i__12720_12724 + 1);
seq__12717_12721 = G__12726;
chunk__12718_12722 = G__12727;
count__12719_12723 = G__12728;
i__12720_12724 = G__12729;
continue;
}
} else
{var temp__4092__auto___12730 = cljs.core.seq.call(null,seq__12717_12721);if(temp__4092__auto___12730)
{var seq__12717_12731__$1 = temp__4092__auto___12730;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12717_12731__$1))
{var c__4150__auto___12732 = cljs.core.chunk_first.call(null,seq__12717_12731__$1);{
var G__12733 = cljs.core.chunk_rest.call(null,seq__12717_12731__$1);
var G__12734 = c__4150__auto___12732;
var G__12735 = cljs.core.count.call(null,c__4150__auto___12732);
var G__12736 = 0;
seq__12717_12721 = G__12733;
chunk__12718_12722 = G__12734;
count__12719_12723 = G__12735;
i__12720_12724 = G__12736;
continue;
}
} else
{var i_12737 = cljs.core.first.call(null,seq__12717_12731__$1);menu__$1.append(lt.objs.sidebar.workspace.menu_item.call(null,i_12737));
{
var G__12738 = cljs.core.next.call(null,seq__12717_12731__$1);
var G__12739 = null;
var G__12740 = 0;
var G__12741 = 0;
seq__12717_12721 = G__12738;
chunk__12718_12722 = G__12739;
count__12719_12723 = G__12740;
i__12720_12724 = G__12741;
continue;
}
}
} else
{}
}
break;
}
return menu__$1;
});
lt.objs.sidebar.workspace.show_menu = (function show_menu(m,x,y){return m.popup(x,y);
});
lt.objs.sidebar.workspace.files_and_folders = (function files_and_folders(path){var fs = lt.objs.workspace.files_and_folders.call(null,path);return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.mapv.call(null,(function (p1__12742_SHARP_){return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),p1__12742_SHARP_);
}),new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(fs)),new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.mapv.call(null,(function (p1__12743_SHARP_){return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),p1__12743_SHARP_);
}),new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(fs))], null);
});
lt.objs.sidebar.workspace.root_folder = (function root_folder(path){return lt.object.add_tags.call(null,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),path),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"workspace.folder.root","workspace.folder.root",4665807355)], null));
});
lt.objs.sidebar.workspace.root_file = (function root_file(path){return lt.object.add_tags.call(null,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),path),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"workspace.file.root","workspace.file.root",532025197)], null));
});
lt.objs.sidebar.workspace.remove_child = (function remove_child(p,child){if(cljs.core.truth_(lt.object.has_tag_QMARK_.call(null,child,new cljs.core.Keyword(null,"workspace.file","workspace.file",1768213159))))
{return lt.object.update_BANG_.call(null,p,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([child], true),cur));
}));
} else
{return lt.object.update_BANG_.call(null,p,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([child], true),cur));
}));
}
});
lt.objs.sidebar.workspace.find_by_path = (function find_by_path(path){return cljs.core.first.call(null,cljs.core.filter.call(null,(function (p1__12744_SHARP_){return cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,p1__12744_SHARP_)),path);
}),lt.object.by_tag.call(null,new cljs.core.Keyword(null,"tree-item","tree-item",999403348))));
});
lt.objs.sidebar.workspace.__BEH__add_ws_folder = (function __BEH__add_ws_folder(this$,path){return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.folder!","add.folder!",2151595160),path);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","add-ws-folder","lt.objs.sidebar.workspace/add-ws-folder",3077183263),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__add_ws_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"workspace.add.folder!","workspace.add.folder!",1443047615),null], null), null));
lt.objs.sidebar.workspace.__BEH__add_ws_file = (function __BEH__add_ws_file(this$,path){lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.file!","add.file!",4237252106),path);
return lt.object.raise.call(null,cljs.core.first.call(null,lt.object.by_tag.call(null,new cljs.core.Keyword(null,"opener","opener",4298292201))),new cljs.core.Keyword(null,"open!","open!",1119852169),path);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","add-ws-file","lt.objs.sidebar.workspace/add-ws-file",3890882145),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__add_ws_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"workspace.add.file!","workspace.add.file!",821993457),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_open_ls = (function __BEH__on_open_ls(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),true], null));
if(cljs.core.truth_(new cljs.core.Keyword(null,"realized?","realized?",4433874243).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))
{return null;
} else
{lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"realized?","realized?",4433874243),true], null));
return lt.object.merge_BANG_.call(null,this$,lt.objs.sidebar.workspace.files_and_folders.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-open-ls","lt.objs.sidebar.workspace/on-open-ls",636886726),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_open_ls,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1119852169),null], null), null));
lt.objs.sidebar.workspace.__BEH__refresh = (function __BEH__refresh(this$){var seq__12749_12753 = cljs.core.seq.call(null,cljs.core.concat.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));var chunk__12750_12754 = null;var count__12751_12755 = 0;var i__12752_12756 = 0;while(true){
if((i__12752_12756 < count__12751_12755))
{var f_12757 = cljs.core._nth.call(null,chunk__12750_12754,i__12752_12756);lt.object.destroy_BANG_.call(null,f_12757);
{
var G__12758 = seq__12749_12753;
var G__12759 = chunk__12750_12754;
var G__12760 = count__12751_12755;
var G__12761 = (i__12752_12756 + 1);
seq__12749_12753 = G__12758;
chunk__12750_12754 = G__12759;
count__12751_12755 = G__12760;
i__12752_12756 = G__12761;
continue;
}
} else
{var temp__4092__auto___12762 = cljs.core.seq.call(null,seq__12749_12753);if(temp__4092__auto___12762)
{var seq__12749_12763__$1 = temp__4092__auto___12762;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12749_12763__$1))
{var c__4150__auto___12764 = cljs.core.chunk_first.call(null,seq__12749_12763__$1);{
var G__12765 = cljs.core.chunk_rest.call(null,seq__12749_12763__$1);
var G__12766 = c__4150__auto___12764;
var G__12767 = cljs.core.count.call(null,c__4150__auto___12764);
var G__12768 = 0;
seq__12749_12753 = G__12765;
chunk__12750_12754 = G__12766;
count__12751_12755 = G__12767;
i__12752_12756 = G__12768;
continue;
}
} else
{var f_12769 = cljs.core.first.call(null,seq__12749_12763__$1);lt.object.destroy_BANG_.call(null,f_12769);
{
var G__12770 = cljs.core.next.call(null,seq__12749_12763__$1);
var G__12771 = null;
var G__12772 = 0;
var G__12773 = 0;
seq__12749_12753 = G__12770;
chunk__12750_12754 = G__12771;
count__12751_12755 = G__12772;
i__12752_12756 = G__12773;
continue;
}
}
} else
{}
}
break;
}
lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"refresh","refresh",2099349069),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.merge_BANG_.call(null,this$,lt.objs.sidebar.workspace.files_and_folders.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","refresh","lt.objs.sidebar.workspace/refresh",4526611623),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__refresh,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"refresh!","refresh!",4597922840),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_close = (function __BEH__on_close(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),false], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-close","lt.objs.sidebar.workspace/on-close",2768332408),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close!","close!",3951350939),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_open_file = (function __BEH__on_open_file(this$){return lt.object.raise.call(null,lt.objs.opener.opener,new cljs.core.Keyword(null,"open!","open!",1119852169),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-open-file","lt.objs.sidebar.workspace/on-open-file",535182993),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_open_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1119852169),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_remove = (function __BEH__on_remove(this$,item){if(cljs.core.truth_(lt.object.has_tag_QMARK_.call(null,item,new cljs.core.Keyword(null,"workspace.folder","workspace.folder",4355811161))))
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"remove.folder!","remove.folder!",1531423099),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,item)));
} else
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"remove.file!","remove.file!",3382976429),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,item)));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-remove","lt.objs.sidebar.workspace/on-remove",3327022336),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_remove,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"remove!","remove!",2105740175),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_clear = (function __BEH__on_clear(this$){return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-clear","lt.objs.sidebar.workspace/on-clear",2768322211),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_clear,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_ws_add = (function __BEH__on_ws_add(ws,f){if(cljs.core.truth_(lt.objs.files.file_QMARK_.call(null,f)))
{return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),cljs.core.conj,lt.objs.sidebar.workspace.root_file.call(null,f));
} else
{return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),cljs.core.conj,lt.objs.sidebar.workspace.root_folder.call(null,f));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-ws-add","lt.objs.sidebar.workspace/on-ws-add",2946370468),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_ws_add,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"add","add",1014000659),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_ws_remove = (function __BEH__on_ws_remove(ws,f){var item = lt.objs.sidebar.workspace.find_by_path.call(null,f);if(cljs.core.truth_(lt.objs.files.file_QMARK_.call(null,f)))
{lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([item], true),cur));
}));
} else
{lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([item], true),cur));
}));
}
return lt.object.destroy_BANG_.call(null,item);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-ws-remove","lt.objs.sidebar.workspace/on-ws-remove",3507655435),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_ws_remove,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"remove","remove",4374260726),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_ws_set = (function __BEH__on_ws_set(ws){var map__12775 = cljs.core.deref.call(null,ws);var map__12775__$1 = ((cljs.core.seq_QMARK_.call(null,map__12775))?cljs.core.apply.call(null,cljs.core.hash_map,map__12775):map__12775);var files = cljs.core.get.call(null,map__12775__$1,new cljs.core.Keyword(null,"files","files",1111338473));var folders = cljs.core.get.call(null,map__12775__$1,new cljs.core.Keyword(null,"folders","folders",4625622327));return lt.object.merge_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.mapv.call(null,lt.objs.sidebar.workspace.root_file,files),new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.mapv.call(null,lt.objs.sidebar.workspace.root_folder,folders),new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939),cljs.core.PersistentHashSet.EMPTY], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-ws-set","lt.objs.sidebar.workspace/on-ws-set",2946355043),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_ws_set,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"set","set",1014018004),null], null), null));
lt.objs.sidebar.workspace.__BEH__track_and_watch_open_dirs = (function __BEH__track_and_watch_open_dirs(this$){lt.objs.workspace.watch_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939)], null),cljs.core.conj,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","track-and-watch-open-dirs","lt.objs.sidebar.workspace/track-and-watch-open-dirs",3304823039),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__track_and_watch_open_dirs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1119852169),null], null), null));
lt.objs.sidebar.workspace.__BEH__untrack_closed_dirs = (function __BEH__untrack_closed_dirs(this$){return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939)], null),cljs.core.disj,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","untrack-closed-dirs","lt.objs.sidebar.workspace/untrack-closed-dirs",3049036598),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__untrack_closed_dirs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close!","close!",3951350939),null], null), null));
lt.objs.sidebar.workspace.__BEH__watch_open_dirs_paths = (function __BEH__watch_open_dirs_paths(this$,cur){return cljs.core.concat.call(null,cur,new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.sidebar.workspace.tree)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","watch-open-dirs-paths","lt.objs.sidebar.workspace/watch-open-dirs-paths",4677839158),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__watch_open_dirs_paths,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watch-paths+","watch-paths+",2265407277),null], null), null));
lt.objs.sidebar.workspace.__BEH__watched__DOT__delete = (function __BEH__watched__DOT__delete(ws,path){var temp__4092__auto__ = lt.objs.sidebar.workspace.find_by_path.call(null,path);if(cljs.core.truth_(temp__4092__auto__))
{var child = temp__4092__auto__;var temp__4092__auto___12776__$1 = lt.objs.sidebar.workspace.find_by_path.call(null,lt.objs.files.parent.call(null,path));if(cljs.core.truth_(temp__4092__auto___12776__$1))
{var p_12777 = temp__4092__auto___12776__$1;lt.objs.sidebar.workspace.remove_child.call(null,p_12777,child);
} else
{}
return lt.object.destroy_BANG_.call(null,child);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","watched.delete","lt.objs.sidebar.workspace/watched.delete",3594533591),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__watched__DOT__delete,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watched.delete","watched.delete",766354781),null], null), null));
lt.objs.sidebar.workspace.__BEH__watched__DOT__create = (function __BEH__watched__DOT__create(ws,path){if(cljs.core.truth_((function (){var and__3396__auto__ = lt.objs.sidebar.workspace.find_by_path.call(null,path);if(cljs.core.truth_(and__3396__auto__))
{return cljs.core.not.call(null,cljs.core.re_seq.call(null,lt.objs.files.ignore_pattern,lt.objs.files.basename.call(null,path)));
} else
{return and__3396__auto__;
}
})()))
{return null;
} else
{var temp__4092__auto__ = lt.objs.sidebar.workspace.find_by_path.call(null,lt.objs.files.parent.call(null,path));if(cljs.core.truth_(temp__4092__auto__))
{var parent = temp__4092__auto__;if(cljs.core.truth_(new cljs.core.Keyword(null,"realized?","realized?",4433874243).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,parent))))
{if(cljs.core.truth_(lt.objs.files.dir_QMARK_.call(null,path)))
{return lt.object.update_BANG_.call(null,parent,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),cljs.core.conj,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),path));
} else
{return lt.object.update_BANG_.call(null,parent,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),cljs.core.conj,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),path));
}
} else
{return null;
}
} else
{return null;
}
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","watched.create","lt.objs.sidebar.workspace/watched.create",3712177670),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__watched__DOT__create,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watched.create","watched.create",749519022),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_drop = (function __BEH__on_drop(this$,e){try{var size = e.dataTransfer.files.length;var i = 0;while(true){
if((i < size))
{var path_12780 = (e.dataTransfer.files[i]).path;if(cljs.core.truth_(lt.objs.files.dir_QMARK_.call(null,path_12780)))
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.folder!","add.folder!",2151595160),path_12780);
} else
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.file!","add.file!",4237252106),path_12780);
}
{
var G__12781 = (i + 1);
i = G__12781;
continue;
}
} else
{return null;
}
break;
}
}catch (e12779){if((e12779 instanceof Error))
{var e__$1 = e12779;return cljs.core.println.call(null,e__$1);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e12779;
} else
{return null;
}
}
}});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-drop","lt.objs.sidebar.workspace/on-drop",2605653733),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_drop,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"drop","drop",1016996449),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_menu = (function __BEH__on_menu(this$,e){var items = cljs.core.sort_by.call(null,new cljs.core.Keyword(null,"order","order",1119910592),lt.object.raise_reduce.call(null,this$,new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),cljs.core.PersistentVector.EMPTY));return lt.objs.sidebar.workspace.show_menu.call(null,lt.objs.sidebar.workspace.menu.call(null,items),e.clientX,e.clientY);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-menu","lt.objs.sidebar.workspace/on-menu",2605385333),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu!","menu!",1117686292),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_root_menu = (function __BEH__on_root_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"separator",new cljs.core.Keyword(null,"order","order",1119910592),9], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Remove from workspace",new cljs.core.Keyword(null,"order","order",1119910592),10,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.Keyword(null,"remove!","remove!",2105740175),this$);
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-root-menu","lt.objs.sidebar.workspace/on-root-menu",2948325830),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_root_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__subfile_menu = (function __BEH__subfile_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Duplicate",new cljs.core.Keyword(null,"order","order",1119910592),1,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"duplicate!","duplicate!",3906488296));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Rename",new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete",new cljs.core.Keyword(null,"order","order",1119910592),3,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"delete!","delete!",2564367176));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","subfile-menu","lt.objs.sidebar.workspace/subfile-menu",2571608754),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__subfile_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__subfolder_menu = (function __BEH__subfolder_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"New file",new cljs.core.Keyword(null,"order","order",1119910592),0,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"new-file!","new-file!",3612062506));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Rename",new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"separator",new cljs.core.Keyword(null,"order","order",1119910592),3], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"New folder",new cljs.core.Keyword(null,"order","order",1119910592),4,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"new-folder!","new-folder!",2639811000));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete folder",new cljs.core.Keyword(null,"order","order",1119910592),5,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"delete!","delete!",2564367176));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Refresh folder",new cljs.core.Keyword(null,"order","order",1119910592),6,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"refresh!","refresh!",4597922840));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","subfolder-menu","lt.objs.sidebar.workspace/subfolder-menu",1537446372),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__subfolder_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__force_delete_file = (function __BEH__force_delete_file(this$){lt.objs.files.delete_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
lt.util.dom.remove.call(null,lt.object.__GT_content.call(null,this$));
lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.delete","watched.delete",766354781),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.destroy_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","force-delete-file","lt.objs.sidebar.workspace/force-delete-file",1104151110),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__force_delete_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342),null], null), null));
lt.objs.sidebar.workspace.__BEH__delete_file = (function __BEH__delete_file(this$){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Delete this file?",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("This will delete "),cljs.core.str(new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" from disk and cannot be undone.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete file",new cljs.core.Keyword(null,"action","action",3885920680),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342));
})], null),lt.objs.popup.cancel_button], null)], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","delete-file","lt.objs.sidebar.workspace/delete-file",2141449508),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__delete_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"delete!","delete!",2564367176),null], null), null));
lt.objs.sidebar.workspace.__BEH__force_delete_folder = (function __BEH__force_delete_folder(this$){lt.objs.files.delete_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
lt.util.dom.remove.call(null,lt.object.__GT_content.call(null,this$));
lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.delete","watched.delete",766354781),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.destroy_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","force-delete-folder","lt.objs.sidebar.workspace/force-delete-folder",3126323540),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__force_delete_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342),null], null), null));
lt.objs.sidebar.workspace.__BEH__delete_folder = (function __BEH__delete_folder(this$){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Delete this folder?",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("This will delete "),cljs.core.str(new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" from disk and cannot be undone.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete folder",new cljs.core.Keyword(null,"action","action",3885920680),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342));
})], null),lt.objs.popup.cancel_button], null)], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","delete-folder","lt.objs.sidebar.workspace/delete-folder",915989682),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__delete_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"delete!","delete!",2564367176),null], null), null));
lt.objs.sidebar.workspace.__BEH__new_file_BANG_ = (function __BEH__new_file_BANG_(this$){var ext = (function (){var temp__4090__auto__ = cljs.core.first.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));if(cljs.core.truth_(temp__4090__auto__))
{var ffile = temp__4090__auto__;var temp__4092__auto__ = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ffile));if(cljs.core.truth_(temp__4092__auto__))
{var path = temp__4092__auto__;return lt.objs.files.ext.call(null,path);
} else
{return null;
}
} else
{return "txt";
}
})();var path = lt.objs.files.join.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),[cljs.core.str("untitled."),cljs.core.str(ext)].join(''));var final_path = lt.objs.files.next_available_name.call(null,path);var folder = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),final_path);lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),cljs.core.conj,folder);
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),true], null));
lt.objs.files.save.call(null,final_path,"");
lt.object.raise.call(null,lt.objs.opener.opener,new cljs.core.Keyword(null,"open!","open!",1119852169),final_path);
return lt.object.raise.call(null,folder,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","new-file!","lt.objs.sidebar.workspace/new-file!",539117946),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__new_file_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"new-file!","new-file!",3612062506),null], null), null));
lt.objs.sidebar.workspace.__BEH__new_folder_BANG_ = (function __BEH__new_folder_BANG_(this$){var path = lt.objs.files.join.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),"NewFolder");var final_path = lt.objs.files.next_available_name.call(null,path);var folder = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),final_path);lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),cljs.core.conj,folder);
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),true], null));
lt.objs.files.mkdir.call(null,final_path);
return lt.object.raise.call(null,folder,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","new-folder!","lt.objs.sidebar.workspace/new-folder!",3994412844),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__new_folder_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"new-folder!","new-folder!",2639811000),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_folder = (function __BEH__rename_folder(this$,n){var path = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var neue = lt.objs.files.join.call(null,lt.objs.files.parent.call(null,path),n);if(cljs.core._EQ_.call(null,path,neue))
{return null;
} else
{if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,neue)))
{return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Folder already exists.",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("The folder "),cljs.core.str(neue),cljs.core.str(" already exists, you'll have to pick a different name.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"ok",new cljs.core.Keyword(null,"post-action","post-action",4039331701),(function (){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.cancel","rename.cancel",1388940956));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null)], null)], null));
} else
{var root_QMARK_ = lt.object.has_tag_QMARK_.call(null,this$,new cljs.core.Keyword(null,"workspace.folder.root","workspace.folder.root",4665807355));lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"path","path",1017337751),neue,new cljs.core.Keyword(null,"realized?","realized?",4433874243),false], null));
lt.objs.files.move_BANG_.call(null,path,neue);
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"refresh!","refresh!",4597922840));
if(cljs.core.truth_(root_QMARK_))
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"rename!","rename!",2106237973),path,neue);
} else
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.rename","watched.rename",1167218416),path,neue);
}
}
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-folder","lt.objs.sidebar.workspace/rename-folder",3567769509),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename","rename",4374276784),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_file = (function __BEH__rename_file(this$,n){var path = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var neue = lt.objs.files.join.call(null,lt.objs.files.parent.call(null,path),n);if(cljs.core._EQ_.call(null,path,neue))
{return null;
} else
{if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,neue)))
{return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"File already exists.",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("The file"),cljs.core.str(neue),cljs.core.str(" already exists, you'll have to pick a different name.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"ok",new cljs.core.Keyword(null,"post-action","post-action",4039331701),(function (){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.cancel","rename.cancel",1388940956));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null)], null)], null));
} else
{if(cljs.core.truth_((function (){var or__3408__auto__ = lt.object.has_tag_QMARK_.call(null,this$,new cljs.core.Keyword(null,"workspace.folder.root","workspace.folder.root",4665807355));if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.object.has_tag_QMARK_.call(null,this$,new cljs.core.Keyword(null,"workspace.file.root","workspace.file.root",532025197));
}
})()))
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"rename!","rename!",2106237973),path,neue);
} else
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.rename","watched.rename",1167218416),path,neue);
}
lt.objs.files.move_BANG_.call(null,path,neue);
return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),neue], null));
}
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-file","lt.objs.sidebar.workspace/rename-file",3270197399),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename","rename",4374276784),null], null), null));
lt.objs.sidebar.workspace.__BEH__start_rename = (function __BEH__start_rename(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"renaming?","renaming?",2774795926),true], null));
var input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",1114262332),lt.object.__GT_content.call(null,this$));var len = cljs.core.count.call(null,lt.objs.files.without_ext.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))));lt.util.dom.focus.call(null,input);
return lt.util.dom.selection.call(null,input,0,len,"forward");
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","start-rename","lt.objs.sidebar.workspace/start-rename",2390201321),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__start_rename,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_focus = (function __BEH__rename_focus(this$){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288),this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-focus","lt.objs.sidebar.workspace/rename-focus",2321367913),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_focus,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.focus","rename.focus",4215768474),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_submit = (function __BEH__rename_submit(this$){var val = lt.util.dom.val.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",1114262332),lt.object.__GT_content.call(null,this$)));lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"renaming?","renaming?",2774795926),false], null));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename","rename",4374276784),val);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-submit","lt.objs.sidebar.workspace/rename-submit",3408558955),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_submit,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.submit!","rename.submit!",1632100299),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_blur = (function __BEH__rename_blur(this$){lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288));
if(cljs.core.truth_(new cljs.core.Keyword(null,"renaming?","renaming?",2774795926).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.submit!","rename.submit!",1632100299));
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-blur","lt.objs.sidebar.workspace/rename-blur",3270310748),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_blur,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.blur","rename.blur",839974025),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_cancel = (function __BEH__rename_cancel(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"renaming?","renaming?",2774795926),false], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-cancel","lt.objs.sidebar.workspace/rename-cancel",1720510665),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_cancel,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.cancel!","rename.cancel!",4050107817),null], null), null));
lt.objs.sidebar.workspace.__BEH__duplicate = (function __BEH__duplicate(this$){var base_name = lt.objs.files.without_ext.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));var new_name = [cljs.core.str(base_name),cljs.core.str(" copy."),cljs.core.str(lt.objs.files.ext.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))].join('');var new_path = lt.objs.files.join.call(null,lt.objs.files.parent.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new_name);return lt.objs.files.copy.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new_path);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","duplicate","lt.objs.sidebar.workspace/duplicate",4108375543),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__duplicate,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"duplicate!","duplicate!",3906488296),null], null), null));
lt.objs.sidebar.workspace.__BEH__destroy_sub_tree = (function __BEH__destroy_sub_tree(this$){var seq__12786 = cljs.core.seq.call(null,cljs.core.concat.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));var chunk__12787 = null;var count__12788 = 0;var i__12789 = 0;while(true){
if((i__12789 < count__12788))
{var f = cljs.core._nth.call(null,chunk__12787,i__12789);lt.object.destroy_BANG_.call(null,f);
{
var G__12790 = seq__12786;
var G__12791 = chunk__12787;
var G__12792 = count__12788;
var G__12793 = (i__12789 + 1);
seq__12786 = G__12790;
chunk__12787 = G__12791;
count__12788 = G__12792;
i__12789 = G__12793;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__12786);if(temp__4092__auto__)
{var seq__12786__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12786__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__12786__$1);{
var G__12794 = cljs.core.chunk_rest.call(null,seq__12786__$1);
var G__12795 = c__4150__auto__;
var G__12796 = cljs.core.count.call(null,c__4150__auto__);
var G__12797 = 0;
seq__12786 = G__12794;
chunk__12787 = G__12795;
count__12788 = G__12796;
i__12789 = G__12797;
continue;
}
} else
{var f = cljs.core.first.call(null,seq__12786__$1);lt.object.destroy_BANG_.call(null,f);
{
var G__12798 = cljs.core.next.call(null,seq__12786__$1);
var G__12799 = null;
var G__12800 = 0;
var G__12801 = 0;
seq__12786 = G__12798;
chunk__12787 = G__12799;
count__12788 = G__12800;
i__12789 = G__12801;
continue;
}
}
} else
{return null;
}
}
break;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","destroy-sub-tree","lt.objs.sidebar.workspace/destroy-sub-tree",2888041796),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__destroy_sub_tree,new cljs.core.Keyword(null,"trigger","trigger",4248979754),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"destroy","destroy",2571277164),null], null), null));
lt.objs.sidebar.workspace.file_toggle = (function file_toggle(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),crate.binding.bound.call(null,this$,(function (){return lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
}))], null));var seq__12808_12814 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"dblclick","dblclick",3463991820),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"dblopen!","dblopen!",3475189659));
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"open!","open!",1119852169));
})], null)));var chunk__12809_12815 = null;var count__12810_12816 = 0;var i__12811_12817 = 0;while(true){
if((i__12811_12817 < count__12810_12816))
{var vec__12812_12818 = cljs.core._nth.call(null,chunk__12809_12815,i__12811_12817);var ev__4336__auto___12819 = cljs.core.nth.call(null,vec__12812_12818,0,null);var func__4337__auto___12820 = cljs.core.nth.call(null,vec__12812_12818,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12819,func__4337__auto___12820);
{
var G__12821 = seq__12808_12814;
var G__12822 = chunk__12809_12815;
var G__12823 = count__12810_12816;
var G__12824 = (i__12811_12817 + 1);
seq__12808_12814 = G__12821;
chunk__12809_12815 = G__12822;
count__12810_12816 = G__12823;
i__12811_12817 = G__12824;
continue;
}
} else
{var temp__4092__auto___12825 = cljs.core.seq.call(null,seq__12808_12814);if(temp__4092__auto___12825)
{var seq__12808_12826__$1 = temp__4092__auto___12825;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12808_12826__$1))
{var c__4150__auto___12827 = cljs.core.chunk_first.call(null,seq__12808_12826__$1);{
var G__12828 = cljs.core.chunk_rest.call(null,seq__12808_12826__$1);
var G__12829 = c__4150__auto___12827;
var G__12830 = cljs.core.count.call(null,c__4150__auto___12827);
var G__12831 = 0;
seq__12808_12814 = G__12828;
chunk__12809_12815 = G__12829;
count__12810_12816 = G__12830;
i__12811_12817 = G__12831;
continue;
}
} else
{var vec__12813_12832 = cljs.core.first.call(null,seq__12808_12826__$1);var ev__4336__auto___12833 = cljs.core.nth.call(null,vec__12813_12832,0,null);var func__4337__auto___12834 = cljs.core.nth.call(null,vec__12813_12832,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12833,func__4337__auto___12834);
{
var G__12835 = cljs.core.next.call(null,seq__12808_12826__$1);
var G__12836 = null;
var G__12837 = 0;
var G__12838 = 0;
seq__12808_12814 = G__12835;
chunk__12809_12815 = G__12836;
count__12810_12816 = G__12837;
i__12811_12817 = G__12838;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.folder_toggle = (function folder_toggle(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.folder","p.folder",3836630814),crate.binding.bound.call(null,this$,(function (){return [cljs.core.str(lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))),cljs.core.str(lt.objs.files.separator)].join('');
}))], null));var seq__12845_12851 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (){if(cljs.core.not.call(null,new cljs.core.Keyword(null,"open?","open?",1119852199).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"open!","open!",1119852169));
} else
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"close!","close!",3951350939));
}
})], null)));var chunk__12846_12852 = null;var count__12847_12853 = 0;var i__12848_12854 = 0;while(true){
if((i__12848_12854 < count__12847_12853))
{var vec__12849_12855 = cljs.core._nth.call(null,chunk__12846_12852,i__12848_12854);var ev__4336__auto___12856 = cljs.core.nth.call(null,vec__12849_12855,0,null);var func__4337__auto___12857 = cljs.core.nth.call(null,vec__12849_12855,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12856,func__4337__auto___12857);
{
var G__12858 = seq__12845_12851;
var G__12859 = chunk__12846_12852;
var G__12860 = count__12847_12853;
var G__12861 = (i__12848_12854 + 1);
seq__12845_12851 = G__12858;
chunk__12846_12852 = G__12859;
count__12847_12853 = G__12860;
i__12848_12854 = G__12861;
continue;
}
} else
{var temp__4092__auto___12862 = cljs.core.seq.call(null,seq__12845_12851);if(temp__4092__auto___12862)
{var seq__12845_12863__$1 = temp__4092__auto___12862;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12845_12863__$1))
{var c__4150__auto___12864 = cljs.core.chunk_first.call(null,seq__12845_12863__$1);{
var G__12865 = cljs.core.chunk_rest.call(null,seq__12845_12863__$1);
var G__12866 = c__4150__auto___12864;
var G__12867 = cljs.core.count.call(null,c__4150__auto___12864);
var G__12868 = 0;
seq__12845_12851 = G__12865;
chunk__12846_12852 = G__12866;
count__12847_12853 = G__12867;
i__12848_12854 = G__12868;
continue;
}
} else
{var vec__12850_12869 = cljs.core.first.call(null,seq__12845_12863__$1);var ev__4336__auto___12870 = cljs.core.nth.call(null,vec__12850_12869,0,null);var func__4337__auto___12871 = cljs.core.nth.call(null,vec__12850_12869,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12870,func__4337__auto___12871);
{
var G__12872 = cljs.core.next.call(null,seq__12845_12863__$1);
var G__12873 = null;
var G__12874 = 0;
var G__12875 = 0;
seq__12845_12851 = G__12872;
chunk__12846_12852 = G__12873;
count__12847_12853 = G__12874;
i__12848_12854 = G__12875;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.sub_folders = (function sub_folders(p__12878){var map__12894 = p__12878;var map__12894__$1 = ((cljs.core.seq_QMARK_.call(null,map__12894))?cljs.core.apply.call(null,cljs.core.hash_map,map__12894):map__12894);var root_QMARK_ = cljs.core.get.call(null,map__12894__$1,new cljs.core.Keyword(null,"root?","root?",1122602767));var path = cljs.core.get.call(null,map__12894__$1,new cljs.core.Keyword(null,"path","path",1017337751));var open_QMARK_ = cljs.core.get.call(null,map__12894__$1,new cljs.core.Keyword(null,"open?","open?",1119852199));var files = cljs.core.get.call(null,map__12894__$1,new cljs.core.Keyword(null,"files","files",1111338473));var folders = cljs.core.get.call(null,map__12894__$1,new cljs.core.Keyword(null,"folders","folders",4625622327));var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),[cljs.core.str((cljs.core.truth_(root_QMARK_)?null:"sub ")),cljs.core.str((cljs.core.truth_(open_QMARK_)?"opened":null))].join('')], null),(function (){var iter__4119__auto__ = (function iter__12895(s__12896){return (new cljs.core.LazySeq(null,(function (){var s__12896__$1 = s__12896;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__12896__$1);if(temp__4092__auto__)
{var s__12896__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__12896__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__12896__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__12898 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__12897 = 0;while(true){
if((i__12897 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__12897);cljs.core.chunk_append.call(null,b__12898,lt.object.__GT_content.call(null,f));
{
var G__12909 = (i__12897 + 1);
i__12897 = G__12909;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12898),iter__12895.call(null,cljs.core.chunk_rest.call(null,s__12896__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12898),null);
}
} else
{var f = cljs.core.first.call(null,s__12896__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,f),iter__12895.call(null,cljs.core.rest.call(null,s__12896__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.sort_by.call(null,((function (iter__4119__auto__){
return (function (p1__12876_SHARP_){return clojure.string.lower_case.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,p1__12876_SHARP_))));
});})(iter__4119__auto__))
,folders));
})(),(function (){var iter__4119__auto__ = (function iter__12899(s__12900){return (new cljs.core.LazySeq(null,(function (){var s__12900__$1 = s__12900;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__12900__$1);if(temp__4092__auto__)
{var s__12900__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__12900__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__12900__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__12902 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__12901 = 0;while(true){
if((i__12901 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__12901);cljs.core.chunk_append.call(null,b__12902,lt.object.__GT_content.call(null,f));
{
var G__12910 = (i__12901 + 1);
i__12901 = G__12910;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12902),iter__12899.call(null,cljs.core.chunk_rest.call(null,s__12900__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__12902),null);
}
} else
{var f = cljs.core.first.call(null,s__12900__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,f),iter__12899.call(null,cljs.core.rest.call(null,s__12900__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.sort_by.call(null,((function (iter__4119__auto__){
return (function (p1__12877_SHARP_){return clojure.string.lower_case.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,p1__12877_SHARP_))));
});})(iter__4119__auto__))
,files));
})()], null));var seq__12903_12911 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__12904_12912 = null;var count__12905_12913 = 0;var i__12906_12914 = 0;while(true){
if((i__12906_12914 < count__12905_12913))
{var vec__12907_12915 = cljs.core._nth.call(null,chunk__12904_12912,i__12906_12914);var ev__4336__auto___12916 = cljs.core.nth.call(null,vec__12907_12915,0,null);var func__4337__auto___12917 = cljs.core.nth.call(null,vec__12907_12915,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12916,func__4337__auto___12917);
{
var G__12918 = seq__12903_12911;
var G__12919 = chunk__12904_12912;
var G__12920 = count__12905_12913;
var G__12921 = (i__12906_12914 + 1);
seq__12903_12911 = G__12918;
chunk__12904_12912 = G__12919;
count__12905_12913 = G__12920;
i__12906_12914 = G__12921;
continue;
}
} else
{var temp__4092__auto___12922 = cljs.core.seq.call(null,seq__12903_12911);if(temp__4092__auto___12922)
{var seq__12903_12923__$1 = temp__4092__auto___12922;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12903_12923__$1))
{var c__4150__auto___12924 = cljs.core.chunk_first.call(null,seq__12903_12923__$1);{
var G__12925 = cljs.core.chunk_rest.call(null,seq__12903_12923__$1);
var G__12926 = c__4150__auto___12924;
var G__12927 = cljs.core.count.call(null,c__4150__auto___12924);
var G__12928 = 0;
seq__12903_12911 = G__12925;
chunk__12904_12912 = G__12926;
count__12905_12913 = G__12927;
i__12906_12914 = G__12928;
continue;
}
} else
{var vec__12908_12929 = cljs.core.first.call(null,seq__12903_12923__$1);var ev__4336__auto___12930 = cljs.core.nth.call(null,vec__12908_12929,0,null);var func__4337__auto___12931 = cljs.core.nth.call(null,vec__12908_12929,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12930,func__4337__auto___12931);
{
var G__12932 = cljs.core.next.call(null,seq__12903_12923__$1);
var G__12933 = null;
var G__12934 = 0;
var G__12935 = 0;
seq__12903_12911 = G__12932;
chunk__12904_12912 = G__12933;
count__12905_12913 = G__12934;
i__12906_12914 = G__12935;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.rename_input = (function rename_input(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.rename","input.rename",1571488084),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"value","value",1125876963),lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))], null)], null));var seq__12942_12948 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.focus","rename.focus",4215768474));
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.blur","rename.blur",839974025));
})], null)));var chunk__12943_12949 = null;var count__12944_12950 = 0;var i__12945_12951 = 0;while(true){
if((i__12945_12951 < count__12944_12950))
{var vec__12946_12952 = cljs.core._nth.call(null,chunk__12943_12949,i__12945_12951);var ev__4336__auto___12953 = cljs.core.nth.call(null,vec__12946_12952,0,null);var func__4337__auto___12954 = cljs.core.nth.call(null,vec__12946_12952,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12953,func__4337__auto___12954);
{
var G__12955 = seq__12942_12948;
var G__12956 = chunk__12943_12949;
var G__12957 = count__12944_12950;
var G__12958 = (i__12945_12951 + 1);
seq__12942_12948 = G__12955;
chunk__12943_12949 = G__12956;
count__12944_12950 = G__12957;
i__12945_12951 = G__12958;
continue;
}
} else
{var temp__4092__auto___12959 = cljs.core.seq.call(null,seq__12942_12948);if(temp__4092__auto___12959)
{var seq__12942_12960__$1 = temp__4092__auto___12959;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12942_12960__$1))
{var c__4150__auto___12961 = cljs.core.chunk_first.call(null,seq__12942_12960__$1);{
var G__12962 = cljs.core.chunk_rest.call(null,seq__12942_12960__$1);
var G__12963 = c__4150__auto___12961;
var G__12964 = cljs.core.count.call(null,c__4150__auto___12961);
var G__12965 = 0;
seq__12942_12948 = G__12962;
chunk__12943_12949 = G__12963;
count__12944_12950 = G__12964;
i__12945_12951 = G__12965;
continue;
}
} else
{var vec__12947_12966 = cljs.core.first.call(null,seq__12942_12960__$1);var ev__4336__auto___12967 = cljs.core.nth.call(null,vec__12947_12966,0,null);var func__4337__auto___12968 = cljs.core.nth.call(null,vec__12947_12966,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12967,func__4337__auto___12968);
{
var G__12969 = cljs.core.next.call(null,seq__12942_12960__$1);
var G__12970 = null;
var G__12971 = 0;
var G__12972 = 0;
seq__12942_12948 = G__12969;
chunk__12943_12949 = G__12970;
count__12944_12950 = G__12971;
i__12945_12951 = G__12972;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.renameable = (function renameable(this$,cur,content){if(cljs.core.truth_(cur))
{return lt.objs.sidebar.workspace.rename_input.call(null,this$);
} else
{return content;
}
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"tree-item","tree-item",999403348),null,new cljs.core.Keyword(null,"workspace.file","workspace.file",1768213159),null], null), null),new cljs.core.Keyword(null,"path","path",1017337751),"",new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,path){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),path], null));
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,(function (p1__12973_SHARP_){if(cljs.core.truth_(new cljs.core.Keyword(null,"renaming?","renaming?",2774795926).cljs$core$IFn$_invoke$arity$1(p1__12973_SHARP_)))
{return "renaming";
} else
{return "";
}
}))], null),lt.objs.sidebar.workspace.rename_input.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tree-item","div.tree-item",4651075127),lt.objs.sidebar.workspace.file_toggle.call(null,this$)], null)], null);
}));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"tree-item","tree-item",999403348),null,new cljs.core.Keyword(null,"workspace.folder","workspace.folder",4355811161),null], null), null),new cljs.core.Keyword(null,"path","path",1017337751),"",new cljs.core.Keyword(null,"open?","open?",1119852199),false,new cljs.core.Keyword(null,"realized?","realized?",4433874243),false,new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,path){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),path], null));
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,(function (p1__12974_SHARP_){if(cljs.core.truth_(new cljs.core.Keyword(null,"renaming?","renaming?",2774795926).cljs$core$IFn$_invoke$arity$1(p1__12974_SHARP_)))
{return "renaming";
} else
{return "";
}
}))], null),lt.objs.sidebar.workspace.rename_input.call(null,this$),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tree-item","div.tree-item",4651075127),(cljs.core.truth_(path)?lt.objs.sidebar.workspace.folder_toggle.call(null,this$):null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),crate.binding.bound.call(null,this$,lt.objs.sidebar.workspace.sub_folders)], null)], null)], null);
}));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.root","lt.objs.sidebar.workspace/workspace.root",4597214311),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"workspace.root","workspace.root",1768576525),null], null), null),new cljs.core.Keyword(null,"root?","root?",1122602767),true,new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939),cljs.core.PersistentHashSet.EMPTY,new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"open?","open?",1119852199),true,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tree-root","div.tree-root",4651338758),crate.binding.bound.call(null,this$,lt.objs.sidebar.workspace.sub_folders)], null);
}));
lt.objs.sidebar.workspace.tree = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.root","lt.objs.sidebar.workspace/workspace.root",4597214311));
lt.objs.sidebar.workspace.input = (function input(type,event){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",1114262332),new cljs.core.PersistentArrayMap.fromArray([new cljs.core.Keyword(null,"type","type",1017479852),"file",type,true,new cljs.core.Keyword(null,"style","style",1123684643),"display:none;"], true, false)], null));var seq__12981_12987 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"change","change",3947235106),(function (){var me = this;if(cljs.core.empty_QMARK_.call(null,lt.util.dom.val.call(null,me)))
{return null;
} else
{return lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,event,lt.util.dom.val.call(null,me));
}
})], null)));var chunk__12982_12988 = null;var count__12983_12989 = 0;var i__12984_12990 = 0;while(true){
if((i__12984_12990 < count__12983_12989))
{var vec__12985_12991 = cljs.core._nth.call(null,chunk__12982_12988,i__12984_12990);var ev__4336__auto___12992 = cljs.core.nth.call(null,vec__12985_12991,0,null);var func__4337__auto___12993 = cljs.core.nth.call(null,vec__12985_12991,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12992,func__4337__auto___12993);
{
var G__12994 = seq__12981_12987;
var G__12995 = chunk__12982_12988;
var G__12996 = count__12983_12989;
var G__12997 = (i__12984_12990 + 1);
seq__12981_12987 = G__12994;
chunk__12982_12988 = G__12995;
count__12983_12989 = G__12996;
i__12984_12990 = G__12997;
continue;
}
} else
{var temp__4092__auto___12998 = cljs.core.seq.call(null,seq__12981_12987);if(temp__4092__auto___12998)
{var seq__12981_12999__$1 = temp__4092__auto___12998;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12981_12999__$1))
{var c__4150__auto___13000 = cljs.core.chunk_first.call(null,seq__12981_12999__$1);{
var G__13001 = cljs.core.chunk_rest.call(null,seq__12981_12999__$1);
var G__13002 = c__4150__auto___13000;
var G__13003 = cljs.core.count.call(null,c__4150__auto___13000);
var G__13004 = 0;
seq__12981_12987 = G__13001;
chunk__12982_12988 = G__13002;
count__12983_12989 = G__13003;
i__12984_12990 = G__13004;
continue;
}
} else
{var vec__12986_13005 = cljs.core.first.call(null,seq__12981_12999__$1);var ev__4336__auto___13006 = cljs.core.nth.call(null,vec__12986_13005,0,null);var func__4337__auto___13007 = cljs.core.nth.call(null,vec__12986_13005,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13006,func__4337__auto___13007);
{
var G__13008 = cljs.core.next.call(null,seq__12981_12999__$1);
var G__13009 = null;
var G__13010 = 0;
var G__13011 = 0;
seq__12981_12987 = G__13008;
chunk__12982_12988 = G__13009;
count__12983_12989 = G__13010;
i__12984_12990 = G__13011;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.open_folder = (function open_folder(){lt.objs.sidebar.workspace.active_dialog = lt.objs.sidebar.workspace.input.call(null,new cljs.core.Keyword(null,"nwdirectory","nwdirectory",2339862070),new cljs.core.Keyword(null,"workspace.add.folder!","workspace.add.folder!",1443047615));
return lt.util.dom.trigger.call(null,lt.objs.sidebar.workspace.active_dialog,new cljs.core.Keyword(null,"click","click",1108654330));
});
lt.objs.sidebar.workspace.open_file = (function open_file(){lt.objs.sidebar.workspace.active_dialog = lt.objs.sidebar.workspace.input.call(null,new cljs.core.Keyword(null,"blah","blah",1016930659),new cljs.core.Keyword(null,"workspace.add.file!","workspace.add.file!",821993457));
return lt.util.dom.trigger.call(null,lt.objs.sidebar.workspace.active_dialog,new cljs.core.Keyword(null,"click","click",1108654330));
});
lt.objs.sidebar.workspace.button = (function button(name,action){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),name], null));var seq__13018_13024 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),action], null)));var chunk__13019_13025 = null;var count__13020_13026 = 0;var i__13021_13027 = 0;while(true){
if((i__13021_13027 < count__13020_13026))
{var vec__13022_13028 = cljs.core._nth.call(null,chunk__13019_13025,i__13021_13027);var ev__4336__auto___13029 = cljs.core.nth.call(null,vec__13022_13028,0,null);var func__4337__auto___13030 = cljs.core.nth.call(null,vec__13022_13028,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13029,func__4337__auto___13030);
{
var G__13031 = seq__13018_13024;
var G__13032 = chunk__13019_13025;
var G__13033 = count__13020_13026;
var G__13034 = (i__13021_13027 + 1);
seq__13018_13024 = G__13031;
chunk__13019_13025 = G__13032;
count__13020_13026 = G__13033;
i__13021_13027 = G__13034;
continue;
}
} else
{var temp__4092__auto___13035 = cljs.core.seq.call(null,seq__13018_13024);if(temp__4092__auto___13035)
{var seq__13018_13036__$1 = temp__4092__auto___13035;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13018_13036__$1))
{var c__4150__auto___13037 = cljs.core.chunk_first.call(null,seq__13018_13036__$1);{
var G__13038 = cljs.core.chunk_rest.call(null,seq__13018_13036__$1);
var G__13039 = c__4150__auto___13037;
var G__13040 = cljs.core.count.call(null,c__4150__auto___13037);
var G__13041 = 0;
seq__13018_13024 = G__13038;
chunk__13019_13025 = G__13039;
count__13020_13026 = G__13040;
i__13021_13027 = G__13041;
continue;
}
} else
{var vec__13023_13042 = cljs.core.first.call(null,seq__13018_13036__$1);var ev__4336__auto___13043 = cljs.core.nth.call(null,vec__13023_13042,0,null);var func__4337__auto___13044 = cljs.core.nth.call(null,vec__13023_13042,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13043,func__4337__auto___13044);
{
var G__13045 = cljs.core.next.call(null,seq__13018_13036__$1);
var G__13046 = null;
var G__13047 = 0;
var G__13048 = 0;
seq__13018_13024 = G__13045;
chunk__13019_13025 = G__13046;
count__13020_13026 = G__13047;
i__13021_13027 = G__13048;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.recent = (function recent(this$){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"recent!","recent!",2096199832));
});
lt.objs.sidebar.workspace.recents_item = (function recents_item(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.folders","ul.folders",4036689120),(function (){var iter__4119__auto__ = (function iter__13063(s__13064){return (new cljs.core.LazySeq(null,(function (){var s__13064__$1 = s__13064;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__13064__$1);if(temp__4092__auto__)
{var s__13064__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__13064__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__13064__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__13066 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__13065 = 0;while(true){
if((i__13065 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__13065);cljs.core.chunk_append.call(null,b__13066,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f),lt.objs.files.separator], null));
{
var G__13077 = (i__13065 + 1);
i__13065 = G__13077;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__13066),iter__13063.call(null,cljs.core.chunk_rest.call(null,s__13064__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__13066),null);
}
} else
{var f = cljs.core.first.call(null,s__13064__$2);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f),lt.objs.files.separator], null),iter__13063.call(null,cljs.core.rest.call(null,s__13064__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.files","ul.files",1539775442),(function (){var iter__4119__auto__ = (function iter__13067(s__13068){return (new cljs.core.LazySeq(null,(function (){var s__13068__$1 = s__13068;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__13068__$1);if(temp__4092__auto__)
{var s__13068__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__13068__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__13068__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__13070 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__13069 = 0;while(true){
if((i__13069 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__13069);cljs.core.chunk_append.call(null,b__13070,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f)], null));
{
var G__13078 = (i__13069 + 1);
i__13069 = G__13078;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__13070),iter__13067.call(null,cljs.core.chunk_rest.call(null,s__13068__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__13070),null);
}
} else
{var f = cljs.core.first.call(null,s__13068__$2);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f)], null),iter__13067.call(null,cljs.core.rest.call(null,s__13068__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
})()], null)], null));var seq__13071_13079 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select!","select!",2992004631));
})], null)));var chunk__13072_13080 = null;var count__13073_13081 = 0;var i__13074_13082 = 0;while(true){
if((i__13074_13082 < count__13073_13081))
{var vec__13075_13083 = cljs.core._nth.call(null,chunk__13072_13080,i__13074_13082);var ev__4336__auto___13084 = cljs.core.nth.call(null,vec__13075_13083,0,null);var func__4337__auto___13085 = cljs.core.nth.call(null,vec__13075_13083,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13084,func__4337__auto___13085);
{
var G__13086 = seq__13071_13079;
var G__13087 = chunk__13072_13080;
var G__13088 = count__13073_13081;
var G__13089 = (i__13074_13082 + 1);
seq__13071_13079 = G__13086;
chunk__13072_13080 = G__13087;
count__13073_13081 = G__13088;
i__13074_13082 = G__13089;
continue;
}
} else
{var temp__4092__auto___13090 = cljs.core.seq.call(null,seq__13071_13079);if(temp__4092__auto___13090)
{var seq__13071_13091__$1 = temp__4092__auto___13090;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13071_13091__$1))
{var c__4150__auto___13092 = cljs.core.chunk_first.call(null,seq__13071_13091__$1);{
var G__13093 = cljs.core.chunk_rest.call(null,seq__13071_13091__$1);
var G__13094 = c__4150__auto___13092;
var G__13095 = cljs.core.count.call(null,c__4150__auto___13092);
var G__13096 = 0;
seq__13071_13079 = G__13093;
chunk__13072_13080 = G__13094;
count__13073_13081 = G__13095;
i__13074_13082 = G__13096;
continue;
}
} else
{var vec__13076_13097 = cljs.core.first.call(null,seq__13071_13091__$1);var ev__4336__auto___13098 = cljs.core.nth.call(null,vec__13076_13097,0,null);var func__4337__auto___13099 = cljs.core.nth.call(null,vec__13076_13097,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13098,func__4337__auto___13099);
{
var G__13100 = cljs.core.next.call(null,seq__13071_13091__$1);
var G__13101 = null;
var G__13102 = 0;
var G__13103 = 0;
seq__13071_13079 = G__13100;
chunk__13072_13080 = G__13101;
count__13073_13081 = G__13102;
i__13074_13082 = G__13103;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.back_button = (function back_button(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",1013907516),"Select a workspace"], null));var seq__13110_13116 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"tree!","tree!",1124529077));
})], null)));var chunk__13111_13117 = null;var count__13112_13118 = 0;var i__13113_13119 = 0;while(true){
if((i__13113_13119 < count__13112_13118))
{var vec__13114_13120 = cljs.core._nth.call(null,chunk__13111_13117,i__13113_13119);var ev__4336__auto___13121 = cljs.core.nth.call(null,vec__13114_13120,0,null);var func__4337__auto___13122 = cljs.core.nth.call(null,vec__13114_13120,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13121,func__4337__auto___13122);
{
var G__13123 = seq__13110_13116;
var G__13124 = chunk__13111_13117;
var G__13125 = count__13112_13118;
var G__13126 = (i__13113_13119 + 1);
seq__13110_13116 = G__13123;
chunk__13111_13117 = G__13124;
count__13112_13118 = G__13125;
i__13113_13119 = G__13126;
continue;
}
} else
{var temp__4092__auto___13127 = cljs.core.seq.call(null,seq__13110_13116);if(temp__4092__auto___13127)
{var seq__13110_13128__$1 = temp__4092__auto___13127;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13110_13128__$1))
{var c__4150__auto___13129 = cljs.core.chunk_first.call(null,seq__13110_13128__$1);{
var G__13130 = cljs.core.chunk_rest.call(null,seq__13110_13128__$1);
var G__13131 = c__4150__auto___13129;
var G__13132 = cljs.core.count.call(null,c__4150__auto___13129);
var G__13133 = 0;
seq__13110_13116 = G__13130;
chunk__13111_13117 = G__13131;
count__13112_13118 = G__13132;
i__13113_13119 = G__13133;
continue;
}
} else
{var vec__13115_13134 = cljs.core.first.call(null,seq__13110_13128__$1);var ev__4336__auto___13135 = cljs.core.nth.call(null,vec__13115_13134,0,null);var func__4337__auto___13136 = cljs.core.nth.call(null,vec__13115_13134,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13135,func__4337__auto___13136);
{
var G__13137 = cljs.core.next.call(null,seq__13110_13128__$1);
var G__13138 = null;
var G__13139 = 0;
var G__13140 = 0;
seq__13110_13116 = G__13137;
chunk__13111_13117 = G__13138;
count__13112_13118 = G__13139;
i__13113_13119 = G__13140;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.recents = (function recents(this$,rs){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),lt.objs.sidebar.workspace.back_button.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),(function (){var iter__4119__auto__ = (function iter__13151(s__13152){return (new cljs.core.LazySeq(null,(function (){var s__13152__$1 = s__13152;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__13152__$1);if(temp__4092__auto__)
{var s__13152__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__13152__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__13152__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__13154 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__13153 = 0;while(true){
if((i__13153 < size__4118__auto__))
{var r = cljs.core._nth.call(null,c__4117__auto__,i__13153);cljs.core.chunk_append.call(null,b__13154,lt.object.__GT_content.call(null,r));
{
var G__13161 = (i__13153 + 1);
i__13153 = G__13161;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__13154),iter__13151.call(null,cljs.core.chunk_rest.call(null,s__13152__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__13154),null);
}
} else
{var r = cljs.core.first.call(null,s__13152__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,r),iter__13151.call(null,cljs.core.rest.call(null,s__13152__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,rs);
})()], null)], null));var seq__13155_13162 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__13156_13163 = null;var count__13157_13164 = 0;var i__13158_13165 = 0;while(true){
if((i__13158_13165 < count__13157_13164))
{var vec__13159_13166 = cljs.core._nth.call(null,chunk__13156_13163,i__13158_13165);var ev__4336__auto___13167 = cljs.core.nth.call(null,vec__13159_13166,0,null);var func__4337__auto___13168 = cljs.core.nth.call(null,vec__13159_13166,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13167,func__4337__auto___13168);
{
var G__13169 = seq__13155_13162;
var G__13170 = chunk__13156_13163;
var G__13171 = count__13157_13164;
var G__13172 = (i__13158_13165 + 1);
seq__13155_13162 = G__13169;
chunk__13156_13163 = G__13170;
count__13157_13164 = G__13171;
i__13158_13165 = G__13172;
continue;
}
} else
{var temp__4092__auto___13173 = cljs.core.seq.call(null,seq__13155_13162);if(temp__4092__auto___13173)
{var seq__13155_13174__$1 = temp__4092__auto___13173;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13155_13174__$1))
{var c__4150__auto___13175 = cljs.core.chunk_first.call(null,seq__13155_13174__$1);{
var G__13176 = cljs.core.chunk_rest.call(null,seq__13155_13174__$1);
var G__13177 = c__4150__auto___13175;
var G__13178 = cljs.core.count.call(null,c__4150__auto___13175);
var G__13179 = 0;
seq__13155_13162 = G__13176;
chunk__13156_13163 = G__13177;
count__13157_13164 = G__13178;
i__13158_13165 = G__13179;
continue;
}
} else
{var vec__13160_13180 = cljs.core.first.call(null,seq__13155_13174__$1);var ev__4336__auto___13181 = cljs.core.nth.call(null,vec__13160_13180,0,null);var func__4337__auto___13182 = cljs.core.nth.call(null,vec__13160_13180,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13181,func__4337__auto___13182);
{
var G__13183 = cljs.core.next.call(null,seq__13155_13174__$1);
var G__13184 = null;
var G__13185 = 0;
var G__13186 = 0;
seq__13155_13162 = G__13183;
chunk__13156_13163 = G__13184;
count__13157_13164 = G__13185;
i__13158_13165 = G__13186;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.__BEH__recent_BANG_ = (function __BEH__recent_BANG_(this$){var seq__13192_13196 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));var chunk__13193_13197 = null;var count__13194_13198 = 0;var i__13195_13199 = 0;while(true){
if((i__13195_13199 < count__13194_13198))
{var r_13200 = cljs.core._nth.call(null,chunk__13193_13197,i__13195_13199);lt.object.destroy_BANG_.call(null,r_13200);
{
var G__13201 = seq__13192_13196;
var G__13202 = chunk__13193_13197;
var G__13203 = count__13194_13198;
var G__13204 = (i__13195_13199 + 1);
seq__13192_13196 = G__13201;
chunk__13193_13197 = G__13202;
count__13194_13198 = G__13203;
i__13195_13199 = G__13204;
continue;
}
} else
{var temp__4092__auto___13205 = cljs.core.seq.call(null,seq__13192_13196);if(temp__4092__auto___13205)
{var seq__13192_13206__$1 = temp__4092__auto___13205;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13192_13206__$1))
{var c__4150__auto___13207 = cljs.core.chunk_first.call(null,seq__13192_13206__$1);{
var G__13208 = cljs.core.chunk_rest.call(null,seq__13192_13206__$1);
var G__13209 = c__4150__auto___13207;
var G__13210 = cljs.core.count.call(null,c__4150__auto___13207);
var G__13211 = 0;
seq__13192_13196 = G__13208;
chunk__13193_13197 = G__13209;
count__13194_13198 = G__13210;
i__13195_13199 = G__13211;
continue;
}
} else
{var r_13212 = cljs.core.first.call(null,seq__13192_13206__$1);lt.object.destroy_BANG_.call(null,r_13212);
{
var G__13213 = cljs.core.next.call(null,seq__13192_13206__$1);
var G__13214 = null;
var G__13215 = 0;
var G__13216 = 0;
seq__13192_13196 = G__13213;
chunk__13193_13197 = G__13214;
count__13194_13198 = G__13215;
i__13195_13199 = G__13216;
continue;
}
}
} else
{}
}
break;
}
return lt.object.merge_BANG_.call(null,this$,cljs.core.PersistentHashMap.fromArrays.call(null,[new cljs.core.Keyword(null,"recents","recents",2096199914)],[cljs.core.map.call(null,(function (p1__13187_SHARP_){return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent-workspace","lt.objs.sidebar.workspace/recent-workspace",4144769423),p1__13187_SHARP_);
}),lt.objs.workspace.all.call(null))]));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent!","lt.objs.sidebar.workspace/recent!",4521365004),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"recent!","recent!",2096199832),null], null), null));
lt.objs.sidebar.workspace.__BEH__tree_BANG_ = (function __BEH__tree_BANG_(this$){var seq__13221_13225 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));var chunk__13222_13226 = null;var count__13223_13227 = 0;var i__13224_13228 = 0;while(true){
if((i__13224_13228 < count__13223_13227))
{var r_13229 = cljs.core._nth.call(null,chunk__13222_13226,i__13224_13228);lt.object.destroy_BANG_.call(null,r_13229);
{
var G__13230 = seq__13221_13225;
var G__13231 = chunk__13222_13226;
var G__13232 = count__13223_13227;
var G__13233 = (i__13224_13228 + 1);
seq__13221_13225 = G__13230;
chunk__13222_13226 = G__13231;
count__13223_13227 = G__13232;
i__13224_13228 = G__13233;
continue;
}
} else
{var temp__4092__auto___13234 = cljs.core.seq.call(null,seq__13221_13225);if(temp__4092__auto___13234)
{var seq__13221_13235__$1 = temp__4092__auto___13234;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13221_13235__$1))
{var c__4150__auto___13236 = cljs.core.chunk_first.call(null,seq__13221_13235__$1);{
var G__13237 = cljs.core.chunk_rest.call(null,seq__13221_13235__$1);
var G__13238 = c__4150__auto___13236;
var G__13239 = cljs.core.count.call(null,c__4150__auto___13236);
var G__13240 = 0;
seq__13221_13225 = G__13237;
chunk__13222_13226 = G__13238;
count__13223_13227 = G__13239;
i__13224_13228 = G__13240;
continue;
}
} else
{var r_13241 = cljs.core.first.call(null,seq__13221_13235__$1);lt.object.destroy_BANG_.call(null,r_13241);
{
var G__13242 = cljs.core.next.call(null,seq__13221_13235__$1);
var G__13243 = null;
var G__13244 = 0;
var G__13245 = 0;
seq__13221_13225 = G__13242;
chunk__13222_13226 = G__13243;
count__13223_13227 = G__13244;
i__13224_13228 = G__13245;
continue;
}
}
} else
{}
}
break;
}
return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"recents","recents",2096199914),null], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","tree!","lt.objs.sidebar.workspace/tree!",3018393903),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__tree_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tree!","tree!",1124529077),null], null), null));
lt.objs.sidebar.workspace.__BEH__recent__DOT__select_BANG_ = (function __BEH__recent__DOT__select_BANG_(this$){lt.objs.workspace.open.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.raise.call(null,lt.objs.sidebar.workspace.sidebar_workspace,new cljs.core.Keyword(null,"tree!","tree!",1124529077));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent.select!","lt.objs.sidebar.workspace/recent.select!",2595077856),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent__DOT__select_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select!","select!",2992004631),null], null), null));
lt.objs.sidebar.workspace.__BEH__recent__DOT__delete_BANG_ = (function __BEH__recent__DOT__delete_BANG_(this$){if(cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"file","file",1017047278).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.workspace.current_ws)),lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))))
{lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
} else
{}
lt.objs.files.delete_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.raise.call(null,lt.objs.sidebar.workspace.sidebar_workspace,new cljs.core.Keyword(null,"recent!","recent!",2096199832));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent.delete!","lt.objs.sidebar.workspace/recent.delete!",959251503),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent__DOT__delete_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"delete!","delete!",2564367176),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent-workspace","lt.objs.sidebar.workspace/recent-workspace",4144769423),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"recent-workspace","recent-workspace",2388792085),null], null), null),new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,r){lt.object.merge_BANG_.call(null,this$,r);
return lt.objs.sidebar.workspace.recents_item.call(null,this$);
}));
lt.objs.sidebar.workspace.ws_class = (function ws_class(ws){return [cljs.core.str("workspace"),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(ws))?" recents":null))].join('');
});
lt.objs.sidebar.workspace.workspace_ui = (function workspace_ui(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,lt.objs.sidebar.workspace.ws_class)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.wstree","div.wstree",2918560745),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.buttons","ul.buttons",666323612),lt.objs.sidebar.workspace.button.call(null,"folder",lt.objs.sidebar.workspace.open_folder),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li.sep","li.sep",4204306399),"|"], null),lt.objs.sidebar.workspace.button.call(null,"file",lt.objs.sidebar.workspace.open_file),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li.sep","li.sep",4204306399),"|"], null),lt.objs.sidebar.workspace.button.call(null,"recent",(function (){return lt.objs.sidebar.workspace.recent.call(null,this$);
}))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.root","ul.root",615589195),lt.object.__GT_content.call(null,lt.objs.sidebar.workspace.tree)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.recent","div.recent",2761967050),crate.binding.bound.call(null,this$,(function (sw){return lt.objs.sidebar.workspace.recents.call(null,this$,new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(sw));
}))], null)], null));var seq__13252_13258 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dragover","dragover",4468024186),(function (e){e.dataTransfer.dropEffect = "move";
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"dragover","dragover",4468024186),e);
lt.util.dom.prevent.call(null,e);
return false;
}),new cljs.core.Keyword(null,"drop","drop",1016996449),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"drop","drop",1016996449),e);
lt.util.dom.stop_propagation.call(null,e);
return lt.util.dom.prevent.call(null,e);
}),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
})], null)));var chunk__13253_13259 = null;var count__13254_13260 = 0;var i__13255_13261 = 0;while(true){
if((i__13255_13261 < count__13254_13260))
{var vec__13256_13262 = cljs.core._nth.call(null,chunk__13253_13259,i__13255_13261);var ev__4336__auto___13263 = cljs.core.nth.call(null,vec__13256_13262,0,null);var func__4337__auto___13264 = cljs.core.nth.call(null,vec__13256_13262,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13263,func__4337__auto___13264);
{
var G__13265 = seq__13252_13258;
var G__13266 = chunk__13253_13259;
var G__13267 = count__13254_13260;
var G__13268 = (i__13255_13261 + 1);
seq__13252_13258 = G__13265;
chunk__13253_13259 = G__13266;
count__13254_13260 = G__13267;
i__13255_13261 = G__13268;
continue;
}
} else
{var temp__4092__auto___13269 = cljs.core.seq.call(null,seq__13252_13258);if(temp__4092__auto___13269)
{var seq__13252_13270__$1 = temp__4092__auto___13269;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13252_13270__$1))
{var c__4150__auto___13271 = cljs.core.chunk_first.call(null,seq__13252_13270__$1);{
var G__13272 = cljs.core.chunk_rest.call(null,seq__13252_13270__$1);
var G__13273 = c__4150__auto___13271;
var G__13274 = cljs.core.count.call(null,c__4150__auto___13271);
var G__13275 = 0;
seq__13252_13258 = G__13272;
chunk__13253_13259 = G__13273;
count__13254_13260 = G__13274;
i__13255_13261 = G__13275;
continue;
}
} else
{var vec__13257_13276 = cljs.core.first.call(null,seq__13252_13270__$1);var ev__4336__auto___13277 = cljs.core.nth.call(null,vec__13257_13276,0,null);var func__4337__auto___13278 = cljs.core.nth.call(null,vec__13257_13276,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13277,func__4337__auto___13278);
{
var G__13279 = cljs.core.next.call(null,seq__13252_13270__$1);
var G__13280 = null;
var G__13281 = 0;
var G__13282 = 0;
seq__13252_13258 = G__13279;
chunk__13253_13259 = G__13280;
count__13254_13260 = G__13281;
i__13255_13261 = G__13282;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","sidebar.workspace","lt.objs.sidebar.workspace/sidebar.workspace",705450607),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar.workspace","sidebar.workspace",3781278709),null], null), null),new cljs.core.Keyword(null,"label","label",1116631654),"workspace",new cljs.core.Keyword(null,"order","order",1119910592),-7,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return lt.objs.sidebar.workspace.workspace_ui.call(null,this$);
}));
lt.objs.sidebar.workspace.__BEH__sidebar_menu = (function __BEH__sidebar_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Add folder",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.add-folder","workspace.add-folder",2772643205));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Add file",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.add-file","workspace.add-file",2669358035));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Open recent workspace",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show-recents","workspace.show-recents",1806500563));
})], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Clear workspace",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","sidebar-menu","lt.objs.sidebar.workspace/sidebar-menu",3021041170),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__sidebar_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__recent_menu = (function __BEH__recent_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete Workspace",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"delete!","delete!",2564367176));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent-menu","lt.objs.sidebar.workspace/recent-menu",1238711153),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__workspace__DOT__open_on_start = (function __BEH__workspace__DOT__open_on_start(this$){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.open-on-start","lt.objs.sidebar.workspace/workspace.open-on-start",2867305284),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__workspace__DOT__open_on_start,new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Show workspace on start",new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null),new cljs.core.Keyword(null,"type","type",1017479852),new cljs.core.Keyword(null,"user","user",1017503549));
lt.objs.sidebar.workspace.sidebar_workspace = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","sidebar.workspace","lt.objs.sidebar.workspace/sidebar.workspace",705450607));
lt.objs.sidebar.add_item.call(null,lt.objs.sidebar.sidebar,lt.objs.sidebar.workspace.sidebar_workspace);
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.add-folder","workspace.add-folder",2772643205),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: add folder",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.sidebar.workspace.open_folder.call(null);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.add-file","workspace.add-file",2669358035),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: add file",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.sidebar.workspace.open_file.call(null);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Toggle workspace tree",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (force_QMARK_){return lt.object.raise.call(null,lt.objs.sidebar.sidebar,new cljs.core.Keyword(null,"toggle","toggle",4440567494),lt.objs.sidebar.workspace.sidebar_workspace,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"transient?","transient?",3584270951),false,new cljs.core.Keyword(null,"force?","force?",4040082982),force_QMARK_], null));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.rename.cancel!","workspace.rename.cancel!",1179487266),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Cancel rename",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288));if(cljs.core.truth_(temp__4092__auto__))
{var c = temp__4092__auto__;return lt.object.raise.call(null,c,new cljs.core.Keyword(null,"rename.cancel!","rename.cancel!",4050107817));
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.rename.submit!","workspace.rename.submit!",3056447044),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Submit rename",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288));if(cljs.core.truth_(temp__4092__auto__))
{var c = temp__4092__auto__;return lt.object.raise.call(null,c,new cljs.core.Keyword(null,"rename.submit!","rename.submit!",1632100299));
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.show-recents","workspace.show-recents",1806500563),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Open recent workspace",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592),new cljs.core.Keyword(null,"force","force",1111522909));
return lt.objs.sidebar.workspace.recent.call(null,lt.objs.sidebar.workspace.sidebar_workspace);
})], null));

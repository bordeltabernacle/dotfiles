// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.titlebar');
goog.require('cljs.core');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar.command');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.tabs');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.canvas');
goog.require('lt.objs.canvas');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.tabs');
goog.require('lt.objs.sidebar.command');
lt.objs.titlebar.gui = require("nw.gui");
lt.objs.titlebar.win = lt.objs.titlebar.gui.Window.get();
lt.objs.titlebar.fullscreen_QMARK_ = false;
lt.objs.titlebar.win.on("enter-fullscreen",(function (){lt.objs.titlebar.fullscreen_QMARK_ = true;
return lt.util.dom.add_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861));
}));
lt.objs.titlebar.win.on("leave-fullscreen",(function (){lt.objs.titlebar.fullscreen_QMARK_ = false;
return lt.util.dom.remove_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861));
}));
lt.objs.titlebar.close = (function close(){return lt.objs.titlebar.win.close();
});
lt.objs.titlebar.minimize = (function minimize(){return lt.objs.titlebar.win.minimize();
});
lt.objs.titlebar.maximize = (function maximize(){return lt.objs.titlebar.win.maximize();
});
lt.objs.titlebar.fullscreen = (function fullscreen(){if(cljs.core.not.call(null,lt.objs.titlebar.fullscreen_QMARK_))
{return lt.objs.titlebar.win.enterFullscreen();
} else
{return lt.objs.titlebar.win.leaveFullscreen();
}
});
lt.objs.titlebar.button = (function button(class$,action,label){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",1108647146),[cljs.core.str("button "),cljs.core.str(cljs.core.name.call(null,class$))].join(''),new cljs.core.Keyword(null,"title","title",1124275658),"Exit fullscreen"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),label], null)], null));var seq__13955_13961 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return action.call(null);
})], null)));var chunk__13956_13962 = null;var count__13957_13963 = 0;var i__13958_13964 = 0;while(true){
if((i__13958_13964 < count__13957_13963))
{var vec__13959_13965 = cljs.core._nth.call(null,chunk__13956_13962,i__13958_13964);var ev__4336__auto___13966 = cljs.core.nth.call(null,vec__13959_13965,0,null);var func__4337__auto___13967 = cljs.core.nth.call(null,vec__13959_13965,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13966,func__4337__auto___13967);
{
var G__13968 = seq__13955_13961;
var G__13969 = chunk__13956_13962;
var G__13970 = count__13957_13963;
var G__13971 = (i__13958_13964 + 1);
seq__13955_13961 = G__13968;
chunk__13956_13962 = G__13969;
count__13957_13963 = G__13970;
i__13958_13964 = G__13971;
continue;
}
} else
{var temp__4092__auto___13972 = cljs.core.seq.call(null,seq__13955_13961);if(temp__4092__auto___13972)
{var seq__13955_13973__$1 = temp__4092__auto___13972;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13955_13973__$1))
{var c__4150__auto___13974 = cljs.core.chunk_first.call(null,seq__13955_13973__$1);{
var G__13975 = cljs.core.chunk_rest.call(null,seq__13955_13973__$1);
var G__13976 = c__4150__auto___13974;
var G__13977 = cljs.core.count.call(null,c__4150__auto___13974);
var G__13978 = 0;
seq__13955_13961 = G__13975;
chunk__13956_13962 = G__13976;
count__13957_13963 = G__13977;
i__13958_13964 = G__13978;
continue;
}
} else
{var vec__13960_13979 = cljs.core.first.call(null,seq__13955_13973__$1);var ev__4336__auto___13980 = cljs.core.nth.call(null,vec__13960_13979,0,null);var func__4337__auto___13981 = cljs.core.nth.call(null,vec__13960_13979,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___13980,func__4337__auto___13981);
{
var G__13982 = cljs.core.next.call(null,seq__13955_13973__$1);
var G__13983 = null;
var G__13984 = 0;
var G__13985 = 0;
seq__13955_13961 = G__13982;
chunk__13956_13962 = G__13983;
count__13957_13963 = G__13984;
i__13958_13964 = G__13985;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.titlebar.window_buttons = (function window_buttons(){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.window-buttons","div.window-buttons",2883666195),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"close","close",1108660586),lt.objs.titlebar.close,"x"),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"minimize","minimize",3949804048),lt.objs.titlebar.minimize,"-"),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"maximize","maximize",1431033406),lt.objs.titlebar.maximize,"+")], null));var seq__13992_13998 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__13993_13999 = null;var count__13994_14000 = 0;var i__13995_14001 = 0;while(true){
if((i__13995_14001 < count__13994_14000))
{var vec__13996_14002 = cljs.core._nth.call(null,chunk__13993_13999,i__13995_14001);var ev__4336__auto___14003 = cljs.core.nth.call(null,vec__13996_14002,0,null);var func__4337__auto___14004 = cljs.core.nth.call(null,vec__13996_14002,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___14003,func__4337__auto___14004);
{
var G__14005 = seq__13992_13998;
var G__14006 = chunk__13993_13999;
var G__14007 = count__13994_14000;
var G__14008 = (i__13995_14001 + 1);
seq__13992_13998 = G__14005;
chunk__13993_13999 = G__14006;
count__13994_14000 = G__14007;
i__13995_14001 = G__14008;
continue;
}
} else
{var temp__4092__auto___14009 = cljs.core.seq.call(null,seq__13992_13998);if(temp__4092__auto___14009)
{var seq__13992_14010__$1 = temp__4092__auto___14009;if(cljs.core.chunked_seq_QMARK_.call(null,seq__13992_14010__$1))
{var c__4150__auto___14011 = cljs.core.chunk_first.call(null,seq__13992_14010__$1);{
var G__14012 = cljs.core.chunk_rest.call(null,seq__13992_14010__$1);
var G__14013 = c__4150__auto___14011;
var G__14014 = cljs.core.count.call(null,c__4150__auto___14011);
var G__14015 = 0;
seq__13992_13998 = G__14012;
chunk__13993_13999 = G__14013;
count__13994_14000 = G__14014;
i__13995_14001 = G__14015;
continue;
}
} else
{var vec__13997_14016 = cljs.core.first.call(null,seq__13992_14010__$1);var ev__4336__auto___14017 = cljs.core.nth.call(null,vec__13997_14016,0,null);var func__4337__auto___14018 = cljs.core.nth.call(null,vec__13997_14016,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___14017,func__4337__auto___14018);
{
var G__14019 = cljs.core.next.call(null,seq__13992_14010__$1);
var G__14020 = null;
var G__14021 = 0;
var G__14022 = 0;
seq__13992_13998 = G__14019;
chunk__13993_13999 = G__14020;
count__13994_14000 = G__14021;
i__13995_14001 = G__14022;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.titlebar.titlebar = (function titlebar(){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#titlebar","div#titlebar",3210758623),lt.objs.titlebar.window_buttons.call(null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),"Light Table"], null),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861),lt.objs.titlebar.fullscreen,"f")], null));var seq__14029_14035 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__14030_14036 = null;var count__14031_14037 = 0;var i__14032_14038 = 0;while(true){
if((i__14032_14038 < count__14031_14037))
{var vec__14033_14039 = cljs.core._nth.call(null,chunk__14030_14036,i__14032_14038);var ev__4336__auto___14040 = cljs.core.nth.call(null,vec__14033_14039,0,null);var func__4337__auto___14041 = cljs.core.nth.call(null,vec__14033_14039,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___14040,func__4337__auto___14041);
{
var G__14042 = seq__14029_14035;
var G__14043 = chunk__14030_14036;
var G__14044 = count__14031_14037;
var G__14045 = (i__14032_14038 + 1);
seq__14029_14035 = G__14042;
chunk__14030_14036 = G__14043;
count__14031_14037 = G__14044;
i__14032_14038 = G__14045;
continue;
}
} else
{var temp__4092__auto___14046 = cljs.core.seq.call(null,seq__14029_14035);if(temp__4092__auto___14046)
{var seq__14029_14047__$1 = temp__4092__auto___14046;if(cljs.core.chunked_seq_QMARK_.call(null,seq__14029_14047__$1))
{var c__4150__auto___14048 = cljs.core.chunk_first.call(null,seq__14029_14047__$1);{
var G__14049 = cljs.core.chunk_rest.call(null,seq__14029_14047__$1);
var G__14050 = c__4150__auto___14048;
var G__14051 = cljs.core.count.call(null,c__4150__auto___14048);
var G__14052 = 0;
seq__14029_14035 = G__14049;
chunk__14030_14036 = G__14050;
count__14031_14037 = G__14051;
i__14032_14038 = G__14052;
continue;
}
} else
{var vec__14034_14053 = cljs.core.first.call(null,seq__14029_14047__$1);var ev__4336__auto___14054 = cljs.core.nth.call(null,vec__14034_14053,0,null);var func__4337__auto___14055 = cljs.core.nth.call(null,vec__14034_14053,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___14054,func__4337__auto___14055);
{
var G__14056 = cljs.core.next.call(null,seq__14029_14047__$1);
var G__14057 = null;
var G__14058 = 0;
var G__14059 = 0;
seq__14029_14035 = G__14056;
chunk__14030_14036 = G__14057;
count__14031_14037 = G__14058;
i__14032_14038 = G__14059;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.titlebar.__BEH__add_titlebar = (function __BEH__add_titlebar(app){if(cljs.core.truth_(lt.util.dom.$.call(null,new cljs.core.Keyword(null,"#titlebar","#titlebar",4602477392))))
{return null;
} else
{return lt.util.dom.append.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),lt.objs.titlebar.titlebar.call(null));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.titlebar","add-titlebar","lt.objs.titlebar/add-titlebar",771287687),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.titlebar.__BEH__add_titlebar,new cljs.core.Keyword(null,"desc","desc",1016984067),"App: Append custom titlebar",new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null));
lt.util.dom.append.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"#multi","#multi",2120181352)),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861),lt.objs.titlebar.fullscreen,"-"));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"window.fullscreen","window.fullscreen",3710835691),new cljs.core.Keyword(null,"desc","desc",1016984067),"Window: Toggle fullscreen",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.titlebar.fullscreen.call(null);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"window.minimize","window.minimize",2477637198),new cljs.core.Keyword(null,"desc","desc",1016984067),"Window: Minimize",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.titlebar.minimize.call(null);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"window.maximize","window.maximize",4253833852),new cljs.core.Keyword(null,"desc","desc",1016984067),"Window: Maximize",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.titlebar.maximize.call(null);
})], null));

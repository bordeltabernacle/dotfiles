// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.eval');
goog.require('cljs.core');
goog.require('lt.util.cljs');
goog.require('crate.binding');
goog.require('lt.objs.menu');
goog.require('lt.objs.sidebar.command');
goog.require('lt.objs.files');
goog.require('lt.util.dom');
goog.require('lt.objs.platform');
goog.require('lt.objs.popup');
goog.require('lt.objs.popup');
goog.require('crate.core');
goog.require('lt.objs.notifos');
goog.require('lt.objs.notifos');
goog.require('lt.util.dom');
goog.require('lt.objs.editor.pool');
goog.require('clojure.string');
goog.require('lt.objs.canvas');
goog.require('lt.util.cljs');
goog.require('lt.objs.platform');
goog.require('lt.objs.menu');
goog.require('lt.objs.files');
goog.require('lt.objs.clients');
goog.require('clojure.string');
goog.require('crate.binding');
goog.require('lt.objs.editor');
goog.require('lt.objs.canvas');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.console');
goog.require('lt.objs.console');
goog.require('crate.core');
goog.require('lt.objs.clients');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.sidebar.command');
goog.require('lt.objs.editor');
/**
* @param {...*} var_args
*/
lt.objs.eval.button = (function() { 
var button__delegate = function (label,p__8420){var vec__8428 = p__8420;var cb = cljs.core.nth.call(null,vec__8428,0,null);var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.button.right","div.button.right",629503503),label], null));var seq__8429_8435 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){if(cljs.core.truth_(cb))
{return cb.call(null);
} else
{return null;
}
})], null)));var chunk__8430_8436 = null;var count__8431_8437 = 0;var i__8432_8438 = 0;while(true){
if((i__8432_8438 < count__8431_8437))
{var vec__8433_8439 = cljs.core._nth.call(null,chunk__8430_8436,i__8432_8438);var ev__4336__auto___8440 = cljs.core.nth.call(null,vec__8433_8439,0,null);var func__4337__auto___8441 = cljs.core.nth.call(null,vec__8433_8439,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8440,func__4337__auto___8441);
{
var G__8442 = seq__8429_8435;
var G__8443 = chunk__8430_8436;
var G__8444 = count__8431_8437;
var G__8445 = (i__8432_8438 + 1);
seq__8429_8435 = G__8442;
chunk__8430_8436 = G__8443;
count__8431_8437 = G__8444;
i__8432_8438 = G__8445;
continue;
}
} else
{var temp__4092__auto___8446 = cljs.core.seq.call(null,seq__8429_8435);if(temp__4092__auto___8446)
{var seq__8429_8447__$1 = temp__4092__auto___8446;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8429_8447__$1))
{var c__4150__auto___8448 = cljs.core.chunk_first.call(null,seq__8429_8447__$1);{
var G__8449 = cljs.core.chunk_rest.call(null,seq__8429_8447__$1);
var G__8450 = c__4150__auto___8448;
var G__8451 = cljs.core.count.call(null,c__4150__auto___8448);
var G__8452 = 0;
seq__8429_8435 = G__8449;
chunk__8430_8436 = G__8450;
count__8431_8437 = G__8451;
i__8432_8438 = G__8452;
continue;
}
} else
{var vec__8434_8453 = cljs.core.first.call(null,seq__8429_8447__$1);var ev__4336__auto___8454 = cljs.core.nth.call(null,vec__8434_8453,0,null);var func__4337__auto___8455 = cljs.core.nth.call(null,vec__8434_8453,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8454,func__4337__auto___8455);
{
var G__8456 = cljs.core.next.call(null,seq__8429_8447__$1);
var G__8457 = null;
var G__8458 = 0;
var G__8459 = 0;
seq__8429_8435 = G__8456;
chunk__8430_8436 = G__8457;
count__8431_8437 = G__8458;
i__8432_8438 = G__8459;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
};
var button = function (label,var_args){
var p__8420 = null;if (arguments.length > 1) {
  p__8420 = cljs.core.array_seq(Array.prototype.slice.call(arguments, 1),0);} 
return button__delegate.call(this,label,p__8420);};
button.cljs$lang$maxFixedArity = 1;
button.cljs$lang$applyTo = (function (arglist__8460){
var label = cljs.core.first(arglist__8460);
var p__8420 = cljs.core.rest(arglist__8460);
return button__delegate(label,p__8420);
});
button.cljs$core$IFn$_invoke$arity$variadic = button__delegate;
return button;
})()
;
lt.objs.eval.unescape_unicode = (function unescape_unicode(s){return clojure.string.replace.call(null,s,/\\x(..)/,(function (res,r){return String.fromCharCode(parseInt(r,16));
}));
});
var ev_id_8461 = cljs.core.atom.call(null,0);lt.objs.eval.append_source_file = (function append_source_file(code,file){return [cljs.core.str(code),cljs.core.str("\n\n//# sourceURL="),cljs.core.str((function (){var or__3408__auto__ = file;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return "evalresult";
}
})()),cljs.core.str("[eval"),cljs.core.str(cljs.core.swap_BANG_.call(null,ev_id_8461,cljs.core.inc)),cljs.core.str("]")].join('');
});
lt.objs.eval.pad = (function pad(code,lines){return [cljs.core.str(cljs.core.reduce.call(null,cljs.core.str,cljs.core.repeat.call(null,lines,"\n"))),cljs.core.str(code)].join('');
});
lt.objs.eval.cljs_result_format = (function cljs_result_format(n){if(cljs.core.coll_QMARK_.call(null,n))
{return cljs.core.pr_str.call(null,n);
} else
{if(cljs.core.fn_QMARK_.call(null,n))
{return [cljs.core.str("(fn "),cljs.core.str(n.name),cljs.core.str(" ..)")].join('');
} else
{if((n == null))
{return "nil";
} else
{if(cljs.core._EQ_.call(null,cljs.core.pr_str.call(null,n),"#<[object Object]>"))
{return lt.objs.console.inspect.call(null,n);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{return cljs.core.pr_str.call(null,n);
} else
{return null;
}
}
}
}
}
});
lt.objs.eval.__BEH__on_selected_cb = (function __BEH__on_selected_cb(obj,client){var cb = cljs.core.deref.call(null,obj).call(null,new cljs.core.Keyword(null,"cb","cb",1013907409));return cb.call(null,client);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","on-selected-cb","lt.objs.eval/on-selected-cb",1941170511),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__on_selected_cb,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selected","selected",2205476365),null], null), null));
lt.objs.eval.__BEH__on_selected_destroy = (function __BEH__on_selected_destroy(obj,client){return lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"destroy","destroy",2571277164));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","on-selected-destroy","lt.objs.eval/on-selected-destroy",4250002546),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__on_selected_destroy,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selected","selected",2205476365),null], null), null));
lt.objs.eval.eval_queue = cljs.core.atom.call(null,cljs.core.PersistentVector.EMPTY);
lt.objs.eval.__BEH__queue_on_no_client = (function __BEH__queue_on_no_client(this$,queue_item){return cljs.core.swap_BANG_.call(null,lt.objs.eval.eval_queue,cljs.core.conj,queue_item);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","queue-on-no-client","lt.objs.eval/queue-on-no-client",3460059553),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__queue_on_no_client,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"no-client","no-client",4161042633),null], null), null));
lt.objs.eval.__BEH__alert_on_no_client = (function __BEH__alert_on_no_client(this$){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"No client available.",new cljs.core.Keyword(null,"body","body",1016933652),"We don't know what kind of client you want for this one. Try starting a client by choosing one of the connection types in the connect panel.",new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Connect a client",new cljs.core.Keyword(null,"action","action",3885920680),(function (){return lt.objs.sidebar.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"show-add-connection","show-add-connection",3671605196));
})], null)], null)], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","alert-on-no-client","lt.objs.eval/alert-on-no-client",3202745142),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__alert_on_no_client,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"no-client","no-client",4161042633),null], null), null));
lt.objs.eval.__BEH__queue_BANG_ = (function __BEH__queue_BANG_(this$,queue_item){return cljs.core.swap_BANG_.call(null,lt.objs.eval.eval_queue,cljs.core.conj,queue_item);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","queue!","lt.objs.eval/queue!",3205931164),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__queue_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"queue!","queue!",4360174754),null], null), null));
lt.objs.eval.drain = (function drain(queue){return cljs.core.vec.call(null,cljs.core.remove.call(null,(function (cur){var vec__8464 = cur;var _ = cljs.core.nth.call(null,vec__8464,0,null);var ___$1 = cljs.core.nth.call(null,vec__8464,1,null);var cb = cljs.core.nth.call(null,vec__8464,2,null);var vec__8465 = cljs.core.apply.call(null,lt.objs.clients.discover,cur);var result = cljs.core.nth.call(null,vec__8465,0,null);var client = cljs.core.nth.call(null,vec__8465,1,null);if(cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"found","found",1111526132),result))
{cb.call(null,client);
return true;
} else
{return null;
}
}),queue));
});
lt.objs.eval.__BEH__on_connect_check_queue = (function __BEH__on_connect_check_queue(this$){return cljs.core.swap_BANG_.call(null,lt.objs.eval.eval_queue,lt.objs.eval.drain);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","on-connect-check-queue","lt.objs.eval/on-connect-check-queue",2429838903),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__on_connect_check_queue,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"connect","connect",1965255772),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","evaler","lt.objs.eval/evaler",3546586565),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"evaler","evaler",4017420731),null], null), null),new cljs.core.Keyword(null,"init","init",1017141378),(function (){return null;
}));
lt.objs.eval.evaler = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.eval","evaler","lt.objs.eval/evaler",3546586565));
lt.object.add_behavior_BANG_.call(null,lt.objs.clients.clients,new cljs.core.Keyword("lt.objs.eval","on-connect-check-queue","lt.objs.eval/on-connect-check-queue",2429838903));
lt.objs.eval.try_read = (function try_read(r){try{return reader.read_string.call(null,r);
}catch (e8467){var e = e8467;return r;
}});
lt.objs.eval.find_client = (function find_client(p__8468){var map__8474 = p__8468;var map__8474__$1 = ((cljs.core.seq_QMARK_.call(null,map__8474))?cljs.core.apply.call(null,cljs.core.hash_map,map__8474):map__8474);var opts = map__8474__$1;var create = cljs.core.get.call(null,map__8474__$1,new cljs.core.Keyword(null,"create","create",3956577390));var key = cljs.core.get.call(null,map__8474__$1,new cljs.core.Keyword(null,"key","key",1014010321));var info = cljs.core.get.call(null,map__8474__$1,new cljs.core.Keyword(null,"info","info",1017141280));var command = cljs.core.get.call(null,map__8474__$1,new cljs.core.Keyword(null,"command","command",1964298941));var origin = cljs.core.get.call(null,map__8474__$1,new cljs.core.Keyword(null,"origin","origin",4300251800));var vec__8475 = lt.objs.clients.discover.call(null,command,info);var result = cljs.core.nth.call(null,vec__8475,0,null);var client = cljs.core.nth.call(null,vec__8475,1,null);var key__$1 = (function (){var or__3408__auto__ = key;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return new cljs.core.Keyword(null,"default","default",2558708147);
}
})();var pred__8476 = cljs.core._EQ_;var expr__8477 = result;if(cljs.core.truth_(pred__8476.call(null,new cljs.core.Keyword(null,"none","none",1017291434),expr__8477)))
{if(cljs.core.truth_(create))
{return create.call(null,opts);
} else
{lt.objs.notifos.done_working.call(null);
lt.object.raise.call(null,lt.objs.eval.evaler,new cljs.core.Keyword(null,"no-client","no-client",4161042633),opts);
return lt.objs.clients.placeholder.call(null);
}
} else
{if(cljs.core.truth_(pred__8476.call(null,new cljs.core.Keyword(null,"found","found",1111526132),expr__8477)))
{return client;
} else
{if(cljs.core.truth_(pred__8476.call(null,new cljs.core.Keyword(null,"select","select",4402849902),expr__8477)))
{lt.object.raise.call(null,lt.objs.eval.evaler,new cljs.core.Keyword(null,"select-client","select-client",4292921646),client,(function (client__$1){lt.objs.clients.swap_client_BANG_.call(null,key__$1.call(null,new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,origin))),client__$1);
return lt.object.update_BANG_.call(null,origin,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"client","client",3951159101)], null),cljs.core.assoc,key__$1,client__$1);
}));
return lt.objs.clients.placeholder.call(null);
} else
{throw (new Error([cljs.core.str("No matching clause: "),cljs.core.str(expr__8477)].join('')));
}
}
}
});
lt.objs.eval.get_client_BANG_ = (function get_client_BANG_(p__8479){var map__8481 = p__8479;var map__8481__$1 = ((cljs.core.seq_QMARK_.call(null,map__8481))?cljs.core.apply.call(null,cljs.core.hash_map,map__8481):map__8481);var opts = map__8481__$1;var create = cljs.core.get.call(null,map__8481__$1,new cljs.core.Keyword(null,"create","create",3956577390));var key = cljs.core.get.call(null,map__8481__$1,new cljs.core.Keyword(null,"key","key",1014010321));var command = cljs.core.get.call(null,map__8481__$1,new cljs.core.Keyword(null,"command","command",1964298941));var origin = cljs.core.get.call(null,map__8481__$1,new cljs.core.Keyword(null,"origin","origin",4300251800));var key__$1 = (function (){var or__3408__auto__ = key;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return new cljs.core.Keyword(null,"default","default",2558708147);
}
})();var cur = key__$1.call(null,new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,origin)));if(cljs.core.truth_((function (){var and__3396__auto__ = cur;if(cljs.core.truth_(and__3396__auto__))
{return lt.objs.clients.available_QMARK_.call(null,cur);
} else
{return and__3396__auto__;
}
})()))
{return cur;
} else
{var neue = lt.objs.eval.find_client.call(null,opts);lt.object.update_BANG_.call(null,origin,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"client","client",3951159101)], null),cljs.core.assoc,key__$1,neue);
lt.object.raise.call(null,origin,new cljs.core.Keyword(null,"set-client","set-client",2248164104),neue);
return neue;
}
});
lt.objs.eval.__GT_result_class = (function __GT_result_class(this$,trunc){return [cljs.core.str(new cljs.core.Keyword(null,"class","class",1108647146).cljs$core$IFn$_invoke$arity$1(this$)),cljs.core.str("-result result-mark"),cljs.core.str((cljs.core.truth_((function (){var or__3408__auto__ = new cljs.core.Keyword(null,"open","open",1017321916).cljs$core$IFn$_invoke$arity$1(this$);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.not.call(null,trunc);
}
})())?" open":null))].join('');
});
lt.objs.eval.truncate_result = (function() {
var truncate_result = null;
var truncate_result__1 = (function (r){return truncate_result.call(null,r,null);
});
var truncate_result__2 = (function (r,opts){if(typeof r === 'string')
{var nl = r.indexOf("\n");var len = (((nl > -1))?nl:new cljs.core.Keyword(null,"trunc-length","trunc-length",2555961753).cljs$core$IFn$_invoke$arity$2(opts,50));if((cljs.core.count.call(null,r) > len))
{return [cljs.core.str(cljs.core.subs.call(null,r,0,len)),cljs.core.str(" \u2026")].join('');
} else
{return r;
}
} else
{return null;
}
});
truncate_result = function(r,opts){
switch(arguments.length){
case 1:
return truncate_result__1.call(this,r);
case 2:
return truncate_result__2.call(this,r,opts);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
truncate_result.cljs$core$IFn$_invoke$arity$1 = truncate_result__1;
truncate_result.cljs$core$IFn$_invoke$arity$2 = truncate_result__2;
return truncate_result;
})()
;
lt.objs.eval.__GT_inline_res = (function __GT_inline_res(this$,info){var e__4335__auto__ = crate.core.html.call(null,(function (){var r = new cljs.core.Keyword(null,"result","result",4374444943).cljs$core$IFn$_invoke$arity$1(info);var truncated = lt.objs.eval.truncate_result.call(null,r,info);return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,((function (r,truncated){
return (function (p1__8482_SHARP_){return lt.objs.eval.__GT_result_class.call(null,p1__8482_SHARP_,truncated);
});})(r,truncated))
)], null),(cljs.core.truth_(truncated)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.truncated","span.truncated",906070412),truncated], null):null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.full","span.full",4619654693),r], null)], null);
})());var seq__8489_8495 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"mousewheel","mousewheel",2043515208),(function (e){return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (e){lt.util.dom.prevent.call(null,e);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"click","click",1108654330));
}),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.util.dom.prevent.call(null,e);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
}),new cljs.core.Keyword(null,"dblclick","dblclick",3463991820),(function (e){lt.util.dom.prevent.call(null,e);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"double-click","double-click",956590078));
})], null)));var chunk__8490_8496 = null;var count__8491_8497 = 0;var i__8492_8498 = 0;while(true){
if((i__8492_8498 < count__8491_8497))
{var vec__8493_8499 = cljs.core._nth.call(null,chunk__8490_8496,i__8492_8498);var ev__4336__auto___8500 = cljs.core.nth.call(null,vec__8493_8499,0,null);var func__4337__auto___8501 = cljs.core.nth.call(null,vec__8493_8499,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8500,func__4337__auto___8501);
{
var G__8502 = seq__8489_8495;
var G__8503 = chunk__8490_8496;
var G__8504 = count__8491_8497;
var G__8505 = (i__8492_8498 + 1);
seq__8489_8495 = G__8502;
chunk__8490_8496 = G__8503;
count__8491_8497 = G__8504;
i__8492_8498 = G__8505;
continue;
}
} else
{var temp__4092__auto___8506 = cljs.core.seq.call(null,seq__8489_8495);if(temp__4092__auto___8506)
{var seq__8489_8507__$1 = temp__4092__auto___8506;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8489_8507__$1))
{var c__4150__auto___8508 = cljs.core.chunk_first.call(null,seq__8489_8507__$1);{
var G__8509 = cljs.core.chunk_rest.call(null,seq__8489_8507__$1);
var G__8510 = c__4150__auto___8508;
var G__8511 = cljs.core.count.call(null,c__4150__auto___8508);
var G__8512 = 0;
seq__8489_8495 = G__8509;
chunk__8490_8496 = G__8510;
count__8491_8497 = G__8511;
i__8492_8498 = G__8512;
continue;
}
} else
{var vec__8494_8513 = cljs.core.first.call(null,seq__8489_8507__$1);var ev__4336__auto___8514 = cljs.core.nth.call(null,vec__8494_8513,0,null);var func__4337__auto___8515 = cljs.core.nth.call(null,vec__8494_8513,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8514,func__4337__auto___8515);
{
var G__8516 = cljs.core.next.call(null,seq__8489_8507__$1);
var G__8517 = null;
var G__8518 = 0;
var G__8519 = 0;
seq__8489_8495 = G__8516;
chunk__8490_8496 = G__8517;
count__8491_8497 = G__8518;
i__8492_8498 = G__8519;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.eval.__BEH__result_menu_PLUS_ = (function __BEH__result_menu_PLUS_(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Remove result",new cljs.core.Keyword(null,"order","order",1119910592),1,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Copy result",new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"copy","copy",1016963815));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","result-menu+","lt.objs.eval/result-menu+",3431235704),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__result_menu_PLUS_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu+","menu+",1117686302),null], null), null));
lt.objs.eval.__BEH__expand_on_click = (function __BEH__expand_on_click(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open","open",1017321916),true], null));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"changed","changed",1752847910));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","expand-on-click","lt.objs.eval/expand-on-click",541363545),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__expand_on_click,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"expand!","expand!",3999393849),null,new cljs.core.Keyword(null,"click","click",1108654330),null], null), null));
lt.objs.eval.__BEH__shrink_on_double_click = (function __BEH__shrink_on_double_click(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open","open",1017321916),false], null));
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"changed","changed",1752847910));
return lt.objs.editor.focus.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","shrink-on-double-click","lt.objs.eval/shrink-on-double-click",3353397618),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__shrink_on_double_click,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"double-click","double-click",956590078),null,new cljs.core.Keyword(null,"shrink!","shrink!",3083562666),null], null), null));
lt.objs.eval.__BEH__destroy_on_cleared = (function __BEH__destroy_on_cleared(this$){return lt.object.destroy_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","destroy-on-cleared","lt.objs.eval/destroy-on-cleared",4445067485),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__destroy_on_cleared,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"cleared","cleared",1870681886),null], null), null));
lt.objs.eval.__BEH__clear_mark = (function __BEH__clear_mark(this$){if(cljs.core.truth_(cljs.core.deref.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))))
{CodeMirror.off(new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),"change",new cljs.core.Keyword(null,"listener","listener",2360064038).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
CodeMirror.off(new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),"delete",new cljs.core.Keyword(null,"delete","delete",3973413149).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
new cljs.core.Keyword(null,"mark","mark",1017248319).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).clear();
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear","clear",1108650431));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"cleared","cleared",1870681886));
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","clear-mark","lt.objs.eval/clear-mark",1960624569),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__clear_mark,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null));
lt.objs.eval.__BEH__copy_result = (function __BEH__copy_result(this$){return lt.objs.platform.copy.call(null,new cljs.core.Keyword(null,"result","result",4374444943).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","copy-result","lt.objs.eval/copy-result",4462509297),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__copy_result,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"copy","copy",1016963815),null], null), null));
lt.objs.eval.__BEH__changed = (function __BEH__changed(this$){return new cljs.core.Keyword(null,"mark","mark",1017248319).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).changed();
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","changed","lt.objs.eval/changed",710785568),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__changed,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"changed","changed",1752847910),null], null), null));
lt.objs.eval.__BEH__update_BANG_ = (function __BEH__update_BANG_(this$,res){var content = lt.object.__GT_content.call(null,this$);var full = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".full",".full",1059540783),content);var scroll = lt.util.dom.scroll_top.call(null,full);var temp__4092__auto___8520 = lt.objs.eval.truncate_result.call(null,res);if(cljs.core.truth_(temp__4092__auto___8520))
{var t_8521 = temp__4092__auto___8520;var temp__4092__auto___8522__$1 = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".truncated",".truncated",2172167874),content);if(cljs.core.truth_(temp__4092__auto___8522__$1))
{var trunc_8523 = temp__4092__auto___8522__$1;lt.util.dom.html.call(null,trunc_8523,t_8521);
} else
{}
} else
{}
lt.util.dom.html.call(null,full,res);
return lt.util.dom.scroll_top.call(null,full,scroll);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","update!","lt.objs.eval/update!",2489665524),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__update_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"update!","update!",779473898),null], null), null));
lt.objs.eval.new_line_change = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, ["",""], null);
lt.objs.eval.__BEH__move_mark = (function __BEH__move_mark(this$,ch){if(cljs.core.truth_(ch))
{var orig = new cljs.core.Keyword(null,"mark","mark",1017248319).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var loc = orig.find();var cur_line = lt.objs.editor.lh__GT_line.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));if((cljs.core.not.call(null,loc)) || (cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).text)))
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
} else
{if((((loc.line > ch.to.line)) && (cljs.core.empty_QMARK_.call(null,clojure.string.trim.call(null,lt.objs.editor.line.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),loc.line))))) || ((((ch.to.ch >= loc.ch)) && (cljs.core._EQ_.call(null,ch.to.line,loc.line))) || ((ch.to.line > ch.from.line))))
{lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"mark","mark",1017248319),lt.objs.editor.bookmark.call(null,lt.objs.editor.__GT_cm_ed.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"line","line",1017226086),cur_line], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"widget","widget",4520824246),lt.object.__GT_content.call(null,this$),new cljs.core.Keyword(null,"insertLeft","insertLeft",1979827666),true], null))], null));
if(cljs.core.truth_(orig))
{return orig.clear();
} else
{return null;
}
} else
{return null;
}
}
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","move-mark","lt.objs.eval/move-mark",1501429445),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__move_mark,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"move!","move!",1117991394),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","inline-result","lt.objs.eval/inline-result",1807255869),new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"double-click","double-click",956590078),null,new cljs.core.Keyword(null,"click","click",1108654330),null,new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"inline.result","inline.result",1543983236),null,new cljs.core.Keyword(null,"inline","inline",4124874251),null], null), null),new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,info){var temp__4092__auto__ = lt.objs.editor.__GT_cm_ed.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(info));if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;var content = lt.objs.eval.__GT_inline_res.call(null,this$,info);var delete$ = ((function (content){
return (function (_){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
});})(content))
;var listener = ((function (content,delete$){
return (function (line,change){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"move!","move!",1117991394),change);
});})(content,delete$))
;CodeMirror.on(new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(info),"change",listener);
CodeMirror.on(new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(info),"delete",delete$);
lt.object.merge_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"listener","listener",2360064038),listener,new cljs.core.Keyword(null,"delete","delete",3973413149),delete$,new cljs.core.Keyword(null,"mark","mark",1017248319),lt.objs.editor.bookmark.call(null,ed,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"line","line",1017226086),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"widget","widget",4520824246),content,new cljs.core.Keyword(null,"insertLeft","insertLeft",1979827666),true], null))));
return content;
} else
{return null;
}
}));
lt.objs.eval.__BEH__inline_results = (function __BEH__inline_results(this$,res,loc,opts){var ed = new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var type = (function (){var or__3408__auto__ = new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(opts);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return new cljs.core.Keyword(null,"inline","inline",4124874251);
}
})();var line = lt.objs.editor.line_handle.call(null,ed,new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc));var res_obj = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.eval","inline-result","lt.objs.eval/inline-result",1807255869),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"ed","ed",1013907473),this$,new cljs.core.Keyword(null,"class","class",1108647146),cljs.core.name.call(null,type),new cljs.core.Keyword(null,"opts","opts",1017322386),opts,new cljs.core.Keyword(null,"result","result",4374444943),res,new cljs.core.Keyword(null,"loc","loc",1014011570),loc,new cljs.core.Keyword(null,"line","line",1017226086),line], null));var temp__4092__auto___8537 = cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,type], null));if(cljs.core.truth_(temp__4092__auto___8537))
{var prev_8538 = temp__4092__auto___8537;if(cljs.core.truth_(new cljs.core.Keyword(null,"open","open",1017321916).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,prev_8538))))
{lt.object.merge_BANG_.call(null,res_obj,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open","open",1017321916),true], null));
} else
{}
lt.object.raise.call(null,prev_8538,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
} else
{}
if(cljs.core.truth_(new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc)))
{var seq__8531_8539 = cljs.core.seq.call(null,cljs.core.map.call(null,(function (p1__8524_SHARP_){return cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.editor.line_handle.call(null,ed,p1__8524_SHARP_),type], null));
}),cljs.core.range.call(null,new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc))));var chunk__8533_8540 = null;var count__8534_8541 = 0;var i__8535_8542 = 0;while(true){
if((i__8535_8542 < count__8534_8541))
{var widget_8543 = cljs.core._nth.call(null,chunk__8533_8540,i__8535_8542);if(cljs.core.truth_(widget_8543))
{lt.object.raise.call(null,widget_8543,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8544 = seq__8531_8539;
var G__8545 = chunk__8533_8540;
var G__8546 = count__8534_8541;
var G__8547 = (i__8535_8542 + 1);
seq__8531_8539 = G__8544;
chunk__8533_8540 = G__8545;
count__8534_8541 = G__8546;
i__8535_8542 = G__8547;
continue;
}
} else
{{
var G__8548 = seq__8531_8539;
var G__8549 = chunk__8533_8540;
var G__8550 = count__8534_8541;
var G__8551 = (i__8535_8542 + 1);
seq__8531_8539 = G__8548;
chunk__8533_8540 = G__8549;
count__8534_8541 = G__8550;
i__8535_8542 = G__8551;
continue;
}
}
} else
{var temp__4092__auto___8552 = cljs.core.seq.call(null,seq__8531_8539);if(temp__4092__auto___8552)
{var seq__8531_8553__$1 = temp__4092__auto___8552;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8531_8553__$1))
{var c__4150__auto___8554 = cljs.core.chunk_first.call(null,seq__8531_8553__$1);{
var G__8555 = cljs.core.chunk_rest.call(null,seq__8531_8553__$1);
var G__8556 = c__4150__auto___8554;
var G__8557 = cljs.core.count.call(null,c__4150__auto___8554);
var G__8558 = 0;
seq__8531_8539 = G__8555;
chunk__8533_8540 = G__8556;
count__8534_8541 = G__8557;
i__8535_8542 = G__8558;
continue;
}
} else
{var widget_8559 = cljs.core.first.call(null,seq__8531_8553__$1);if(cljs.core.truth_(widget_8559))
{lt.object.raise.call(null,widget_8559,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8560 = cljs.core.next.call(null,seq__8531_8553__$1);
var G__8561 = null;
var G__8562 = 0;
var G__8563 = 0;
seq__8531_8539 = G__8560;
chunk__8533_8540 = G__8561;
count__8534_8541 = G__8562;
i__8535_8542 = G__8563;
continue;
}
} else
{{
var G__8564 = cljs.core.next.call(null,seq__8531_8553__$1);
var G__8565 = null;
var G__8566 = 0;
var G__8567 = 0;
seq__8531_8539 = G__8564;
chunk__8533_8540 = G__8565;
count__8534_8541 = G__8566;
i__8535_8542 = G__8567;
continue;
}
}
}
} else
{}
}
break;
}
} else
{}
return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"widgets","widgets",2354242081)], null),cljs.core.assoc,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,type], null),res_obj);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","inline-results","lt.objs.eval/inline-results",3940069422),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__inline_results,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.result","editor.result",4030217008),null], null), null));
lt.objs.eval.__GT_spacing = (function __GT_spacing(text){if(cljs.core.truth_(text))
{return cljs.core.first.call(null,cljs.core.re_seq.call(null,/^\s+/,text));
} else
{return null;
}
});
lt.objs.eval.__GT_underline_result = (function __GT_underline_result(this$,info){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),[cljs.core.str("underline-result "),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"class","class",1108647146).cljs$core$IFn$_invoke$arity$1(info))?new cljs.core.Keyword(null,"class","class",1108647146).cljs$core$IFn$_invoke$arity$1(info):null))].join('')], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.spacer","span.spacer",4763675330),lt.objs.eval.__GT_spacing.call(null,lt.objs.editor.line.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(info),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"pre","pre",1014015509),new cljs.core.Keyword(null,"result","result",4374444943).cljs$core$IFn$_invoke$arity$1(info)], null)], null));var seq__8574_8580 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (e){lt.util.dom.prevent.call(null,e);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"click","click",1108654330));
}),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.util.dom.prevent.call(null,e);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
}),new cljs.core.Keyword(null,"dblclick","dblclick",3463991820),(function (e){lt.util.dom.prevent.call(null,e);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"double-click","double-click",956590078));
})], null)));var chunk__8575_8581 = null;var count__8576_8582 = 0;var i__8577_8583 = 0;while(true){
if((i__8577_8583 < count__8576_8582))
{var vec__8578_8584 = cljs.core._nth.call(null,chunk__8575_8581,i__8577_8583);var ev__4336__auto___8585 = cljs.core.nth.call(null,vec__8578_8584,0,null);var func__4337__auto___8586 = cljs.core.nth.call(null,vec__8578_8584,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8585,func__4337__auto___8586);
{
var G__8587 = seq__8574_8580;
var G__8588 = chunk__8575_8581;
var G__8589 = count__8576_8582;
var G__8590 = (i__8577_8583 + 1);
seq__8574_8580 = G__8587;
chunk__8575_8581 = G__8588;
count__8576_8582 = G__8589;
i__8577_8583 = G__8590;
continue;
}
} else
{var temp__4092__auto___8591 = cljs.core.seq.call(null,seq__8574_8580);if(temp__4092__auto___8591)
{var seq__8574_8592__$1 = temp__4092__auto___8591;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8574_8592__$1))
{var c__4150__auto___8593 = cljs.core.chunk_first.call(null,seq__8574_8592__$1);{
var G__8594 = cljs.core.chunk_rest.call(null,seq__8574_8592__$1);
var G__8595 = c__4150__auto___8593;
var G__8596 = cljs.core.count.call(null,c__4150__auto___8593);
var G__8597 = 0;
seq__8574_8580 = G__8594;
chunk__8575_8581 = G__8595;
count__8576_8582 = G__8596;
i__8577_8583 = G__8597;
continue;
}
} else
{var vec__8579_8598 = cljs.core.first.call(null,seq__8574_8592__$1);var ev__4336__auto___8599 = cljs.core.nth.call(null,vec__8579_8598,0,null);var func__4337__auto___8600 = cljs.core.nth.call(null,vec__8579_8598,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8599,func__4337__auto___8600);
{
var G__8601 = cljs.core.next.call(null,seq__8574_8592__$1);
var G__8602 = null;
var G__8603 = 0;
var G__8604 = 0;
seq__8574_8580 = G__8601;
chunk__8575_8581 = G__8602;
count__8576_8582 = G__8603;
i__8577_8583 = G__8604;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","underline-result","lt.objs.eval/underline-result",1485297066),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"inline.underline-result","inline.underline-result",1936787557),null,new cljs.core.Keyword(null,"inline","inline",4124874251),null], null), null),new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,info){var content = lt.objs.eval.__GT_underline_result.call(null,this$,info);var delete$ = ((function (content){
return (function (_){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
});})(content))
;var listener = ((function (content,delete$){
return (function (line,change){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"move!","move!",1117991394),change);
});})(content,delete$))
;CodeMirror.on(new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(info),"change",listener);
CodeMirror.on(new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(info),"delete",delete$);
lt.object.merge_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"widget","widget",4520824246),lt.objs.editor.line_widget.call(null,lt.objs.editor.__GT_cm_ed.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(info)),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info)),content,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"coverGutter","coverGutter",510635812),false,new cljs.core.Keyword(null,"above","above",1106515727),new cljs.core.Keyword(null,"above","above",1106515727).cljs$core$IFn$_invoke$arity$1(info)], null))));
return content;
}));
lt.objs.eval.__BEH__underline_results = (function __BEH__underline_results(this$,res,loc,opts){var ed = new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var line = lt.objs.editor.line_handle.call(null,ed,new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc));var res_obj = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.eval","underline-result","lt.objs.eval/underline-result",1485297066),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"ed","ed",1013907473),this$,new cljs.core.Keyword(null,"opts","opts",1017322386),opts,new cljs.core.Keyword(null,"result","result",4374444943),res,new cljs.core.Keyword(null,"loc","loc",1014011570),loc,new cljs.core.Keyword(null,"line","line",1017226086),line], null));var temp__4092__auto___8618 = cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,new cljs.core.Keyword(null,"underline","underline",4281907774)], null));if(cljs.core.truth_(temp__4092__auto___8618))
{var prev_8619 = temp__4092__auto___8618;if(cljs.core.truth_(new cljs.core.Keyword(null,"open","open",1017321916).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,prev_8619))))
{lt.object.merge_BANG_.call(null,res_obj,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open","open",1017321916),true], null));
} else
{}
lt.object.raise.call(null,prev_8619,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
} else
{}
if(cljs.core.truth_(new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc)))
{var seq__8612_8620 = cljs.core.seq.call(null,cljs.core.map.call(null,(function (p1__8605_SHARP_){return cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.editor.line_handle.call(null,ed,p1__8605_SHARP_),new cljs.core.Keyword(null,"underline","underline",4281907774)], null));
}),cljs.core.range.call(null,new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc))));var chunk__8614_8621 = null;var count__8615_8622 = 0;var i__8616_8623 = 0;while(true){
if((i__8616_8623 < count__8615_8622))
{var widget_8624 = cljs.core._nth.call(null,chunk__8614_8621,i__8616_8623);if(cljs.core.truth_(widget_8624))
{lt.object.raise.call(null,widget_8624,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8625 = seq__8612_8620;
var G__8626 = chunk__8614_8621;
var G__8627 = count__8615_8622;
var G__8628 = (i__8616_8623 + 1);
seq__8612_8620 = G__8625;
chunk__8614_8621 = G__8626;
count__8615_8622 = G__8627;
i__8616_8623 = G__8628;
continue;
}
} else
{{
var G__8629 = seq__8612_8620;
var G__8630 = chunk__8614_8621;
var G__8631 = count__8615_8622;
var G__8632 = (i__8616_8623 + 1);
seq__8612_8620 = G__8629;
chunk__8614_8621 = G__8630;
count__8615_8622 = G__8631;
i__8616_8623 = G__8632;
continue;
}
}
} else
{var temp__4092__auto___8633 = cljs.core.seq.call(null,seq__8612_8620);if(temp__4092__auto___8633)
{var seq__8612_8634__$1 = temp__4092__auto___8633;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8612_8634__$1))
{var c__4150__auto___8635 = cljs.core.chunk_first.call(null,seq__8612_8634__$1);{
var G__8636 = cljs.core.chunk_rest.call(null,seq__8612_8634__$1);
var G__8637 = c__4150__auto___8635;
var G__8638 = cljs.core.count.call(null,c__4150__auto___8635);
var G__8639 = 0;
seq__8612_8620 = G__8636;
chunk__8614_8621 = G__8637;
count__8615_8622 = G__8638;
i__8616_8623 = G__8639;
continue;
}
} else
{var widget_8640 = cljs.core.first.call(null,seq__8612_8634__$1);if(cljs.core.truth_(widget_8640))
{lt.object.raise.call(null,widget_8640,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8641 = cljs.core.next.call(null,seq__8612_8634__$1);
var G__8642 = null;
var G__8643 = 0;
var G__8644 = 0;
seq__8612_8620 = G__8641;
chunk__8614_8621 = G__8642;
count__8615_8622 = G__8643;
i__8616_8623 = G__8644;
continue;
}
} else
{{
var G__8645 = cljs.core.next.call(null,seq__8612_8634__$1);
var G__8646 = null;
var G__8647 = 0;
var G__8648 = 0;
seq__8612_8620 = G__8645;
chunk__8614_8621 = G__8646;
count__8615_8622 = G__8647;
i__8616_8623 = G__8648;
continue;
}
}
}
} else
{}
}
break;
}
} else
{}
return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"widgets","widgets",2354242081)], null),cljs.core.assoc,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,new cljs.core.Keyword(null,"underline","underline",4281907774)], null),res_obj);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","underline-results","lt.objs.eval/underline-results",4366201201),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__underline_results,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.result.underline","editor.result.underline",541343758),null], null), null));
lt.objs.eval.__GT_exception_class = (function __GT_exception_class(this$){return [cljs.core.str("inline-exception "),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"open","open",1017321916).cljs$core$IFn$_invoke$arity$1(this$))?"open":null))].join('');
});
lt.objs.eval.__GT_inline_exception = (function __GT_inline_exception(this$,info){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,lt.objs.eval.__GT_exception_class)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.spacer","span.spacer",4763675330),lt.objs.eval.__GT_spacing.call(null,lt.objs.editor.line.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(info),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"pre","pre",1014015509),[cljs.core.str(new cljs.core.Keyword(null,"ex","ex",1013907493).cljs$core$IFn$_invoke$arity$1(info))].join('')], null)], null));var seq__8655_8661 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"click","click",1108654330));
}),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
}),new cljs.core.Keyword(null,"dblclick","dblclick",3463991820),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"double-click","double-click",956590078));
})], null)));var chunk__8656_8662 = null;var count__8657_8663 = 0;var i__8658_8664 = 0;while(true){
if((i__8658_8664 < count__8657_8663))
{var vec__8659_8665 = cljs.core._nth.call(null,chunk__8656_8662,i__8658_8664);var ev__4336__auto___8666 = cljs.core.nth.call(null,vec__8659_8665,0,null);var func__4337__auto___8667 = cljs.core.nth.call(null,vec__8659_8665,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8666,func__4337__auto___8667);
{
var G__8668 = seq__8655_8661;
var G__8669 = chunk__8656_8662;
var G__8670 = count__8657_8663;
var G__8671 = (i__8658_8664 + 1);
seq__8655_8661 = G__8668;
chunk__8656_8662 = G__8669;
count__8657_8663 = G__8670;
i__8658_8664 = G__8671;
continue;
}
} else
{var temp__4092__auto___8672 = cljs.core.seq.call(null,seq__8655_8661);if(temp__4092__auto___8672)
{var seq__8655_8673__$1 = temp__4092__auto___8672;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8655_8673__$1))
{var c__4150__auto___8674 = cljs.core.chunk_first.call(null,seq__8655_8673__$1);{
var G__8675 = cljs.core.chunk_rest.call(null,seq__8655_8673__$1);
var G__8676 = c__4150__auto___8674;
var G__8677 = cljs.core.count.call(null,c__4150__auto___8674);
var G__8678 = 0;
seq__8655_8661 = G__8675;
chunk__8656_8662 = G__8676;
count__8657_8663 = G__8677;
i__8658_8664 = G__8678;
continue;
}
} else
{var vec__8660_8679 = cljs.core.first.call(null,seq__8655_8673__$1);var ev__4336__auto___8680 = cljs.core.nth.call(null,vec__8660_8679,0,null);var func__4337__auto___8681 = cljs.core.nth.call(null,vec__8660_8679,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___8680,func__4337__auto___8681);
{
var G__8682 = cljs.core.next.call(null,seq__8655_8673__$1);
var G__8683 = null;
var G__8684 = 0;
var G__8685 = 0;
seq__8655_8661 = G__8682;
chunk__8656_8662 = G__8683;
count__8657_8663 = G__8684;
i__8658_8664 = G__8685;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.eval.__BEH__ex_shrink_on_double_click = (function __BEH__ex_shrink_on_double_click(this$){lt.objs.editor.focus.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","ex-shrink-on-double-click","lt.objs.eval/ex-shrink-on-double-click",626922428),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__ex_shrink_on_double_click,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"double-click","double-click",956590078),null,new cljs.core.Keyword(null,"shrink!","shrink!",3083562666),null], null), null));
lt.objs.eval.__BEH__ex_clear = (function __BEH__ex_clear(this$){if(cljs.core.truth_(lt.objs.editor.__GT_cm_ed.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))))
{lt.objs.editor.remove_line_widget.call(null,lt.objs.editor.__GT_cm_ed.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),new cljs.core.Keyword(null,"widget","widget",4520824246).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
} else
{}
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear","clear",1108650431));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"cleared","cleared",1870681886));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","ex-clear","lt.objs.eval/ex-clear",1010359327),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__ex_clear,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null));
lt.objs.eval.__BEH__ex_menu_PLUS_ = (function __BEH__ex_menu_PLUS_(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Remove exception",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Copy exception",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"copy","copy",1016963815));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","ex-menu+","lt.objs.eval/ex-menu+",1003388030),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__ex_menu_PLUS_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu+","menu+",1117686302),null], null), null));
lt.objs.eval.__BEH__copy_exception = (function __BEH__copy_exception(this$){return lt.objs.platform.copy.call(null,new cljs.core.Keyword(null,"ex","ex",1013907493).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","copy-exception","lt.objs.eval/copy-exception",3421301619),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__copy_exception,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"copy","copy",1016963815),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","inline-exception","lt.objs.eval/inline-exception",2990080407),new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"double-click","double-click",956590078),null,new cljs.core.Keyword(null,"click","click",1108654330),null,new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"inline.exception","inline.exception",3303739052),null,new cljs.core.Keyword(null,"inline","inline",4124874251),null], null), null),new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,info){if(cljs.core.not.call(null,new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))))
{return lt.objs.notifos.set_msg_BANG_.call(null,[cljs.core.str(new cljs.core.Keyword(null,"ex","ex",1013907493).cljs$core$IFn$_invoke$arity$1(info))].join(''),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),"error"], null));
} else
{var content = lt.objs.eval.__GT_inline_exception.call(null,this$,info);lt.object.merge_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"widget","widget",4520824246),lt.objs.editor.line_widget.call(null,lt.objs.editor.__GT_cm_ed.call(null,new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(info)),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info)),content,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"coverGutter","coverGutter",510635812),false], null))));
return content;
}
}));
lt.objs.eval.__BEH__inline_exceptions = (function __BEH__inline_exceptions(this$,ex,loc){if(cljs.core.truth_((function (){var and__3396__auto__ = ex;if(cljs.core.truth_(and__3396__auto__))
{var and__3396__auto____$1 = loc;if(cljs.core.truth_(and__3396__auto____$1))
{return (new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc) >= 0);
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{var ed = new cljs.core.Keyword(null,"ed","ed",1013907473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var line = lt.objs.editor.line_handle.call(null,ed,new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc));var ex_obj = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.eval","inline-exception","lt.objs.eval/inline-exception",2990080407),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"ed","ed",1013907473),this$,new cljs.core.Keyword(null,"ex","ex",1013907493),ex,new cljs.core.Keyword(null,"loc","loc",1014011570),loc,new cljs.core.Keyword(null,"line","line",1017226086),line], null));var seq__8709_8731 = cljs.core.seq.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,new cljs.core.Keyword(null,"inline","inline",4124874251)], null)),cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,new cljs.core.Keyword(null,"underline","underline",4281907774)], null))], null));var chunk__8711_8732 = null;var count__8712_8733 = 0;var i__8713_8734 = 0;while(true){
if((i__8713_8734 < count__8712_8733))
{var prev_8735 = cljs.core._nth.call(null,chunk__8711_8732,i__8713_8734);if(cljs.core.truth_(prev_8735))
{if(cljs.core.truth_(new cljs.core.Keyword(null,"open","open",1017321916).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,prev_8735))))
{lt.object.merge_BANG_.call(null,ex_obj,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open","open",1017321916),true], null));
} else
{}
lt.object.raise.call(null,prev_8735,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8736 = seq__8709_8731;
var G__8737 = chunk__8711_8732;
var G__8738 = count__8712_8733;
var G__8739 = (i__8713_8734 + 1);
seq__8709_8731 = G__8736;
chunk__8711_8732 = G__8737;
count__8712_8733 = G__8738;
i__8713_8734 = G__8739;
continue;
}
} else
{{
var G__8740 = seq__8709_8731;
var G__8741 = chunk__8711_8732;
var G__8742 = count__8712_8733;
var G__8743 = (i__8713_8734 + 1);
seq__8709_8731 = G__8740;
chunk__8711_8732 = G__8741;
count__8712_8733 = G__8742;
i__8713_8734 = G__8743;
continue;
}
}
} else
{var temp__4092__auto___8744 = cljs.core.seq.call(null,seq__8709_8731);if(temp__4092__auto___8744)
{var seq__8709_8745__$1 = temp__4092__auto___8744;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8709_8745__$1))
{var c__4150__auto___8746 = cljs.core.chunk_first.call(null,seq__8709_8745__$1);{
var G__8747 = cljs.core.chunk_rest.call(null,seq__8709_8745__$1);
var G__8748 = c__4150__auto___8746;
var G__8749 = cljs.core.count.call(null,c__4150__auto___8746);
var G__8750 = 0;
seq__8709_8731 = G__8747;
chunk__8711_8732 = G__8748;
count__8712_8733 = G__8749;
i__8713_8734 = G__8750;
continue;
}
} else
{var prev_8751 = cljs.core.first.call(null,seq__8709_8745__$1);if(cljs.core.truth_(prev_8751))
{if(cljs.core.truth_(new cljs.core.Keyword(null,"open","open",1017321916).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,prev_8751))))
{lt.object.merge_BANG_.call(null,ex_obj,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open","open",1017321916),true], null));
} else
{}
lt.object.raise.call(null,prev_8751,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8752 = cljs.core.next.call(null,seq__8709_8745__$1);
var G__8753 = null;
var G__8754 = 0;
var G__8755 = 0;
seq__8709_8731 = G__8752;
chunk__8711_8732 = G__8753;
count__8712_8733 = G__8754;
i__8713_8734 = G__8755;
continue;
}
} else
{{
var G__8756 = cljs.core.next.call(null,seq__8709_8745__$1);
var G__8757 = null;
var G__8758 = 0;
var G__8759 = 0;
seq__8709_8731 = G__8756;
chunk__8711_8732 = G__8757;
count__8712_8733 = G__8758;
i__8713_8734 = G__8759;
continue;
}
}
}
} else
{}
}
break;
}
if(cljs.core.truth_(new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc)))
{var seq__8715_8760 = cljs.core.seq.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"inline","inline",4124874251),new cljs.core.Keyword(null,"underline","underline",4281907774)], null));var chunk__8722_8761 = null;var count__8723_8762 = 0;var i__8724_8763 = 0;while(true){
if((i__8724_8763 < count__8723_8762))
{var type_8764 = cljs.core._nth.call(null,chunk__8722_8761,i__8724_8763);var seq__8725_8765 = cljs.core.seq.call(null,cljs.core.map.call(null,((function (seq__8715_8760,chunk__8722_8761,count__8723_8762,i__8724_8763,type_8764){
return (function (p1__8686_SHARP_){return cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.editor.line_handle.call(null,ed,p1__8686_SHARP_),type_8764], null));
});})(seq__8715_8760,chunk__8722_8761,count__8723_8762,i__8724_8763,type_8764))
,cljs.core.range.call(null,new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc))));var chunk__8727_8766 = null;var count__8728_8767 = 0;var i__8729_8768 = 0;while(true){
if((i__8729_8768 < count__8728_8767))
{var widget_8769 = cljs.core._nth.call(null,chunk__8727_8766,i__8729_8768);if(cljs.core.truth_(widget_8769))
{lt.object.raise.call(null,widget_8769,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8770 = seq__8725_8765;
var G__8771 = chunk__8727_8766;
var G__8772 = count__8728_8767;
var G__8773 = (i__8729_8768 + 1);
seq__8725_8765 = G__8770;
chunk__8727_8766 = G__8771;
count__8728_8767 = G__8772;
i__8729_8768 = G__8773;
continue;
}
} else
{{
var G__8774 = seq__8725_8765;
var G__8775 = chunk__8727_8766;
var G__8776 = count__8728_8767;
var G__8777 = (i__8729_8768 + 1);
seq__8725_8765 = G__8774;
chunk__8727_8766 = G__8775;
count__8728_8767 = G__8776;
i__8729_8768 = G__8777;
continue;
}
}
} else
{var temp__4092__auto___8778 = cljs.core.seq.call(null,seq__8725_8765);if(temp__4092__auto___8778)
{var seq__8725_8779__$1 = temp__4092__auto___8778;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8725_8779__$1))
{var c__4150__auto___8780 = cljs.core.chunk_first.call(null,seq__8725_8779__$1);{
var G__8781 = cljs.core.chunk_rest.call(null,seq__8725_8779__$1);
var G__8782 = c__4150__auto___8780;
var G__8783 = cljs.core.count.call(null,c__4150__auto___8780);
var G__8784 = 0;
seq__8725_8765 = G__8781;
chunk__8727_8766 = G__8782;
count__8728_8767 = G__8783;
i__8729_8768 = G__8784;
continue;
}
} else
{var widget_8785 = cljs.core.first.call(null,seq__8725_8779__$1);if(cljs.core.truth_(widget_8785))
{lt.object.raise.call(null,widget_8785,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8786 = cljs.core.next.call(null,seq__8725_8779__$1);
var G__8787 = null;
var G__8788 = 0;
var G__8789 = 0;
seq__8725_8765 = G__8786;
chunk__8727_8766 = G__8787;
count__8728_8767 = G__8788;
i__8729_8768 = G__8789;
continue;
}
} else
{{
var G__8790 = cljs.core.next.call(null,seq__8725_8779__$1);
var G__8791 = null;
var G__8792 = 0;
var G__8793 = 0;
seq__8725_8765 = G__8790;
chunk__8727_8766 = G__8791;
count__8728_8767 = G__8792;
i__8729_8768 = G__8793;
continue;
}
}
}
} else
{}
}
break;
}
{
var G__8794 = seq__8715_8760;
var G__8795 = chunk__8722_8761;
var G__8796 = count__8723_8762;
var G__8797 = (i__8724_8763 + 1);
seq__8715_8760 = G__8794;
chunk__8722_8761 = G__8795;
count__8723_8762 = G__8796;
i__8724_8763 = G__8797;
continue;
}
} else
{var temp__4092__auto___8798 = cljs.core.seq.call(null,seq__8715_8760);if(temp__4092__auto___8798)
{var seq__8715_8799__$1 = temp__4092__auto___8798;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8715_8799__$1))
{var c__4150__auto___8800 = cljs.core.chunk_first.call(null,seq__8715_8799__$1);{
var G__8801 = cljs.core.chunk_rest.call(null,seq__8715_8799__$1);
var G__8802 = c__4150__auto___8800;
var G__8803 = cljs.core.count.call(null,c__4150__auto___8800);
var G__8804 = 0;
seq__8715_8760 = G__8801;
chunk__8722_8761 = G__8802;
count__8723_8762 = G__8803;
i__8724_8763 = G__8804;
continue;
}
} else
{var type_8805 = cljs.core.first.call(null,seq__8715_8799__$1);var seq__8716_8806 = cljs.core.seq.call(null,cljs.core.map.call(null,((function (seq__8715_8760,chunk__8722_8761,count__8723_8762,i__8724_8763,type_8805,seq__8715_8799__$1,temp__4092__auto___8798){
return (function (p1__8686_SHARP_){return cljs.core.get.call(null,cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.editor.line_handle.call(null,ed,p1__8686_SHARP_),type_8805], null));
});})(seq__8715_8760,chunk__8722_8761,count__8723_8762,i__8724_8763,type_8805,seq__8715_8799__$1,temp__4092__auto___8798))
,cljs.core.range.call(null,new cljs.core.Keyword(null,"start-line","start-line",3689311729).cljs$core$IFn$_invoke$arity$1(loc),new cljs.core.Keyword(null,"line","line",1017226086).cljs$core$IFn$_invoke$arity$1(loc))));var chunk__8718_8807 = null;var count__8719_8808 = 0;var i__8720_8809 = 0;while(true){
if((i__8720_8809 < count__8719_8808))
{var widget_8810 = cljs.core._nth.call(null,chunk__8718_8807,i__8720_8809);if(cljs.core.truth_(widget_8810))
{lt.object.raise.call(null,widget_8810,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8811 = seq__8716_8806;
var G__8812 = chunk__8718_8807;
var G__8813 = count__8719_8808;
var G__8814 = (i__8720_8809 + 1);
seq__8716_8806 = G__8811;
chunk__8718_8807 = G__8812;
count__8719_8808 = G__8813;
i__8720_8809 = G__8814;
continue;
}
} else
{{
var G__8815 = seq__8716_8806;
var G__8816 = chunk__8718_8807;
var G__8817 = count__8719_8808;
var G__8818 = (i__8720_8809 + 1);
seq__8716_8806 = G__8815;
chunk__8718_8807 = G__8816;
count__8719_8808 = G__8817;
i__8720_8809 = G__8818;
continue;
}
}
} else
{var temp__4092__auto___8819__$1 = cljs.core.seq.call(null,seq__8716_8806);if(temp__4092__auto___8819__$1)
{var seq__8716_8820__$1 = temp__4092__auto___8819__$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8716_8820__$1))
{var c__4150__auto___8821 = cljs.core.chunk_first.call(null,seq__8716_8820__$1);{
var G__8822 = cljs.core.chunk_rest.call(null,seq__8716_8820__$1);
var G__8823 = c__4150__auto___8821;
var G__8824 = cljs.core.count.call(null,c__4150__auto___8821);
var G__8825 = 0;
seq__8716_8806 = G__8822;
chunk__8718_8807 = G__8823;
count__8719_8808 = G__8824;
i__8720_8809 = G__8825;
continue;
}
} else
{var widget_8826 = cljs.core.first.call(null,seq__8716_8820__$1);if(cljs.core.truth_(widget_8826))
{lt.object.raise.call(null,widget_8826,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8827 = cljs.core.next.call(null,seq__8716_8820__$1);
var G__8828 = null;
var G__8829 = 0;
var G__8830 = 0;
seq__8716_8806 = G__8827;
chunk__8718_8807 = G__8828;
count__8719_8808 = G__8829;
i__8720_8809 = G__8830;
continue;
}
} else
{{
var G__8831 = cljs.core.next.call(null,seq__8716_8820__$1);
var G__8832 = null;
var G__8833 = 0;
var G__8834 = 0;
seq__8716_8806 = G__8831;
chunk__8718_8807 = G__8832;
count__8719_8808 = G__8833;
i__8720_8809 = G__8834;
continue;
}
}
}
} else
{}
}
break;
}
{
var G__8835 = cljs.core.next.call(null,seq__8715_8799__$1);
var G__8836 = null;
var G__8837 = 0;
var G__8838 = 0;
seq__8715_8760 = G__8835;
chunk__8722_8761 = G__8836;
count__8723_8762 = G__8837;
i__8724_8763 = G__8838;
continue;
}
}
} else
{}
}
break;
}
} else
{}
return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"widgets","widgets",2354242081)], null),cljs.core.assoc,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [line,new cljs.core.Keyword(null,"inline","inline",4124874251)], null),ex_obj);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","inline-exceptions","lt.objs.eval/inline-exceptions",2489921844),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__inline_exceptions,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.exception","editor.exception",3983021184),null], null), null));
lt.objs.eval.__BEH__eval_on_change = (function __BEH__eval_on_change(this$){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"eval","eval",1017029646));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.eval","eval-on-change","lt.objs.eval/eval-on-change",2788474585),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.eval.__BEH__eval_on_change,new cljs.core.Keyword(null,"desc","desc",1016984067),"Editor: Eval when the editor changes",new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"change","change",3947235106),null], null), null),new cljs.core.Keyword(null,"type","type",1017479852),new cljs.core.Keyword(null,"user","user",1017503549),new cljs.core.Keyword(null,"debounce","debounce",1556599227),300);
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"clear-inline-results","clear-inline-results",1542062004),new cljs.core.Keyword(null,"desc","desc",1016984067),"Eval: Clear inline results",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;var seq__8839 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"widgets","widgets",2354242081).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed)));var chunk__8840 = null;var count__8841 = 0;var i__8842 = 0;while(true){
if((i__8842 < count__8841))
{var vec__8843 = cljs.core._nth.call(null,chunk__8840,i__8842);var _ = cljs.core.nth.call(null,vec__8843,0,null);var w = cljs.core.nth.call(null,vec__8843,1,null);lt.object.raise.call(null,w,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8845 = seq__8839;
var G__8846 = chunk__8840;
var G__8847 = count__8841;
var G__8848 = (i__8842 + 1);
seq__8839 = G__8845;
chunk__8840 = G__8846;
count__8841 = G__8847;
i__8842 = G__8848;
continue;
}
} else
{var temp__4092__auto____$1 = cljs.core.seq.call(null,seq__8839);if(temp__4092__auto____$1)
{var seq__8839__$1 = temp__4092__auto____$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8839__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__8839__$1);{
var G__8849 = cljs.core.chunk_rest.call(null,seq__8839__$1);
var G__8850 = c__4150__auto__;
var G__8851 = cljs.core.count.call(null,c__4150__auto__);
var G__8852 = 0;
seq__8839 = G__8849;
chunk__8840 = G__8850;
count__8841 = G__8851;
i__8842 = G__8852;
continue;
}
} else
{var vec__8844 = cljs.core.first.call(null,seq__8839__$1);var _ = cljs.core.nth.call(null,vec__8844,0,null);var w = cljs.core.nth.call(null,vec__8844,1,null);lt.object.raise.call(null,w,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
{
var G__8853 = cljs.core.next.call(null,seq__8839__$1);
var G__8854 = null;
var G__8855 = 0;
var G__8856 = 0;
seq__8839 = G__8853;
chunk__8840 = G__8854;
count__8841 = G__8855;
i__8842 = G__8856;
continue;
}
}
} else
{return null;
}
}
break;
}
} else
{return null;
}
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"eval-editor","eval-editor",2482317104),new cljs.core.Keyword(null,"desc","desc",1016984067),"Eval: Eval editor contents",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;return lt.object.raise.call(null,ed,new cljs.core.Keyword(null,"eval","eval",1017029646));
} else
{return null;
}
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"eval-editor-form","eval-editor-form",4138964197),new cljs.core.Keyword(null,"desc","desc",1016984067),"Eval: Eval a form in editor",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;return lt.object.raise.call(null,ed,new cljs.core.Keyword(null,"eval.one","eval.one",1173589382));
} else
{return null;
}
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"eval.custom","eval.custom",3328560245),new cljs.core.Keyword(null,"desc","desc",1016984067),"Eval: Eval custom expression in editor",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (exp,opts){var temp__4092__auto__ = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;return lt.object.raise.call(null,ed,new cljs.core.Keyword(null,"eval.custom","eval.custom",3328560245),exp,opts);
} else
{return null;
}
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"eval.cancel-all!","eval.cancel-all!",3689151283),new cljs.core.Keyword(null,"desc","desc",1016984067),"Eval: Cancel evaluation for the current client",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;if(cljs.core.truth_(new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed))))
{var seq__8857 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed)));var chunk__8858 = null;var count__8859 = 0;var i__8860 = 0;while(true){
if((i__8860 < count__8859))
{var vec__8861 = cljs.core._nth.call(null,chunk__8858,i__8860);var _ = cljs.core.nth.call(null,vec__8861,0,null);var client = cljs.core.nth.call(null,vec__8861,1,null);lt.objs.clients.cancel_all_BANG_.call(null,client);
{
var G__8863 = seq__8857;
var G__8864 = chunk__8858;
var G__8865 = count__8859;
var G__8866 = (i__8860 + 1);
seq__8857 = G__8863;
chunk__8858 = G__8864;
count__8859 = G__8865;
i__8860 = G__8866;
continue;
}
} else
{var temp__4092__auto____$1 = cljs.core.seq.call(null,seq__8857);if(temp__4092__auto____$1)
{var seq__8857__$1 = temp__4092__auto____$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8857__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__8857__$1);{
var G__8867 = cljs.core.chunk_rest.call(null,seq__8857__$1);
var G__8868 = c__4150__auto__;
var G__8869 = cljs.core.count.call(null,c__4150__auto__);
var G__8870 = 0;
seq__8857 = G__8867;
chunk__8858 = G__8868;
count__8859 = G__8869;
i__8860 = G__8870;
continue;
}
} else
{var vec__8862 = cljs.core.first.call(null,seq__8857__$1);var _ = cljs.core.nth.call(null,vec__8862,0,null);var client = cljs.core.nth.call(null,vec__8862,1,null);lt.objs.clients.cancel_all_BANG_.call(null,client);
{
var G__8871 = cljs.core.next.call(null,seq__8857__$1);
var G__8872 = null;
var G__8873 = 0;
var G__8874 = 0;
seq__8857 = G__8871;
chunk__8858 = G__8872;
count__8859 = G__8873;
i__8860 = G__8874;
continue;
}
}
} else
{return null;
}
}
break;
}
} else
{return null;
}
} else
{return null;
}
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"editor.disconnect-clients","editor.disconnect-clients",1348759402),new cljs.core.Keyword(null,"desc","desc",1016984067),"Editor: Disconnect clients attached to editor",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto__))
{var ed = temp__4092__auto__;var seq__8875 = cljs.core.seq.call(null,cljs.core.vals.call(null,new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed))));var chunk__8876 = null;var count__8877 = 0;var i__8878 = 0;while(true){
if((i__8878 < count__8877))
{var client = cljs.core._nth.call(null,chunk__8876,i__8878);lt.objs.clients.close_BANG_.call(null,client);
{
var G__8879 = seq__8875;
var G__8880 = chunk__8876;
var G__8881 = count__8877;
var G__8882 = (i__8878 + 1);
seq__8875 = G__8879;
chunk__8876 = G__8880;
count__8877 = G__8881;
i__8878 = G__8882;
continue;
}
} else
{var temp__4092__auto____$1 = cljs.core.seq.call(null,seq__8875);if(temp__4092__auto____$1)
{var seq__8875__$1 = temp__4092__auto____$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__8875__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__8875__$1);{
var G__8883 = cljs.core.chunk_rest.call(null,seq__8875__$1);
var G__8884 = c__4150__auto__;
var G__8885 = cljs.core.count.call(null,c__4150__auto__);
var G__8886 = 0;
seq__8875 = G__8883;
chunk__8876 = G__8884;
count__8877 = G__8885;
i__8878 = G__8886;
continue;
}
} else
{var client = cljs.core.first.call(null,seq__8875__$1);lt.objs.clients.close_BANG_.call(null,client);
{
var G__8887 = cljs.core.next.call(null,seq__8875__$1);
var G__8888 = null;
var G__8889 = 0;
var G__8890 = 0;
seq__8875 = G__8887;
chunk__8876 = G__8888;
count__8877 = G__8889;
i__8878 = G__8890;
continue;
}
}
} else
{return null;
}
}
break;
}
} else
{return null;
}
})], null));

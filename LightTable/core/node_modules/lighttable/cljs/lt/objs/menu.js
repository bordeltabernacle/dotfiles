// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.menu');
goog.require('cljs.core');
goog.require('lt.objs.app');
goog.require('lt.util.dom');
goog.require('lt.objs.platform');
goog.require('lt.util.dom');
goog.require('clojure.string');
goog.require('lt.objs.command');
goog.require('lt.objs.platform');
goog.require('lt.objs.app');
goog.require('clojure.string');
goog.require('lt.objs.keyboard');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.command');
goog.require('lt.objs.keyboard');
lt.objs.menu.gui = require("nw.gui");
lt.objs.menu.create_menu = (function() {
var create_menu = null;
var create_menu__0 = (function (){return create_menu.call(null,null);
});
var create_menu__1 = (function (type){var m = lt.objs.menu.gui.Menu;if(cljs.core.truth_(type))
{return (new m((function (){var obj10096 = {"type":type};return obj10096;
})()));
} else
{return (new m());
}
});
create_menu = function(type){
switch(arguments.length){
case 0:
return create_menu__0.call(this);
case 1:
return create_menu__1.call(this,type);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
create_menu.cljs$core$IFn$_invoke$arity$0 = create_menu__0;
create_menu.cljs$core$IFn$_invoke$arity$1 = create_menu__1;
return create_menu;
})()
;
lt.objs.menu.menu_instance = lt.objs.menu.create_menu.call(null);
lt.objs.menu.menu_item = (function menu_item(opts){var mi = lt.objs.menu.gui.MenuItem;var opts__$1 = ((cljs.core.not.call(null,new cljs.core.Keyword(null,"submenu","submenu",3441075985).cljs$core$IFn$_invoke$arity$1(opts)))?opts:cljs.core.assoc.call(null,opts,new cljs.core.Keyword(null,"submenu","submenu",3441075985),lt.objs.menu.submenu.call(null,new cljs.core.Keyword(null,"submenu","submenu",3441075985).cljs$core$IFn$_invoke$arity$1(opts))));var opts2 = (cljs.core.truth_(new cljs.core.Keyword(null,"click","click",1108654330).cljs$core$IFn$_invoke$arity$1(opts__$1))?cljs.core.assoc.call(null,opts__$1,new cljs.core.Keyword(null,"click","click",1108654330),((function (mi,opts__$1){
return (function (){try{var temp__4092__auto__ = new cljs.core.Keyword(null,"click","click",1108654330).cljs$core$IFn$_invoke$arity$1(opts__$1);if(cljs.core.truth_(temp__4092__auto__))
{var func = temp__4092__auto__;return func.call(null);
} else
{return null;
}
}catch (e10098){if((e10098 instanceof Error))
{var e = e10098;return console.error(e);
} else
{if((e10098 instanceof global.Error))
{var e = e10098;return console.error(e);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e10098;
} else
{return null;
}
}
}
}});})(mi,opts__$1))
):opts__$1);return (new mi(cljs.core.clj__GT_js.call(null,opts__$1)));
});
lt.objs.menu.submenu = (function submenu(items){var menu = lt.objs.menu.create_menu.call(null);var seq__10105_10111 = cljs.core.seq.call(null,items);var chunk__10107_10112 = null;var count__10108_10113 = 0;var i__10109_10114 = 0;while(true){
if((i__10109_10114 < count__10108_10113))
{var i_10115 = cljs.core._nth.call(null,chunk__10107_10112,i__10109_10114);if(cljs.core.truth_(i_10115))
{menu.append(lt.objs.menu.menu_item.call(null,i_10115));
{
var G__10116 = seq__10105_10111;
var G__10117 = chunk__10107_10112;
var G__10118 = count__10108_10113;
var G__10119 = (i__10109_10114 + 1);
seq__10105_10111 = G__10116;
chunk__10107_10112 = G__10117;
count__10108_10113 = G__10118;
i__10109_10114 = G__10119;
continue;
}
} else
{{
var G__10120 = seq__10105_10111;
var G__10121 = chunk__10107_10112;
var G__10122 = count__10108_10113;
var G__10123 = (i__10109_10114 + 1);
seq__10105_10111 = G__10120;
chunk__10107_10112 = G__10121;
count__10108_10113 = G__10122;
i__10109_10114 = G__10123;
continue;
}
}
} else
{var temp__4092__auto___10124 = cljs.core.seq.call(null,seq__10105_10111);if(temp__4092__auto___10124)
{var seq__10105_10125__$1 = temp__4092__auto___10124;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10105_10125__$1))
{var c__4150__auto___10126 = cljs.core.chunk_first.call(null,seq__10105_10125__$1);{
var G__10127 = cljs.core.chunk_rest.call(null,seq__10105_10125__$1);
var G__10128 = c__4150__auto___10126;
var G__10129 = cljs.core.count.call(null,c__4150__auto___10126);
var G__10130 = 0;
seq__10105_10111 = G__10127;
chunk__10107_10112 = G__10128;
count__10108_10113 = G__10129;
i__10109_10114 = G__10130;
continue;
}
} else
{var i_10131 = cljs.core.first.call(null,seq__10105_10125__$1);if(cljs.core.truth_(i_10131))
{menu.append(lt.objs.menu.menu_item.call(null,i_10131));
{
var G__10132 = cljs.core.next.call(null,seq__10105_10125__$1);
var G__10133 = null;
var G__10134 = 0;
var G__10135 = 0;
seq__10105_10111 = G__10132;
chunk__10107_10112 = G__10133;
count__10108_10113 = G__10134;
i__10109_10114 = G__10135;
continue;
}
} else
{{
var G__10136 = cljs.core.next.call(null,seq__10105_10125__$1);
var G__10137 = null;
var G__10138 = 0;
var G__10139 = 0;
seq__10105_10111 = G__10136;
chunk__10107_10112 = G__10137;
count__10108_10113 = G__10138;
i__10109_10114 = G__10139;
continue;
}
}
}
} else
{}
}
break;
}
return menu;
});
lt.objs.menu.clear_BANG_ = (function clear_BANG_(menu){var m = (function (){var or__3408__auto__ = menu;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.menu.menu_instance;
}
})();var n__4250__auto__ = m.items.length;var i = 0;while(true){
if((i < n__4250__auto__))
{m.removeAt(0);
{
var G__10140 = (i + 1);
i = G__10140;
continue;
}
} else
{return null;
}
break;
}
});
lt.objs.menu.menu = (function menu(items){lt.objs.menu.clear_BANG_.call(null,lt.objs.menu.menu_instance);
var seq__10145_10149 = cljs.core.seq.call(null,items);var chunk__10146_10150 = null;var count__10147_10151 = 0;var i__10148_10152 = 0;while(true){
if((i__10148_10152 < count__10147_10151))
{var i_10153 = cljs.core._nth.call(null,chunk__10146_10150,i__10148_10152);lt.objs.menu.menu_instance.append(lt.objs.menu.menu_item.call(null,i_10153));
{
var G__10154 = seq__10145_10149;
var G__10155 = chunk__10146_10150;
var G__10156 = count__10147_10151;
var G__10157 = (i__10148_10152 + 1);
seq__10145_10149 = G__10154;
chunk__10146_10150 = G__10155;
count__10147_10151 = G__10156;
i__10148_10152 = G__10157;
continue;
}
} else
{var temp__4092__auto___10158 = cljs.core.seq.call(null,seq__10145_10149);if(temp__4092__auto___10158)
{var seq__10145_10159__$1 = temp__4092__auto___10158;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10145_10159__$1))
{var c__4150__auto___10160 = cljs.core.chunk_first.call(null,seq__10145_10159__$1);{
var G__10161 = cljs.core.chunk_rest.call(null,seq__10145_10159__$1);
var G__10162 = c__4150__auto___10160;
var G__10163 = cljs.core.count.call(null,c__4150__auto___10160);
var G__10164 = 0;
seq__10145_10149 = G__10161;
chunk__10146_10150 = G__10162;
count__10147_10151 = G__10163;
i__10148_10152 = G__10164;
continue;
}
} else
{var i_10165 = cljs.core.first.call(null,seq__10145_10159__$1);lt.objs.menu.menu_instance.append(lt.objs.menu.menu_item.call(null,i_10165));
{
var G__10166 = cljs.core.next.call(null,seq__10145_10159__$1);
var G__10167 = null;
var G__10168 = 0;
var G__10169 = 0;
seq__10145_10149 = G__10166;
chunk__10146_10150 = G__10167;
count__10147_10151 = G__10168;
i__10148_10152 = G__10169;
continue;
}
}
} else
{}
}
break;
}
return lt.objs.menu.menu_instance;
});
lt.objs.menu.zoom_adjust = (function zoom_adjust(zoom,v){if(cljs.core._EQ_.call(null,0,zoom))
{return v;
} else
{if((zoom > 0))
{return ((v * (1 + (zoom * 0.2))) | 0);
} else
{if((zoom < 0))
{return ((v * (-1 / (-1 + (zoom * 0.27)))) | 0);
} else
{return null;
}
}
}
});
lt.objs.menu.show_menu = (function show_menu(m,x,y){var vec__10171 = (function (){var temp__4090__auto__ = lt.objs.app.zoom_level.call(null);if(cljs.core.truth_(temp__4090__auto__))
{var zoom = temp__4090__auto__;return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.zoom_adjust.call(null,zoom,x),lt.objs.menu.zoom_adjust.call(null,zoom,y)], null);
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null);
}
})();var x__$1 = cljs.core.nth.call(null,vec__10171,0,null);var y__$1 = cljs.core.nth.call(null,vec__10171,1,null);return m.popup(x__$1,y__$1);
});
lt.util.dom.on.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.util.dom.prevent.call(null,e);
lt.util.dom.stop_propagation.call(null,e);
return false;
}));
lt.objs.menu.menubar = lt.objs.menu.create_menu.call(null,"menubar");
lt.objs.menu.set_menubar = (function set_menubar(items){lt.objs.menu.clear_BANG_.call(null,lt.objs.menu.menubar);
var seq__10178_10184 = cljs.core.seq.call(null,items);var chunk__10180_10185 = null;var count__10181_10186 = 0;var i__10182_10187 = 0;while(true){
if((i__10182_10187 < count__10181_10186))
{var i_10188 = cljs.core._nth.call(null,chunk__10180_10185,i__10182_10187);if(cljs.core.truth_(i_10188))
{lt.objs.menu.menubar.append(lt.objs.menu.menu_item.call(null,i_10188));
{
var G__10189 = seq__10178_10184;
var G__10190 = chunk__10180_10185;
var G__10191 = count__10181_10186;
var G__10192 = (i__10182_10187 + 1);
seq__10178_10184 = G__10189;
chunk__10180_10185 = G__10190;
count__10181_10186 = G__10191;
i__10182_10187 = G__10192;
continue;
}
} else
{{
var G__10193 = seq__10178_10184;
var G__10194 = chunk__10180_10185;
var G__10195 = count__10181_10186;
var G__10196 = (i__10182_10187 + 1);
seq__10178_10184 = G__10193;
chunk__10180_10185 = G__10194;
count__10181_10186 = G__10195;
i__10182_10187 = G__10196;
continue;
}
}
} else
{var temp__4092__auto___10197 = cljs.core.seq.call(null,seq__10178_10184);if(temp__4092__auto___10197)
{var seq__10178_10198__$1 = temp__4092__auto___10197;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10178_10198__$1))
{var c__4150__auto___10199 = cljs.core.chunk_first.call(null,seq__10178_10198__$1);{
var G__10200 = cljs.core.chunk_rest.call(null,seq__10178_10198__$1);
var G__10201 = c__4150__auto___10199;
var G__10202 = cljs.core.count.call(null,c__4150__auto___10199);
var G__10203 = 0;
seq__10178_10184 = G__10200;
chunk__10180_10185 = G__10201;
count__10181_10186 = G__10202;
i__10182_10187 = G__10203;
continue;
}
} else
{var i_10204 = cljs.core.first.call(null,seq__10178_10198__$1);if(cljs.core.truth_(i_10204))
{lt.objs.menu.menubar.append(lt.objs.menu.menu_item.call(null,i_10204));
{
var G__10205 = cljs.core.next.call(null,seq__10178_10198__$1);
var G__10206 = null;
var G__10207 = 0;
var G__10208 = 0;
seq__10178_10184 = G__10205;
chunk__10180_10185 = G__10206;
count__10181_10186 = G__10207;
i__10182_10187 = G__10208;
continue;
}
} else
{{
var G__10209 = cljs.core.next.call(null,seq__10178_10198__$1);
var G__10210 = null;
var G__10211 = 0;
var G__10212 = 0;
seq__10178_10184 = G__10209;
chunk__10180_10185 = G__10210;
count__10181_10186 = G__10211;
i__10182_10187 = G__10212;
continue;
}
}
}
} else
{}
}
break;
}
if(cljs.core.truth_(lt.objs.app.win.menu))
{return null;
} else
{return lt.objs.app.win.menu = lt.objs.menu.menubar;
}
});
lt.objs.menu.command__GT_menu_binding = (function command__GT_menu_binding(cmd){var ks = cljs.core.first.call(null,lt.objs.keyboard.cmd__GT_current_binding.call(null,cmd));var multi_part_QMARK_ = cljs.core.next.call(null,clojure.string.split.call(null,ks," "));var ks__$1 = clojure.string.split.call(null,ks,"-");if((cljs.core.seq.call(null,ks__$1)) && (cljs.core.not.call(null,multi_part_QMARK_)))
{return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),((cljs.core._EQ_.call(null,"space",cljs.core.last.call(null,ks__$1)))?" ":cljs.core.last.call(null,ks__$1)),new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),(((cljs.core.count.call(null,ks__$1) > 1))?clojure.string.join.call(null,"-",cljs.core.butlast.call(null,ks__$1)):null)], null);
} else
{return null;
}
});
lt.objs.menu.cmd_item = (function() {
var cmd_item = null;
var cmd_item__2 = (function (label,cmd){return cmd_item.call(null,label,cmd,cljs.core.PersistentArrayMap.EMPTY);
});
var cmd_item__3 = (function (label,cmd,opts){return cljs.core.merge.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),label,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,cmd);
})], null),opts,lt.objs.menu.command__GT_menu_binding.call(null,cmd));
});
cmd_item = function(label,cmd,opts){
switch(arguments.length){
case 2:
return cmd_item__2.call(this,label,cmd);
case 3:
return cmd_item__3.call(this,label,cmd,opts);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
cmd_item.cljs$core$IFn$_invoke$arity$2 = cmd_item__2;
cmd_item.cljs$core$IFn$_invoke$arity$3 = cmd_item__3;
return cmd_item;
})()
;
lt.objs.menu.main_menu = (function main_menu(){return lt.objs.menu.set_menubar.call(null,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [((lt.objs.platform.mac_QMARK_.call(null))?new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"About Light Table",new cljs.core.Keyword(null,"version","version",1365512266)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Hide Light Table",new cljs.core.Keyword(null,"key","key",1014010321),"h",new cljs.core.Keyword(null,"selector","selector",2205476689),"hide:"], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"label","label",1116631654),"Hide Others",new cljs.core.Keyword(null,"key","key",1014010321),"h",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-alt",new cljs.core.Keyword(null,"selector","selector",2205476689),"hideOtherApplications:"], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Quit Light Table",new cljs.core.Keyword(null,"quit","quit",1017386433),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"q"], null))], null)], null):null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"File",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 11, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"New file",new cljs.core.Keyword(null,"new-file","new-file",2344641787),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"n"], null)),lt.objs.menu.cmd_item.call(null,"Open file",new cljs.core.Keyword(null,"open-file","open-file",2513650321),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"o",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Open folder",new cljs.core.Keyword(null,"click","click",1108654330),(function (){lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592),new cljs.core.Keyword(null,"force","force",1111522909));
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.add-folder","workspace.add-folder",2772643205));
})], null),lt.objs.menu.cmd_item.call(null,"Open recent workspace",new cljs.core.Keyword(null,"workspace.show-recents","workspace.show-recents",1806500563),cljs.core.PersistentArrayMap.EMPTY),lt.objs.menu.cmd_item.call(null,"Save file",new cljs.core.Keyword(null,"save","save",1017427183),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"s"], null)),lt.objs.menu.cmd_item.call(null,"Save file as..",new cljs.core.Keyword(null,"save-as","save-as",2886670836),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"s",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"New window",new cljs.core.Keyword(null,"window.new","window.new",2875320852),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"n",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),lt.objs.menu.cmd_item.call(null,"Close window",new cljs.core.Keyword(null,"window.close","window.close",3118917100),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"w",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Close file",new cljs.core.Keyword(null,"tabs.close","tabs.close",4150844154),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"w"], null))], null)], null),((lt.objs.platform.mac_QMARK_.call(null))?new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Edit",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Undo",new cljs.core.Keyword(null,"editor.undo","editor.undo",4270768183),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"undo:",new cljs.core.Keyword(null,"key","key",1014010321),"z"], null)),lt.objs.menu.cmd_item.call(null,"Redo",new cljs.core.Keyword(null,"editor.redo","editor.redo",4270670161),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"selector","selector",2205476689),"redo:",new cljs.core.Keyword(null,"key","key",1014010321),"z",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Cut",new cljs.core.Keyword(null,"editor.cut","editor.cut",3751346611),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"cut:",new cljs.core.Keyword(null,"key","key",1014010321),"x"], null)),lt.objs.menu.cmd_item.call(null,"Copy",new cljs.core.Keyword(null,"editor.copy","editor.copy",4270233288),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"copy:",new cljs.core.Keyword(null,"key","key",1014010321),"c"], null)),lt.objs.menu.cmd_item.call(null,"Paste",new cljs.core.Keyword(null,"editor.paste","editor.paste",3187448388),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"paste:",new cljs.core.Keyword(null,"key","key",1014010321),"v"], null)),lt.objs.menu.cmd_item.call(null,"Select All",new cljs.core.Keyword(null,"editor.select-all","editor.select-all",2519334883),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"selectAll:",new cljs.core.Keyword(null,"key","key",1014010321),"a"], null))], null)], null):new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Edit",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Undo",new cljs.core.Keyword(null,"editor.undo","editor.undo",4270768183)),lt.objs.menu.cmd_item.call(null,"Redo",new cljs.core.Keyword(null,"editor.redo","editor.redo",4270670161)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Cut",new cljs.core.Keyword(null,"editor.cut","editor.cut",3751346611)),lt.objs.menu.cmd_item.call(null,"Copy",new cljs.core.Keyword(null,"editor.copy","editor.copy",4270233288)),lt.objs.menu.cmd_item.call(null,"Paste",new cljs.core.Keyword(null,"editor.paste","editor.paste",3187448388)),lt.objs.menu.cmd_item.call(null,"Select All",new cljs.core.Keyword(null,"editor.select-all","editor.select-all",2519334883))], null)], null)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"View",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Workspace",new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592)),lt.objs.menu.cmd_item.call(null,"Connections",new cljs.core.Keyword(null,"show-connect","show-connect",2165693836)),lt.objs.menu.cmd_item.call(null,"Navigator",new cljs.core.Keyword(null,"navigate-workspace-transient","navigate-workspace-transient",615022696)),lt.objs.menu.cmd_item.call(null,"Commands",new cljs.core.Keyword(null,"show-commandbar-transient","show-commandbar-transient",3110127655)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Language docs",new cljs.core.Keyword(null,"docs.search.show","docs.search.show",4500636610)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Console",new cljs.core.Keyword(null,"toggle-console","toggle-console",4454540112))], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Window",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Minimize",new cljs.core.Keyword(null,"window.minimize","window.minimize",2477637198)),lt.objs.menu.cmd_item.call(null,"Maximize",new cljs.core.Keyword(null,"window.maximize","window.maximize",4253833852)),lt.objs.menu.cmd_item.call(null,"Fullscreen",new cljs.core.Keyword(null,"window.fullscreen","window.fullscreen",3710835691))], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Help",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Documentation",new cljs.core.Keyword(null,"show-docs","show-docs",3358896765)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Report an Issue",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"add-browser-tab","add-browser-tab",3663273910),"https://github.com/LightTable/LightTable/issues?state=open");
})], null),((lt.objs.platform.mac_QMARK_.call(null))?null:lt.objs.menu.cmd_item.call(null,"About Light Table",new cljs.core.Keyword(null,"version","version",1365512266)))], null)], null)], null));
});
lt.objs.menu.__BEH__create_menu = (function __BEH__create_menu(this$){if(lt.objs.platform.mac_QMARK_.call(null))
{lt.objs.app.win.menu = null;
} else
{}
return lt.objs.menu.main_menu.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","create-menu","lt.objs.menu/create-menu",1707993513),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__create_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null));
lt.objs.menu.__BEH__recreate_menu = (function __BEH__recreate_menu(app){if(lt.objs.platform.mac_QMARK_.call(null))
{return lt.objs.menu.main_menu.call(null);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","recreate-menu","lt.objs.menu/recreate-menu",912131484),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__recreate_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"init","init",1017141378),null,new cljs.core.Keyword(null,"app.keys.load","app.keys.load",3209213061),null], null), null),new cljs.core.Keyword(null,"debounce","debounce",1556599227),20);
lt.objs.menu.__BEH__set_menu = (function __BEH__set_menu(this$){if((lt.objs.platform.mac_QMARK_.call(null)) || (cljs.core.not.call(null,lt.objs.app.win.menu)))
{return lt.objs.app.win.menu = lt.objs.menu.menubar;
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","set-menu","lt.objs.menu/set-menu",4093310231),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__set_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"init","init",1017141378),null,new cljs.core.Keyword(null,"focus","focus",1111509066),null], null), null));
lt.objs.menu.__BEH__remove_menu_close = (function __BEH__remove_menu_close(this$){if(lt.objs.platform.mac_QMARK_.call(null))
{return lt.objs.app.win.menu = null;
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","remove-menu-close","lt.objs.menu/remove-menu-close",1602484750),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__remove_menu_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"blur","blur",1016931289),null,new cljs.core.Keyword(null,"closed","closed",3951351006),null], null), null));
lt.objs.menu.__BEH__menu_BANG_ = (function __BEH__menu_BANG_(this$,e){var items_10213 = cljs.core.sort_by.call(null,new cljs.core.Keyword(null,"order","order",1119910592),cljs.core.filter.call(null,cljs.core.identity,lt.object.raise_reduce.call(null,this$,new cljs.core.Keyword(null,"menu+","menu+",1117686302),cljs.core.PersistentVector.EMPTY,e)));lt.objs.menu.show_menu.call(null,lt.objs.menu.menu.call(null,items_10213),e.clientX,e.clientY);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","menu!","lt.objs.menu/menu!",2137957439),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__menu_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu!","menu!",1117686292),null], null), null));

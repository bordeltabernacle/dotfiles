// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.settings');
goog.require('cljs.core');
goog.require('lt.util.cljs');
goog.require('lt.objs.app');
goog.require('lt.objs.sidebar.command');
goog.require('lt.objs.files');
goog.require('lt.util.dom');
goog.require('lt.objs.tabs');
goog.require('cljs.reader');
goog.require('lt.objs.workspace');
goog.require('lt.objs.notifos');
goog.require('lt.objs.notifos');
goog.require('lt.objs.workspace');
goog.require('lt.util.dom');
goog.require('lt.objs.editor.pool');
goog.require('clojure.string');
goog.require('lt.util.cljs');
goog.require('lt.objs.command');
goog.require('lt.objs.files');
goog.require('lt.objs.app');
goog.require('clojure.string');
goog.require('lt.objs.sidebar.command');
goog.require('lt.objs.editor');
goog.require('lt.object');
goog.require('cljs.reader');
goog.require('lt.object');
goog.require('lt.objs.console');
goog.require('lt.objs.tabs');
goog.require('lt.objs.editor');
goog.require('lt.objs.console');
goog.require('lt.objs.keyboard');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.command');
goog.require('lt.objs.keyboard');
lt.objs.settings.safe_read = (function safe_read(s,file){if(cljs.core.truth_(s))
{try{return cljs.reader.read_string.call(null,s);
}catch (e11379){if((e11379 instanceof global.Error))
{var e = e11379;lt.objs.console.error.call(null,[cljs.core.str("Invalid settings file: "),cljs.core.str(file),cljs.core.str("\n"),cljs.core.str(e)].join(''));
return null;
} else
{if((e11379 instanceof Error))
{var e = e11379;lt.objs.console.error.call(null,[cljs.core.str("Invalid settings file: "),cljs.core.str(file),cljs.core.str("\n"),cljs.core.str(e)].join(''));
return null;
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e11379;
} else
{return null;
}
}
}
}} else
{return null;
}
});
lt.objs.settings._PLUS_behaviors = (function _PLUS_behaviors(cur,m){return cljs.core.assoc.call(null,cur,new cljs.core.Keyword(null,"+","+",1013904285),cljs.core.reduce.call(null,(function (res,p__11383){var vec__11384 = p__11383;var k = cljs.core.nth.call(null,vec__11384,0,null);var v = cljs.core.nth.call(null,vec__11384,1,null);return cljs.core.update_in.call(null,res,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null),(function (p1__11380_SHARP_){return cljs.core.apply.call(null,cljs.core.conj,(function (){var or__3408__auto__ = p1__11380_SHARP_;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.List.EMPTY;
}
})(),v);
}));
}),new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(cur),m));
});
lt.objs.settings._behaviors = (function _behaviors(cur,m){return cljs.core.assoc.call(null,cur,new cljs.core.Keyword(null,"+","+",1013904285),cljs.core.reduce.call(null,(function (res,p__11391){var vec__11392 = p__11391;var k = cljs.core.nth.call(null,vec__11392,0,null);var v = cljs.core.nth.call(null,vec__11392,1,null);return cljs.core.update_in.call(null,res,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null),(function (p1__11385_SHARP_){return cljs.core.remove.call(null,cljs.core.set.call(null,v),p1__11385_SHARP_);
}));
}),new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(cur),m),new cljs.core.Keyword(null,"-","-",1013904287),cljs.core.reduce.call(null,(function (res,p__11393){var vec__11394 = p__11393;var k = cljs.core.nth.call(null,vec__11394,0,null);var v = cljs.core.nth.call(null,vec__11394,1,null);return cljs.core.update_in.call(null,res,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null),(function (p1__11386_SHARP_){return cljs.core.apply.call(null,cljs.core.conj,(function (){var or__3408__auto__ = p1__11386_SHARP_;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.List.EMPTY;
}
})(),v);
}));
}),new cljs.core.Keyword(null,"-","-",1013904287).cljs$core$IFn$_invoke$arity$1(cur),m));
});
lt.objs.settings.behavior_diff = (function behavior_diff(p__11395,final$){var map__11397 = p__11395;var map__11397__$1 = ((cljs.core.seq_QMARK_.call(null,map__11397))?cljs.core.apply.call(null,cljs.core.hash_map,map__11397):map__11397);var diff = map__11397__$1;var add = cljs.core.get.call(null,map__11397__$1,new cljs.core.Keyword(null,"+","+",1013904285));var rem = cljs.core.get.call(null,map__11397__$1,new cljs.core.Keyword(null,"-","-",1013904287));if(cljs.core.not.call(null,diff))
{return final$;
} else
{return lt.objs.settings._behaviors.call(null,lt.objs.settings._PLUS_behaviors.call(null,final$,add),rem);
}
});
lt.objs.settings.reverse_diff = (function reverse_diff(p__11398){var map__11400 = p__11398;var map__11400__$1 = ((cljs.core.seq_QMARK_.call(null,map__11400))?cljs.core.apply.call(null,cljs.core.hash_map,map__11400):map__11400);var add = cljs.core.get.call(null,map__11400__$1,new cljs.core.Keyword(null,"+","+",1013904285));var rem = cljs.core.get.call(null,map__11400__$1,new cljs.core.Keyword(null,"-","-",1013904287));return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"+","+",1013904285),rem,new cljs.core.Keyword(null,"-","-",1013904287),add], null);
});
lt.objs.settings.apply_diff = (function apply_diff(diff){var final$ = lt.objs.settings.behavior_diff.call(null,diff,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"+","+",1013904285),cljs.core.deref.call(null,lt.object.tags)], null));return cljs.core.reset_BANG_.call(null,lt.object.tags,new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(final$));
});
lt.objs.settings.keyword__GT_str = (function keyword__GT_str(kw){if((kw instanceof cljs.core.Keyword))
{return cljs.core.subs.call(null,[cljs.core.str(kw)].join(''),1);
} else
{return kw;
}
});
lt.objs.settings.flat_behaviors__GT_map = (function flat_behaviors__GT_map(flat){var adds = (function (){var obj11416 = {};return obj11416;
})();var removes = (function (){var obj11418 = {};return obj11418;
})();var seq__11419_11429 = cljs.core.seq.call(null,flat);var chunk__11421_11430 = null;var count__11422_11431 = 0;var i__11423_11432 = 0;while(true){
if((i__11423_11432 < count__11422_11431))
{var vec__11425_11433 = cljs.core._nth.call(null,chunk__11421_11430,i__11423_11432);var tag_11434 = cljs.core.nth.call(null,vec__11425_11433,0,null);var behavior_11435 = cljs.core.nth.call(null,vec__11425_11433,1,null);var all_11436 = vec__11425_11433;var vec__11426_11437 = ((cljs.core._EQ_.call(null,(lt.objs.settings.keyword__GT_str.call(null,behavior_11435)[0]),"-"))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [removes,cljs.core.subs.call(null,lt.objs.settings.keyword__GT_str.call(null,behavior_11435),1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [adds,lt.objs.settings.keyword__GT_str.call(null,behavior_11435)], null));var coll_11438 = cljs.core.nth.call(null,vec__11426_11437,0,null);var behavior_11439__$1 = cljs.core.nth.call(null,vec__11426_11437,1,null);var tag_11440__$1 = lt.objs.settings.keyword__GT_str.call(null,tag_11434);if(cljs.core.truth_((coll_11438[tag_11440__$1])))
{} else
{(coll_11438[tag_11440__$1] = []);
}
(coll_11438[tag_11440__$1]).push((((cljs.core.count.call(null,all_11436) > 2))?cljs.core.conj.call(null,cljs.core.seq.call(null,cljs.core.subvec.call(null,all_11436,2)),cljs.core.keyword.call(null,behavior_11439__$1)):cljs.core.keyword.call(null,behavior_11439__$1)));
{
var G__11441 = seq__11419_11429;
var G__11442 = chunk__11421_11430;
var G__11443 = count__11422_11431;
var G__11444 = (i__11423_11432 + 1);
seq__11419_11429 = G__11441;
chunk__11421_11430 = G__11442;
count__11422_11431 = G__11443;
i__11423_11432 = G__11444;
continue;
}
} else
{var temp__4092__auto___11445 = cljs.core.seq.call(null,seq__11419_11429);if(temp__4092__auto___11445)
{var seq__11419_11446__$1 = temp__4092__auto___11445;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11419_11446__$1))
{var c__4150__auto___11447 = cljs.core.chunk_first.call(null,seq__11419_11446__$1);{
var G__11448 = cljs.core.chunk_rest.call(null,seq__11419_11446__$1);
var G__11449 = c__4150__auto___11447;
var G__11450 = cljs.core.count.call(null,c__4150__auto___11447);
var G__11451 = 0;
seq__11419_11429 = G__11448;
chunk__11421_11430 = G__11449;
count__11422_11431 = G__11450;
i__11423_11432 = G__11451;
continue;
}
} else
{var vec__11427_11452 = cljs.core.first.call(null,seq__11419_11446__$1);var tag_11453 = cljs.core.nth.call(null,vec__11427_11452,0,null);var behavior_11454 = cljs.core.nth.call(null,vec__11427_11452,1,null);var all_11455 = vec__11427_11452;var vec__11428_11456 = ((cljs.core._EQ_.call(null,(lt.objs.settings.keyword__GT_str.call(null,behavior_11454)[0]),"-"))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [removes,cljs.core.subs.call(null,lt.objs.settings.keyword__GT_str.call(null,behavior_11454),1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [adds,lt.objs.settings.keyword__GT_str.call(null,behavior_11454)], null));var coll_11457 = cljs.core.nth.call(null,vec__11428_11456,0,null);var behavior_11458__$1 = cljs.core.nth.call(null,vec__11428_11456,1,null);var tag_11459__$1 = lt.objs.settings.keyword__GT_str.call(null,tag_11453);if(cljs.core.truth_((coll_11457[tag_11459__$1])))
{} else
{(coll_11457[tag_11459__$1] = []);
}
(coll_11457[tag_11459__$1]).push((((cljs.core.count.call(null,all_11455) > 2))?cljs.core.conj.call(null,cljs.core.seq.call(null,cljs.core.subvec.call(null,all_11455,2)),cljs.core.keyword.call(null,behavior_11458__$1)):cljs.core.keyword.call(null,behavior_11458__$1)));
{
var G__11460 = cljs.core.next.call(null,seq__11419_11446__$1);
var G__11461 = null;
var G__11462 = 0;
var G__11463 = 0;
seq__11419_11429 = G__11460;
chunk__11421_11430 = G__11461;
count__11422_11431 = G__11462;
i__11423_11432 = G__11463;
continue;
}
}
} else
{}
}
break;
}
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"+","+",1013904285),cljs.core.js__GT_clj.call(null,adds,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",4191781672),true),new cljs.core.Keyword(null,"-","-",1013904287),cljs.core.js__GT_clj.call(null,removes,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",4191781672),true)], null);
});
lt.objs.settings.map__GT_flat_behaviors = (function map__GT_flat_behaviors(behaviors_map){var flat = [];var seq__11502_11540 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(behaviors_map));var chunk__11510_11541 = null;var count__11511_11542 = 0;var i__11512_11543 = 0;while(true){
if((i__11512_11543 < count__11511_11542))
{var vec__11520_11544 = cljs.core._nth.call(null,chunk__11510_11541,i__11512_11543);var tag_11545 = cljs.core.nth.call(null,vec__11520_11544,0,null);var behs_11546 = cljs.core.nth.call(null,vec__11520_11544,1,null);var tag_vec_11547 = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11545], null);var seq__11514_11548 = cljs.core.seq.call(null,behs_11546);var chunk__11516_11549 = null;var count__11517_11550 = 0;var i__11518_11551 = 0;while(true){
if((i__11518_11551 < count__11517_11550))
{var beh_11552 = cljs.core._nth.call(null,chunk__11516_11549,i__11518_11551);var beh_11553__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11552))?beh_11552:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11552], null));flat.push(cljs.core.into.call(null,tag_vec_11547,beh_11553__$1));
{
var G__11554 = seq__11514_11548;
var G__11555 = chunk__11516_11549;
var G__11556 = count__11517_11550;
var G__11557 = (i__11518_11551 + 1);
seq__11514_11548 = G__11554;
chunk__11516_11549 = G__11555;
count__11517_11550 = G__11556;
i__11518_11551 = G__11557;
continue;
}
} else
{var temp__4092__auto___11558 = cljs.core.seq.call(null,seq__11514_11548);if(temp__4092__auto___11558)
{var seq__11514_11559__$1 = temp__4092__auto___11558;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11514_11559__$1))
{var c__4150__auto___11560 = cljs.core.chunk_first.call(null,seq__11514_11559__$1);{
var G__11561 = cljs.core.chunk_rest.call(null,seq__11514_11559__$1);
var G__11562 = c__4150__auto___11560;
var G__11563 = cljs.core.count.call(null,c__4150__auto___11560);
var G__11564 = 0;
seq__11514_11548 = G__11561;
chunk__11516_11549 = G__11562;
count__11517_11550 = G__11563;
i__11518_11551 = G__11564;
continue;
}
} else
{var beh_11565 = cljs.core.first.call(null,seq__11514_11559__$1);var beh_11566__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11565))?beh_11565:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11565], null));flat.push(cljs.core.into.call(null,tag_vec_11547,beh_11566__$1));
{
var G__11567 = cljs.core.next.call(null,seq__11514_11559__$1);
var G__11568 = null;
var G__11569 = 0;
var G__11570 = 0;
seq__11514_11548 = G__11567;
chunk__11516_11549 = G__11568;
count__11517_11550 = G__11569;
i__11518_11551 = G__11570;
continue;
}
}
} else
{}
}
break;
}
{
var G__11571 = seq__11502_11540;
var G__11572 = chunk__11510_11541;
var G__11573 = count__11511_11542;
var G__11574 = (i__11512_11543 + 1);
seq__11502_11540 = G__11571;
chunk__11510_11541 = G__11572;
count__11511_11542 = G__11573;
i__11512_11543 = G__11574;
continue;
}
} else
{var temp__4092__auto___11575 = cljs.core.seq.call(null,seq__11502_11540);if(temp__4092__auto___11575)
{var seq__11502_11576__$1 = temp__4092__auto___11575;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11502_11576__$1))
{var c__4150__auto___11577 = cljs.core.chunk_first.call(null,seq__11502_11576__$1);{
var G__11578 = cljs.core.chunk_rest.call(null,seq__11502_11576__$1);
var G__11579 = c__4150__auto___11577;
var G__11580 = cljs.core.count.call(null,c__4150__auto___11577);
var G__11581 = 0;
seq__11502_11540 = G__11578;
chunk__11510_11541 = G__11579;
count__11511_11542 = G__11580;
i__11512_11543 = G__11581;
continue;
}
} else
{var vec__11521_11582 = cljs.core.first.call(null,seq__11502_11576__$1);var tag_11583 = cljs.core.nth.call(null,vec__11521_11582,0,null);var behs_11584 = cljs.core.nth.call(null,vec__11521_11582,1,null);var tag_vec_11585 = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11583], null);var seq__11504_11586 = cljs.core.seq.call(null,behs_11584);var chunk__11506_11587 = null;var count__11507_11588 = 0;var i__11508_11589 = 0;while(true){
if((i__11508_11589 < count__11507_11588))
{var beh_11590 = cljs.core._nth.call(null,chunk__11506_11587,i__11508_11589);var beh_11591__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11590))?beh_11590:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11590], null));flat.push(cljs.core.into.call(null,tag_vec_11585,beh_11591__$1));
{
var G__11592 = seq__11504_11586;
var G__11593 = chunk__11506_11587;
var G__11594 = count__11507_11588;
var G__11595 = (i__11508_11589 + 1);
seq__11504_11586 = G__11592;
chunk__11506_11587 = G__11593;
count__11507_11588 = G__11594;
i__11508_11589 = G__11595;
continue;
}
} else
{var temp__4092__auto___11596__$1 = cljs.core.seq.call(null,seq__11504_11586);if(temp__4092__auto___11596__$1)
{var seq__11504_11597__$1 = temp__4092__auto___11596__$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11504_11597__$1))
{var c__4150__auto___11598 = cljs.core.chunk_first.call(null,seq__11504_11597__$1);{
var G__11599 = cljs.core.chunk_rest.call(null,seq__11504_11597__$1);
var G__11600 = c__4150__auto___11598;
var G__11601 = cljs.core.count.call(null,c__4150__auto___11598);
var G__11602 = 0;
seq__11504_11586 = G__11599;
chunk__11506_11587 = G__11600;
count__11507_11588 = G__11601;
i__11508_11589 = G__11602;
continue;
}
} else
{var beh_11603 = cljs.core.first.call(null,seq__11504_11597__$1);var beh_11604__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11603))?beh_11603:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11603], null));flat.push(cljs.core.into.call(null,tag_vec_11585,beh_11604__$1));
{
var G__11605 = cljs.core.next.call(null,seq__11504_11597__$1);
var G__11606 = null;
var G__11607 = 0;
var G__11608 = 0;
seq__11504_11586 = G__11605;
chunk__11506_11587 = G__11606;
count__11507_11588 = G__11607;
i__11508_11589 = G__11608;
continue;
}
}
} else
{}
}
break;
}
{
var G__11609 = cljs.core.next.call(null,seq__11502_11576__$1);
var G__11610 = null;
var G__11611 = 0;
var G__11612 = 0;
seq__11502_11540 = G__11609;
chunk__11510_11541 = G__11610;
count__11511_11542 = G__11611;
i__11512_11543 = G__11612;
continue;
}
}
} else
{}
}
break;
}
var seq__11522_11613 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"-","-",1013904287).cljs$core$IFn$_invoke$arity$1(behaviors_map));var chunk__11529_11614 = null;var count__11530_11615 = 0;var i__11531_11616 = 0;while(true){
if((i__11531_11616 < count__11530_11615))
{var vec__11538_11617 = cljs.core._nth.call(null,chunk__11529_11614,i__11531_11616);var tag_11618 = cljs.core.nth.call(null,vec__11538_11617,0,null);var behs_11619 = cljs.core.nth.call(null,vec__11538_11617,1,null);var seq__11532_11620 = cljs.core.seq.call(null,behs_11619);var chunk__11534_11621 = null;var count__11535_11622 = 0;var i__11536_11623 = 0;while(true){
if((i__11536_11623 < count__11535_11622))
{var beh_11624 = cljs.core._nth.call(null,chunk__11534_11621,i__11536_11623);var beh_11625__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11624))?beh_11624:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11624], null));var tag_vec_11626 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11618,cljs.core.keyword.call(null,[cljs.core.str("-"),cljs.core.str(lt.objs.settings.keyword__GT_str.call(null,cljs.core.first.call(null,beh_11625__$1)))].join(''))], null);flat.push(cljs.core.into.call(null,tag_vec_11626,cljs.core.rest.call(null,beh_11625__$1)));
{
var G__11627 = seq__11532_11620;
var G__11628 = chunk__11534_11621;
var G__11629 = count__11535_11622;
var G__11630 = (i__11536_11623 + 1);
seq__11532_11620 = G__11627;
chunk__11534_11621 = G__11628;
count__11535_11622 = G__11629;
i__11536_11623 = G__11630;
continue;
}
} else
{var temp__4092__auto___11631 = cljs.core.seq.call(null,seq__11532_11620);if(temp__4092__auto___11631)
{var seq__11532_11632__$1 = temp__4092__auto___11631;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11532_11632__$1))
{var c__4150__auto___11633 = cljs.core.chunk_first.call(null,seq__11532_11632__$1);{
var G__11634 = cljs.core.chunk_rest.call(null,seq__11532_11632__$1);
var G__11635 = c__4150__auto___11633;
var G__11636 = cljs.core.count.call(null,c__4150__auto___11633);
var G__11637 = 0;
seq__11532_11620 = G__11634;
chunk__11534_11621 = G__11635;
count__11535_11622 = G__11636;
i__11536_11623 = G__11637;
continue;
}
} else
{var beh_11638 = cljs.core.first.call(null,seq__11532_11632__$1);var beh_11639__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11638))?beh_11638:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11638], null));var tag_vec_11640 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11618,cljs.core.keyword.call(null,[cljs.core.str("-"),cljs.core.str(lt.objs.settings.keyword__GT_str.call(null,cljs.core.first.call(null,beh_11639__$1)))].join(''))], null);flat.push(cljs.core.into.call(null,tag_vec_11640,cljs.core.rest.call(null,beh_11639__$1)));
{
var G__11641 = cljs.core.next.call(null,seq__11532_11632__$1);
var G__11642 = null;
var G__11643 = 0;
var G__11644 = 0;
seq__11532_11620 = G__11641;
chunk__11534_11621 = G__11642;
count__11535_11622 = G__11643;
i__11536_11623 = G__11644;
continue;
}
}
} else
{}
}
break;
}
{
var G__11645 = seq__11522_11613;
var G__11646 = chunk__11529_11614;
var G__11647 = count__11530_11615;
var G__11648 = (i__11531_11616 + 1);
seq__11522_11613 = G__11645;
chunk__11529_11614 = G__11646;
count__11530_11615 = G__11647;
i__11531_11616 = G__11648;
continue;
}
} else
{var temp__4092__auto___11649 = cljs.core.seq.call(null,seq__11522_11613);if(temp__4092__auto___11649)
{var seq__11522_11650__$1 = temp__4092__auto___11649;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11522_11650__$1))
{var c__4150__auto___11651 = cljs.core.chunk_first.call(null,seq__11522_11650__$1);{
var G__11652 = cljs.core.chunk_rest.call(null,seq__11522_11650__$1);
var G__11653 = c__4150__auto___11651;
var G__11654 = cljs.core.count.call(null,c__4150__auto___11651);
var G__11655 = 0;
seq__11522_11613 = G__11652;
chunk__11529_11614 = G__11653;
count__11530_11615 = G__11654;
i__11531_11616 = G__11655;
continue;
}
} else
{var vec__11539_11656 = cljs.core.first.call(null,seq__11522_11650__$1);var tag_11657 = cljs.core.nth.call(null,vec__11539_11656,0,null);var behs_11658 = cljs.core.nth.call(null,vec__11539_11656,1,null);var seq__11523_11659 = cljs.core.seq.call(null,behs_11658);var chunk__11525_11660 = null;var count__11526_11661 = 0;var i__11527_11662 = 0;while(true){
if((i__11527_11662 < count__11526_11661))
{var beh_11663 = cljs.core._nth.call(null,chunk__11525_11660,i__11527_11662);var beh_11664__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11663))?beh_11663:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11663], null));var tag_vec_11665 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11657,cljs.core.keyword.call(null,[cljs.core.str("-"),cljs.core.str(lt.objs.settings.keyword__GT_str.call(null,cljs.core.first.call(null,beh_11664__$1)))].join(''))], null);flat.push(cljs.core.into.call(null,tag_vec_11665,cljs.core.rest.call(null,beh_11664__$1)));
{
var G__11666 = seq__11523_11659;
var G__11667 = chunk__11525_11660;
var G__11668 = count__11526_11661;
var G__11669 = (i__11527_11662 + 1);
seq__11523_11659 = G__11666;
chunk__11525_11660 = G__11667;
count__11526_11661 = G__11668;
i__11527_11662 = G__11669;
continue;
}
} else
{var temp__4092__auto___11670__$1 = cljs.core.seq.call(null,seq__11523_11659);if(temp__4092__auto___11670__$1)
{var seq__11523_11671__$1 = temp__4092__auto___11670__$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11523_11671__$1))
{var c__4150__auto___11672 = cljs.core.chunk_first.call(null,seq__11523_11671__$1);{
var G__11673 = cljs.core.chunk_rest.call(null,seq__11523_11671__$1);
var G__11674 = c__4150__auto___11672;
var G__11675 = cljs.core.count.call(null,c__4150__auto___11672);
var G__11676 = 0;
seq__11523_11659 = G__11673;
chunk__11525_11660 = G__11674;
count__11526_11661 = G__11675;
i__11527_11662 = G__11676;
continue;
}
} else
{var beh_11677 = cljs.core.first.call(null,seq__11523_11671__$1);var beh_11678__$1 = ((cljs.core.coll_QMARK_.call(null,beh_11677))?beh_11677:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [beh_11677], null));var tag_vec_11679 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11657,cljs.core.keyword.call(null,[cljs.core.str("-"),cljs.core.str(lt.objs.settings.keyword__GT_str.call(null,cljs.core.first.call(null,beh_11678__$1)))].join(''))], null);flat.push(cljs.core.into.call(null,tag_vec_11679,cljs.core.rest.call(null,beh_11678__$1)));
{
var G__11680 = cljs.core.next.call(null,seq__11523_11671__$1);
var G__11681 = null;
var G__11682 = 0;
var G__11683 = 0;
seq__11523_11659 = G__11680;
chunk__11525_11660 = G__11681;
count__11526_11661 = G__11682;
i__11527_11662 = G__11683;
continue;
}
}
} else
{}
}
break;
}
{
var G__11684 = cljs.core.next.call(null,seq__11522_11650__$1);
var G__11685 = null;
var G__11686 = 0;
var G__11687 = 0;
seq__11522_11613 = G__11684;
chunk__11529_11614 = G__11685;
count__11530_11615 = G__11686;
i__11531_11616 = G__11687;
continue;
}
}
} else
{}
}
break;
}
return cljs.core.vec.call(null,cljs.core.sort_by.call(null,cljs.core.first,cljs.core.js__GT_clj.call(null,flat)));
});
lt.objs.settings.parse_file = (function parse_file(file){var behs = lt.objs.settings.safe_read.call(null,new cljs.core.Keyword(null,"content","content",1965434859).cljs$core$IFn$_invoke$arity$1(lt.objs.files.open_sync.call(null,file)),file);if(cljs.core.map_QMARK_.call(null,behs))
{return behs;
} else
{if(cljs.core.vector_QMARK_.call(null,behs))
{return lt.objs.settings.flat_behaviors__GT_map.call(null,behs);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{return lt.objs.console.error.call(null,[cljs.core.str("Invalid behaviors file: "),cljs.core.str(file),cljs.core.str(". Behaviors must be either a vector or a map.")].join(''));
} else
{return null;
}
}
}
});
lt.objs.settings.pprint_flat_behaviors = (function pprint_flat_behaviors(flat){return [cljs.core.str(new cljs.core.Keyword(null,"str","str",1014018467).cljs$core$IFn$_invoke$arity$1(cljs.core.reduce.call(null,(function (result,cur){var new_tag = cljs.core.first.call(null,cur);return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"str","str",1014018467),[cljs.core.str(new cljs.core.Keyword(null,"str","str",1014018467).cljs$core$IFn$_invoke$arity$1(result)),cljs.core.str(((!(cljs.core._EQ_.call(null,new_tag,new cljs.core.Keyword(null,"tag","tag",1014018828).cljs$core$IFn$_invoke$arity$1(result))))?"\n":null)),cljs.core.str("\n "),cljs.core.str(cljs.core.pr_str.call(null,cur))].join(''),new cljs.core.Keyword(null,"tag","tag",1014018828),new_tag], null);
}),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"tag","tag",1014018828),cljs.core.first.call(null,cljs.core.first.call(null,flat)),new cljs.core.Keyword(null,"str","str",1014018467),"["], null),flat))),cljs.core.str("\n]")].join('');
});
lt.objs.settings.behavior_diffs_in = (function behavior_diffs_in(path){if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,path)))
{return cljs.core.mapv.call(null,lt.objs.settings.parse_file,cljs.core.filter.call(null,(function (p1__11688_SHARP_){return cljs.core._EQ_.call(null,lt.objs.files.ext.call(null,p1__11688_SHARP_),"behaviors");
}),lt.objs.files.full_path_ls.call(null,path)));
} else
{return null;
}
});
lt.objs.settings.load_all = (function load_all(){var final$ = cljs.core.reduce.call(null,(function (fin,cur){return lt.objs.settings.behavior_diff.call(null,cur,fin);
}),cljs.core.PersistentArrayMap.EMPTY,cljs.core.concat.call(null,lt.object.raise_reduce.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"behaviors.diffs.default+","behaviors.diffs.default+",556712841),cljs.core.PersistentVector.EMPTY),lt.object.raise_reduce.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"behaviors.diffs.plugin+","behaviors.diffs.plugin+",2303858461),cljs.core.PersistentVector.EMPTY),lt.object.raise_reduce.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"behaviors.diffs.user+","behaviors.diffs.user+",707208773),cljs.core.PersistentVector.EMPTY)));var ws_diff = new cljs.core.Keyword(null,"ws-behaviors","ws-behaviors",2339346978).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.workspace.current_ws));var final$__$1 = (cljs.core.truth_((function (){var and__3396__auto__ = ws_diff;if(cljs.core.truth_(and__3396__auto__))
{return !(cljs.core.empty_QMARK_.call(null,ws_diff));
} else
{return and__3396__auto__;
}
})())?lt.objs.settings.behavior_diff.call(null,lt.objs.settings.safe_read.call(null,ws_diff,"workspace.behaviors"),final$):final$);cljs.core.reset_BANG_.call(null,lt.object.negated_tags,(function (){var or__3408__auto__ = new cljs.core.Keyword(null,"-","-",1013904287).cljs$core$IFn$_invoke$arity$1(final$__$1);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.PersistentArrayMap.EMPTY;
}
})());
return cljs.core.reset_BANG_.call(null,lt.object.tags,(function (){var or__3408__auto__ = new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(final$__$1);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.PersistentArrayMap.EMPTY;
}
})());
});
lt.objs.settings.refresh_all = (function refresh_all(objs){if(cljs.core.not.call(null,cljs.core.seq.call(null,objs)))
{lt.object.raise.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"behaviors.refreshed","behaviors.refreshed",1338765023));
return lt.objs.notifos.done_working.call(null,"Behaviors loaded");
} else
{try{lt.object.refresh_BANG_.call(null,cljs.core.first.call(null,objs));
}catch (e11690){if((e11690 instanceof global.Error))
{var e_11691 = e11690;console.error(e_11691);
} else
{if((e11690 instanceof Error))
{var e_11692 = e11690;console.error(e_11692);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e11690;
} else
{}
}
}
}return process.nextTick((function (){return refresh_all.call(null,cljs.core.next.call(null,objs));
}));
}
});
lt.objs.settings.refresh_diffed = (function refresh_diffed(diff){return lt.objs.settings.refresh_all.call(null,cljs.core.mapcat.call(null,lt.object.by_tag,cljs.core.concat.call(null,cljs.core.keys.call(null,new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(diff)),cljs.core.keys.call(null,new cljs.core.Keyword(null,"-","-",1013904287).cljs$core$IFn$_invoke$arity$1(diff)))));
});
lt.objs.settings.__GT_ordered_keystr = (function __GT_ordered_keystr(k){var char$ = ((cljs.core._EQ_.call(null,cljs.core.last.call(null,k),"-"))?"-":cljs.core.last.call(null,clojure.string.split.call(null,k,"-")));return [cljs.core.str(((lt.util.cljs.str_contains_QMARK_.call(null,k,"ctrl"))?"ctrl-":null)),cljs.core.str(((lt.util.cljs.str_contains_QMARK_.call(null,k,"cmd"))?"cmd-":null)),cljs.core.str(((lt.util.cljs.str_contains_QMARK_.call(null,k,"meta"))?"meta-":null)),cljs.core.str(((lt.util.cljs.str_contains_QMARK_.call(null,k,"altgr"))?"altgr-":null)),cljs.core.str(((lt.util.cljs.str_contains_QMARK_.call(null,k,"alt"))?"alt-":null)),cljs.core.str(((lt.util.cljs.str_contains_QMARK_.call(null,k,"shift"))?"shift-":null)),cljs.core.str(char$)].join('');
});
lt.objs.settings.fix_key = (function fix_key(k){var k__$1 = clojure.string.replace.call(null,k,"pmeta",lt.objs.keyboard.meta);var keys = clojure.string.split.call(null,k__$1," ");return cljs.core.reduce.call(null,(function (p1__11693_SHARP_,p2__11694_SHARP_){return [cljs.core.str(p1__11693_SHARP_),cljs.core.str(" "),cljs.core.str(p2__11694_SHARP_)].join('');
}),cljs.core.map.call(null,lt.objs.settings.__GT_ordered_keystr,keys));
});
lt.objs.settings.fix_key_entry = (function fix_key_entry(p__11695){var vec__11697 = p__11695;var k = cljs.core.nth.call(null,vec__11697,0,null);var v = cljs.core.nth.call(null,vec__11697,1,null);return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.settings.fix_key.call(null,k),v], null);
});
lt.objs.settings._PLUS_keys = (function _PLUS_keys(cur,m){return cljs.core.reduce.call(null,(function (res,p__11701){var vec__11702 = p__11701;var k = cljs.core.nth.call(null,vec__11702,0,null);var v = cljs.core.nth.call(null,vec__11702,1,null);return cljs.core.update_in.call(null,res,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null),(function (p1__11698_SHARP_){return cljs.core.into.call(null,(function (){var or__3408__auto__ = p1__11698_SHARP_;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.PersistentArrayMap.EMPTY;
}
})(),cljs.core.map.call(null,lt.objs.settings.fix_key_entry,v));
}));
}),cur,m);
});
lt.objs.settings._keys = (function _keys(cur,m){return cljs.core.reduce.call(null,(function (res,p__11706){var vec__11707 = p__11706;var k = cljs.core.nth.call(null,vec__11707,0,null);var v = cljs.core.nth.call(null,vec__11707,1,null);return cljs.core.update_in.call(null,res,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [k], null),(function (p1__11703_SHARP_){return cljs.core.apply.call(null,cljs.core.dissoc,p1__11703_SHARP_,cljs.core.map.call(null,lt.objs.settings.fix_key,((cljs.core.map_QMARK_.call(null,v))?cljs.core.keys.call(null,v):v)));
}));
}),cur,m);
});
lt.objs.settings.key_diff = (function key_diff(p__11708,final$){var map__11710 = p__11708;var map__11710__$1 = ((cljs.core.seq_QMARK_.call(null,map__11710))?cljs.core.apply.call(null,cljs.core.hash_map,map__11710):map__11710);var add = cljs.core.get.call(null,map__11710__$1,new cljs.core.Keyword(null,"+","+",1013904285));var rem = cljs.core.get.call(null,map__11710__$1,new cljs.core.Keyword(null,"-","-",1013904287));return lt.objs.settings._PLUS_keys.call(null,lt.objs.settings._keys.call(null,final$,rem),add);
});
lt.objs.settings.load_all_keys = (function load_all_keys(){var final$ = cljs.core.reduce.call(null,(function (fin,cur){return lt.objs.settings.key_diff.call(null,cur,fin);
}),cljs.core.PersistentArrayMap.EMPTY,cljs.core.concat.call(null,lt.object.raise_reduce.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"keymap.diffs.default+","keymap.diffs.default+",711992781),cljs.core.PersistentVector.EMPTY),lt.object.raise_reduce.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"keymap.diffs.plugin+","keymap.diffs.plugin+",4109982809),cljs.core.PersistentVector.EMPTY),lt.object.raise_reduce.call(null,lt.objs.app.app,new cljs.core.Keyword(null,"keymap.diffs.user+","keymap.diffs.user+",1410763393),cljs.core.PersistentVector.EMPTY)));return cljs.core.reset_BANG_.call(null,lt.objs.keyboard.keys,final$);
});
lt.objs.settings.__BEH__default_behavior_diffs = (function __BEH__default_behavior_diffs(this$,diffs){return cljs.core.concat.call(null,diffs,lt.objs.settings.behavior_diffs_in.call(null,lt.objs.files.lt_home.call(null,"settings/default/")));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","default-behavior-diffs","lt.objs.settings/default-behavior-diffs",3478385645),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__default_behavior_diffs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"behaviors.diffs.default+","behaviors.diffs.default+",556712841),null], null), null));
lt.objs.settings.user_plugin_dir = lt.objs.files.lt_user_dir.call(null,"User");
lt.objs.settings.__BEH__user_behavior_diffs = (function __BEH__user_behavior_diffs(this$,diffs){return cljs.core.concat.call(null,diffs,lt.objs.settings.behavior_diffs_in.call(null,lt.objs.settings.user_plugin_dir));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","user-behavior-diffs","lt.objs.settings/user-behavior-diffs",2390870839),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__user_behavior_diffs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"behaviors.diffs.user+","behaviors.diffs.user+",707208773),null], null), null));
lt.objs.settings.__BEH__initial_behaviors = (function __BEH__initial_behaviors(this$){if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,lt.objs.settings.user_plugin_dir)))
{} else
{lt.objs.files.mkdir.call(null,lt.objs.settings.user_plugin_dir);
}
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"pre-load","pre-load",3967767874));
lt.objs.settings.load_all.call(null);
var seq__11715_11719 = cljs.core.seq.call(null,cljs.core.vals.call(null,cljs.core.deref.call(null,lt.object.instances)));var chunk__11716_11720 = null;var count__11717_11721 = 0;var i__11718_11722 = 0;while(true){
if((i__11718_11722 < count__11717_11721))
{var inst_11723 = cljs.core._nth.call(null,chunk__11716_11720,i__11718_11722);lt.object.refresh_BANG_.call(null,inst_11723);
{
var G__11724 = seq__11715_11719;
var G__11725 = chunk__11716_11720;
var G__11726 = count__11717_11721;
var G__11727 = (i__11718_11722 + 1);
seq__11715_11719 = G__11724;
chunk__11716_11720 = G__11725;
count__11717_11721 = G__11726;
i__11718_11722 = G__11727;
continue;
}
} else
{var temp__4092__auto___11728 = cljs.core.seq.call(null,seq__11715_11719);if(temp__4092__auto___11728)
{var seq__11715_11729__$1 = temp__4092__auto___11728;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11715_11729__$1))
{var c__4150__auto___11730 = cljs.core.chunk_first.call(null,seq__11715_11729__$1);{
var G__11731 = cljs.core.chunk_rest.call(null,seq__11715_11729__$1);
var G__11732 = c__4150__auto___11730;
var G__11733 = cljs.core.count.call(null,c__4150__auto___11730);
var G__11734 = 0;
seq__11715_11719 = G__11731;
chunk__11716_11720 = G__11732;
count__11717_11721 = G__11733;
i__11718_11722 = G__11734;
continue;
}
} else
{var inst_11735 = cljs.core.first.call(null,seq__11715_11729__$1);lt.object.refresh_BANG_.call(null,inst_11735);
{
var G__11736 = cljs.core.next.call(null,seq__11715_11729__$1);
var G__11737 = null;
var G__11738 = 0;
var G__11739 = 0;
seq__11715_11719 = G__11736;
chunk__11716_11720 = G__11737;
count__11717_11721 = G__11738;
i__11718_11722 = G__11739;
continue;
}
}
} else
{}
}
break;
}
lt.objs.settings.load_all_keys.call(null);
return lt.objs.keyboard.refresh.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","initial-behaviors","lt.objs.settings/initial-behaviors",1554007604),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__initial_behaviors,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"pre-init","pre-init",3967677804),null], null), null));
lt.objs.settings.__BEH__load_behaviors = (function __BEH__load_behaviors(this$){lt.objs.notifos.working.call(null,"loading behaviors...");
lt.objs.settings.load_all.call(null);
return lt.objs.settings.refresh_all.call(null,cljs.core.vals.call(null,cljs.core.deref.call(null,lt.object.instances)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","load-behaviors","lt.objs.settings/load-behaviors",1077508690),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__load_behaviors,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"behaviors.reload","behaviors.reload",2942796600),null], null), null));
lt.objs.settings.__BEH__eval_settings = (function __BEH__eval_settings(ed){return lt.object.raise.call(null,ed,new cljs.core.Keyword(null,"save","save",1017427183));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","eval-settings","lt.objs.settings/eval-settings",3832502360),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__eval_settings,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"eval.one","eval.one",1173589382),null,new cljs.core.Keyword(null,"eval","eval",1017029646),null], null), null));
lt.objs.settings.__BEH__grab_workspace_behaviors = (function __BEH__grab_workspace_behaviors(workspace,old){var old__$1 = new cljs.core.Keyword(null,"ws-behaviors","ws-behaviors",2339346978).cljs$core$IFn$_invoke$arity$1(old);var old__$2 = ((cljs.core.empty_QMARK_.call(null,old__$1))?null:cljs.reader.read_string.call(null,old__$1));var neue = new cljs.core.Keyword(null,"ws-behaviors","ws-behaviors",2339346978).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,workspace));var neue__$1 = ((cljs.core.empty_QMARK_.call(null,neue))?null:cljs.reader.read_string.call(null,neue));if(cljs.core.truth_(old__$2))
{lt.objs.settings.apply_diff.call(null,lt.objs.settings.reverse_diff.call(null,old__$2));
lt.objs.settings.refresh_diffed.call(null,old__$2);
} else
{}
if(cljs.core.truth_(neue__$1))
{lt.objs.settings.apply_diff.call(null,neue__$1);
return lt.objs.settings.refresh_diffed.call(null,neue__$1);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","grab-workspace-behaviors","lt.objs.settings/grab-workspace-behaviors",3638576708),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__grab_workspace_behaviors,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"set","set",1014018004),null], null), null));
lt.objs.settings.__BEH__workspace_save = (function __BEH__workspace_save(editor){var map__11741 = cljs.core.deref.call(null,editor).call(null,new cljs.core.Keyword(null,"info","info",1017141280));var map__11741__$1 = ((cljs.core.seq_QMARK_.call(null,map__11741))?cljs.core.apply.call(null,cljs.core.hash_map,map__11741):map__11741);var path = cljs.core.get.call(null,map__11741__$1,new cljs.core.Keyword(null,"path","path",1017337751));var final$ = lt.object.raise_reduce.call(null,editor,new cljs.core.Keyword(null,"save+","save+",1123115456),lt.objs.editor.__GT_val.call(null,editor));lt.object.merge_BANG_.call(null,lt.objs.workspace.current_ws,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"ws-behaviors","ws-behaviors",2339346978),final$], null));
lt.object.merge_BANG_.call(null,editor,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"dirty","dirty",1109497668),false], null));
lt.object.raise.call(null,editor,new cljs.core.Keyword(null,"saved","saved",1123115513));
lt.object.raise.call(null,editor,new cljs.core.Keyword(null,"clean","clean",1108650427));
return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"serialize!","serialize!",4710885555));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","workspace-save","lt.objs.settings/workspace-save",3431155415),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__workspace_save,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"save","save",1017427183),null], null), null));
lt.objs.settings.user_behaviors_path = lt.objs.files.join.call(null,lt.objs.settings.user_plugin_dir,"user.behaviors");
lt.objs.settings.user_keymap_path = lt.objs.files.join.call(null,lt.objs.settings.user_plugin_dir,"user.keymap");
lt.objs.settings.user_cljs_path = lt.objs.files.join.call(null,lt.objs.settings.user_plugin_dir,"src","lt","plugins","user.cljs");
lt.objs.settings.user_plugin_paths = new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, ["user.behaviors","user.keymap","src","project.clj","plugin.edn","user_compiled.js"], null);
lt.objs.settings.__BEH__create_user_plugin = (function __BEH__create_user_plugin(app){var seq__11746 = cljs.core.seq.call(null,lt.objs.settings.user_plugin_paths);var chunk__11747 = null;var count__11748 = 0;var i__11749 = 0;while(true){
if((i__11749 < count__11748))
{var path = cljs.core._nth.call(null,chunk__11747,i__11749);var full_path_11750 = lt.objs.files.join.call(null,lt.objs.settings.user_plugin_dir,path);if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,full_path_11750)))
{} else
{if(cljs.core.truth_((function (){var and__3396__auto__ = cljs.core.contains_QMARK_.call(null,new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, ["user.keymap",null,"user.behaviors",null], null), null),path);if(and__3396__auto__)
{return lt.objs.files.exists_QMARK_.call(null,lt.objs.files.lt_user_dir.call(null,[cljs.core.str("/settings/"),cljs.core.str(path)].join('')));
} else
{return and__3396__auto__;
}
})()))
{lt.objs.files.copy.call(null,lt.objs.files.lt_user_dir.call(null,[cljs.core.str("/settings/"),cljs.core.str(path)].join('')),full_path_11750);
} else
{lt.objs.files.copy.call(null,lt.objs.files.lt_home.call(null,lt.objs.files.join.call(null,"core","User",path)),full_path_11750);
}
}
{
var G__11751 = seq__11746;
var G__11752 = chunk__11747;
var G__11753 = count__11748;
var G__11754 = (i__11749 + 1);
seq__11746 = G__11751;
chunk__11747 = G__11752;
count__11748 = G__11753;
i__11749 = G__11754;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__11746);if(temp__4092__auto__)
{var seq__11746__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11746__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__11746__$1);{
var G__11755 = cljs.core.chunk_rest.call(null,seq__11746__$1);
var G__11756 = c__4150__auto__;
var G__11757 = cljs.core.count.call(null,c__4150__auto__);
var G__11758 = 0;
seq__11746 = G__11755;
chunk__11747 = G__11756;
count__11748 = G__11757;
i__11749 = G__11758;
continue;
}
} else
{var path = cljs.core.first.call(null,seq__11746__$1);var full_path_11759 = lt.objs.files.join.call(null,lt.objs.settings.user_plugin_dir,path);if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,full_path_11759)))
{} else
{if(cljs.core.truth_((function (){var and__3396__auto__ = cljs.core.contains_QMARK_.call(null,new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, ["user.keymap",null,"user.behaviors",null], null), null),path);if(and__3396__auto__)
{return lt.objs.files.exists_QMARK_.call(null,lt.objs.files.lt_user_dir.call(null,[cljs.core.str("/settings/"),cljs.core.str(path)].join('')));
} else
{return and__3396__auto__;
}
})()))
{lt.objs.files.copy.call(null,lt.objs.files.lt_user_dir.call(null,[cljs.core.str("/settings/"),cljs.core.str(path)].join('')),full_path_11759);
} else
{lt.objs.files.copy.call(null,lt.objs.files.lt_home.call(null,lt.objs.files.join.call(null,"core","User",path)),full_path_11759);
}
}
{
var G__11760 = cljs.core.next.call(null,seq__11746__$1);
var G__11761 = null;
var G__11762 = 0;
var G__11763 = 0;
seq__11746 = G__11760;
chunk__11747 = G__11761;
count__11748 = G__11762;
i__11749 = G__11763;
continue;
}
}
} else
{return null;
}
}
break;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","create-user-plugin","lt.objs.settings/create-user-plugin",4382856776),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__create_user_plugin,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"create-user-plugin","create-user-plugin",2686594966),null], null), null));
/**
* If the given keymap or behaviors file is in the old map format,
* backs it up and converts it to the flattened vec format.
*/
lt.objs.settings.convert_file = (function convert_file(file){var config = lt.objs.settings.safe_read.call(null,new cljs.core.Keyword(null,"content","content",1965434859).cljs$core$IFn$_invoke$arity$1(lt.objs.files.open_sync.call(null,file)),file);if(cljs.core.map_QMARK_.call(null,config))
{var backup_file = [cljs.core.str(file),cljs.core.str(".bak")].join('');var _ = lt.objs.files.copy.call(null,file,backup_file);var convert_fn = (function (){var G__11765 = lt.objs.files.ext.call(null,file);if(cljs.core._EQ_.call(null,"behaviors",G__11765))
{return lt.objs.settings.map__GT_flat_behaviors;
} else
{if(cljs.core._EQ_.call(null,"keymap",G__11765))
{return lt.objs.settings.map__GT_flat_keymap;
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{return cljs.core.identity;
} else
{return null;
}
}
}
})();var body = [cljs.core.str(";; Your file has been converted to the new flat format.\n"),cljs.core.str(";; Conversion does not preserve comments or indentation.\n"),cljs.core.str(";; File is backed up at "),cljs.core.str(backup_file),cljs.core.str("\n"),cljs.core.str(lt.objs.settings.pprint_flat_behaviors.call(null,convert_fn.call(null,config)))].join('');return lt.objs.files.save.call(null,file,body);
} else
{return null;
}
});
lt.objs.settings.__BEH__flatten_map_settings = (function __BEH__flatten_map_settings(app){var seq__11771 = cljs.core.seq.call(null,cljs.core.filter.call(null,(function (p1__11766_SHARP_){return cljs.core.contains_QMARK_.call(null,new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, ["behaviors",null,"keymap",null], null), null),lt.objs.files.ext.call(null,p1__11766_SHARP_));
}),lt.objs.files.full_path_ls.call(null,lt.objs.settings.user_plugin_dir)));var chunk__11772 = null;var count__11773 = 0;var i__11774 = 0;while(true){
if((i__11774 < count__11773))
{var file = cljs.core._nth.call(null,chunk__11772,i__11774);lt.objs.settings.convert_file.call(null,file);
{
var G__11775 = seq__11771;
var G__11776 = chunk__11772;
var G__11777 = count__11773;
var G__11778 = (i__11774 + 1);
seq__11771 = G__11775;
chunk__11772 = G__11776;
count__11773 = G__11777;
i__11774 = G__11778;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__11771);if(temp__4092__auto__)
{var seq__11771__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11771__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__11771__$1);{
var G__11779 = cljs.core.chunk_rest.call(null,seq__11771__$1);
var G__11780 = c__4150__auto__;
var G__11781 = cljs.core.count.call(null,c__4150__auto__);
var G__11782 = 0;
seq__11771 = G__11779;
chunk__11772 = G__11780;
count__11773 = G__11781;
i__11774 = G__11782;
continue;
}
} else
{var file = cljs.core.first.call(null,seq__11771__$1);lt.objs.settings.convert_file.call(null,file);
{
var G__11783 = cljs.core.next.call(null,seq__11771__$1);
var G__11784 = null;
var G__11785 = 0;
var G__11786 = 0;
seq__11771 = G__11783;
chunk__11772 = G__11784;
count__11773 = G__11785;
i__11774 = G__11786;
continue;
}
}
} else
{return null;
}
}
break;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","flatten-map-settings","lt.objs.settings/flatten-map-settings",824167599),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__flatten_map_settings,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"flatten-map-settings","flatten-map-settings",3992976911),null], null), null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"behaviors.reload","behaviors.reload",2942796600),new cljs.core.Keyword(null,"desc","desc",1016984067),"App: Reload behaviors",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,cljs.core.first.call(null,lt.object.by_tag.call(null,new cljs.core.Keyword(null,"app","app",1014001043))),new cljs.core.Keyword(null,"behaviors.reload","behaviors.reload",2942796600));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"keymaps.reload","keymaps.reload",666881155),new cljs.core.Keyword(null,"desc","desc",1016984067),"App: Reload keymaps",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.objs.settings.load_all_keys.call(null);
lt.objs.keyboard.refresh.call(null);
lt.object.raise.call(null,cljs.core.first.call(null,lt.object.by_tag.call(null,new cljs.core.Keyword(null,"app","app",1014001043))),new cljs.core.Keyword(null,"app.keys.load","app.keys.load",3209213061));
return lt.objs.notifos.set_msg_BANG_.call(null,"keys loaded");
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"behaviors.modify-user","behaviors.modify-user",4216959587),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: User behaviors",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),lt.objs.settings.user_behaviors_path);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"behaviors.view-default","behaviors.view-default",4722027256),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: Default behaviors",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),lt.objs.files.lt_home.call(null,"/settings/default/default.behaviors"));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"behaviors.modify-workspace","behaviors.modify-workspace",1192694945),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: Workspace behaviors",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"opener.open-info","opener.open-info",2298471692),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"path","path",1017337751),"workspace.behaviors",new cljs.core.Keyword(null,"mime","mime",1017255846),"text/x-clojure",new cljs.core.Keyword(null,"name","name",1017277949),"workspace.behaviors",new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"editor.behaviors","editor.behaviors",2095045778),new cljs.core.Keyword(null,"editor.behaviors.workspace","editor.behaviors.workspace",2607887545)], null),new cljs.core.Keyword(null,"content","content",1965434859),new cljs.core.Keyword(null,"ws-behaviors","ws-behaviors",2339346978).cljs$core$IFn$_invoke$arity$2(cljs.core.deref.call(null,lt.objs.workspace.current_ws),"")], null));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"keymap.modify-user","keymap.modify-user",625546911),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: User keymap",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),lt.objs.settings.user_keymap_path);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"keymap.view-default","keymap.view-default",762416700),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: Default keymap",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),lt.objs.files.lt_home.call(null,"/settings/default/default.keymap"));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"user.modify-user","user.modify-user",581252813),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: User script",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),lt.objs.settings.user_cljs_path);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"user.add-user-plugin-to-workspace","user.add-user-plugin-to-workspace",4324437372),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: Add User plugin to workspace",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.folder!","add.folder!",2151595160),lt.objs.settings.user_plugin_dir);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"convert-to-flat-format","convert-to-flat-format",1205600069),new cljs.core.Keyword(null,"desc","desc",1016984067),"Settings: Convert current file to flat format",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.settings.convert_file.call(null,cljs.core.get_in.call(null,cljs.core.deref.call(null,lt.objs.editor.pool.last_active.call(null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"info","info",1017141280),new cljs.core.Keyword(null,"path","path",1017337751)], null)));
})], null));
lt.objs.settings.__BEH__on_close_remove = (function __BEH__on_close_remove(this$){return lt.objs.tabs.rem_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","on-close-remove","lt.objs.settings/on-close-remove",4619688773),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__on_close_remove,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close","close",1108660586),null], null), null));
lt.objs.settings.flat_keymap__GT_map = (function flat_keymap__GT_map(flat){var adds = (function (){var obj11822 = {};return obj11822;
})();var removes = (function (){var obj11824 = {};return obj11824;
})();var seq__11825_11855 = cljs.core.seq.call(null,flat);var chunk__11827_11856 = null;var count__11828_11857 = 0;var i__11829_11858 = 0;while(true){
if((i__11829_11858 < count__11828_11857))
{var vec__11831_11859 = cljs.core._nth.call(null,chunk__11827_11856,i__11829_11858);var tag_11860 = cljs.core.nth.call(null,vec__11831_11859,0,null);var key_11861 = cljs.core.nth.call(null,vec__11831_11859,1,null);var all_11862 = vec__11831_11859;var vec__11832_11863 = (((cljs.core._EQ_.call(null,(lt.objs.settings.keyword__GT_str.call(null,key_11861)[0]),"-")) && ((cljs.core.count.call(null,lt.objs.settings.keyword__GT_str.call(null,key_11861)) > 1)))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [removes,cljs.core.subs.call(null,lt.objs.settings.keyword__GT_str.call(null,key_11861),1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [adds,lt.objs.settings.keyword__GT_str.call(null,key_11861)], null));var coll_11864 = cljs.core.nth.call(null,vec__11832_11863,0,null);var key_11865__$1 = cljs.core.nth.call(null,vec__11832_11863,1,null);var remove_QMARK__11866 = (coll_11864 === removes);var tag_11867__$1 = lt.objs.settings.keyword__GT_str.call(null,tag_11860);if(cljs.core.truth_((coll_11864[tag_11867__$1])))
{} else
{(coll_11864[tag_11867__$1] = ((remove_QMARK__11866)?[]:(function (){var obj11834 = {};return obj11834;
})()));
}
if(remove_QMARK__11866)
{(coll_11864[tag_11867__$1]).push(key_11865__$1);
} else
{((coll_11864[tag_11867__$1])[key_11865__$1] = cljs.core.subvec.call(null,all_11862,2));
}
{
var G__11868 = seq__11825_11855;
var G__11869 = chunk__11827_11856;
var G__11870 = count__11828_11857;
var G__11871 = (i__11829_11858 + 1);
seq__11825_11855 = G__11868;
chunk__11827_11856 = G__11869;
count__11828_11857 = G__11870;
i__11829_11858 = G__11871;
continue;
}
} else
{var temp__4092__auto___11872 = cljs.core.seq.call(null,seq__11825_11855);if(temp__4092__auto___11872)
{var seq__11825_11873__$1 = temp__4092__auto___11872;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11825_11873__$1))
{var c__4150__auto___11874 = cljs.core.chunk_first.call(null,seq__11825_11873__$1);{
var G__11875 = cljs.core.chunk_rest.call(null,seq__11825_11873__$1);
var G__11876 = c__4150__auto___11874;
var G__11877 = cljs.core.count.call(null,c__4150__auto___11874);
var G__11878 = 0;
seq__11825_11855 = G__11875;
chunk__11827_11856 = G__11876;
count__11828_11857 = G__11877;
i__11829_11858 = G__11878;
continue;
}
} else
{var vec__11835_11879 = cljs.core.first.call(null,seq__11825_11873__$1);var tag_11880 = cljs.core.nth.call(null,vec__11835_11879,0,null);var key_11881 = cljs.core.nth.call(null,vec__11835_11879,1,null);var all_11882 = vec__11835_11879;var vec__11836_11883 = (((cljs.core._EQ_.call(null,(lt.objs.settings.keyword__GT_str.call(null,key_11881)[0]),"-")) && ((cljs.core.count.call(null,lt.objs.settings.keyword__GT_str.call(null,key_11881)) > 1)))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [removes,cljs.core.subs.call(null,lt.objs.settings.keyword__GT_str.call(null,key_11881),1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [adds,lt.objs.settings.keyword__GT_str.call(null,key_11881)], null));var coll_11884 = cljs.core.nth.call(null,vec__11836_11883,0,null);var key_11885__$1 = cljs.core.nth.call(null,vec__11836_11883,1,null);var remove_QMARK__11886 = (coll_11884 === removes);var tag_11887__$1 = lt.objs.settings.keyword__GT_str.call(null,tag_11880);if(cljs.core.truth_((coll_11884[tag_11887__$1])))
{} else
{(coll_11884[tag_11887__$1] = ((remove_QMARK__11886)?[]:(function (){var obj11838 = {};return obj11838;
})()));
}
if(remove_QMARK__11886)
{(coll_11884[tag_11887__$1]).push(key_11885__$1);
} else
{((coll_11884[tag_11887__$1])[key_11885__$1] = cljs.core.subvec.call(null,all_11882,2));
}
{
var G__11888 = cljs.core.next.call(null,seq__11825_11873__$1);
var G__11889 = null;
var G__11890 = 0;
var G__11891 = 0;
seq__11825_11855 = G__11888;
chunk__11827_11856 = G__11889;
count__11828_11857 = G__11890;
i__11829_11858 = G__11891;
continue;
}
}
} else
{}
}
break;
}
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"+","+",1013904285),cljs.core.into.call(null,cljs.core.PersistentArrayMap.EMPTY,(function (){var iter__4119__auto__ = (function iter__11839(s__11840){return (new cljs.core.LazySeq(null,(function (){var s__11840__$1 = s__11840;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11840__$1);if(temp__4092__auto__)
{var s__11840__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11840__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11840__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11842 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11841 = 0;while(true){
if((i__11841 < size__4118__auto__))
{var vec__11845 = cljs.core._nth.call(null,c__4117__auto__,i__11841);var tag = cljs.core.nth.call(null,vec__11845,0,null);var keys = cljs.core.nth.call(null,vec__11845,1,null);cljs.core.chunk_append.call(null,b__11842,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword.call(null,tag),keys], null));
{
var G__11892 = (i__11841 + 1);
i__11841 = G__11892;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11842),iter__11839.call(null,cljs.core.chunk_rest.call(null,s__11840__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11842),null);
}
} else
{var vec__11846 = cljs.core.first.call(null,s__11840__$2);var tag = cljs.core.nth.call(null,vec__11846,0,null);var keys = cljs.core.nth.call(null,vec__11846,1,null);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword.call(null,tag),keys], null),iter__11839.call(null,cljs.core.rest.call(null,s__11840__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.js__GT_clj.call(null,adds));
})()),new cljs.core.Keyword(null,"-","-",1013904287),cljs.core.into.call(null,cljs.core.PersistentArrayMap.EMPTY,(function (){var iter__4119__auto__ = (function iter__11847(s__11848){return (new cljs.core.LazySeq(null,(function (){var s__11848__$1 = s__11848;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11848__$1);if(temp__4092__auto__)
{var s__11848__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11848__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11848__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11850 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11849 = 0;while(true){
if((i__11849 < size__4118__auto__))
{var vec__11853 = cljs.core._nth.call(null,c__4117__auto__,i__11849);var tag = cljs.core.nth.call(null,vec__11853,0,null);var keys = cljs.core.nth.call(null,vec__11853,1,null);cljs.core.chunk_append.call(null,b__11850,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword.call(null,tag),keys], null));
{
var G__11893 = (i__11849 + 1);
i__11849 = G__11893;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11850),iter__11847.call(null,cljs.core.chunk_rest.call(null,s__11848__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11850),null);
}
} else
{var vec__11854 = cljs.core.first.call(null,s__11848__$2);var tag = cljs.core.nth.call(null,vec__11854,0,null);var keys = cljs.core.nth.call(null,vec__11854,1,null);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword.call(null,tag),keys], null),iter__11847.call(null,cljs.core.rest.call(null,s__11848__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.js__GT_clj.call(null,removes));
})())], null);
});
lt.objs.settings.map__GT_flat_keymap = (function map__GT_flat_keymap(keymap){var flat = [];var seq__11938_11982 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"+","+",1013904285).cljs$core$IFn$_invoke$arity$1(keymap));var chunk__11945_11983 = null;var count__11946_11984 = 0;var i__11947_11985 = 0;while(true){
if((i__11947_11985 < count__11946_11984))
{var vec__11954_11986 = cljs.core._nth.call(null,chunk__11945_11983,i__11947_11985);var tag_11987 = cljs.core.nth.call(null,vec__11954_11986,0,null);var keys_11988 = cljs.core.nth.call(null,vec__11954_11986,1,null);var seq__11948_11989 = cljs.core.seq.call(null,keys_11988);var chunk__11950_11990 = null;var count__11951_11991 = 0;var i__11952_11992 = 0;while(true){
if((i__11952_11992 < count__11951_11991))
{var vec__11955_11993 = cljs.core._nth.call(null,chunk__11950_11990,i__11952_11992);var key_11994 = cljs.core.nth.call(null,vec__11955_11993,0,null);var commands_11995 = cljs.core.nth.call(null,vec__11955_11993,1,null);var tag_vec_11996 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11987,key_11994], null);flat.push(cljs.core.into.call(null,tag_vec_11996,commands_11995));
{
var G__11997 = seq__11948_11989;
var G__11998 = chunk__11950_11990;
var G__11999 = count__11951_11991;
var G__12000 = (i__11952_11992 + 1);
seq__11948_11989 = G__11997;
chunk__11950_11990 = G__11998;
count__11951_11991 = G__11999;
i__11952_11992 = G__12000;
continue;
}
} else
{var temp__4092__auto___12001 = cljs.core.seq.call(null,seq__11948_11989);if(temp__4092__auto___12001)
{var seq__11948_12002__$1 = temp__4092__auto___12001;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11948_12002__$1))
{var c__4150__auto___12003 = cljs.core.chunk_first.call(null,seq__11948_12002__$1);{
var G__12004 = cljs.core.chunk_rest.call(null,seq__11948_12002__$1);
var G__12005 = c__4150__auto___12003;
var G__12006 = cljs.core.count.call(null,c__4150__auto___12003);
var G__12007 = 0;
seq__11948_11989 = G__12004;
chunk__11950_11990 = G__12005;
count__11951_11991 = G__12006;
i__11952_11992 = G__12007;
continue;
}
} else
{var vec__11956_12008 = cljs.core.first.call(null,seq__11948_12002__$1);var key_12009 = cljs.core.nth.call(null,vec__11956_12008,0,null);var commands_12010 = cljs.core.nth.call(null,vec__11956_12008,1,null);var tag_vec_12011 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_11987,key_12009], null);flat.push(cljs.core.into.call(null,tag_vec_12011,commands_12010));
{
var G__12012 = cljs.core.next.call(null,seq__11948_12002__$1);
var G__12013 = null;
var G__12014 = 0;
var G__12015 = 0;
seq__11948_11989 = G__12012;
chunk__11950_11990 = G__12013;
count__11951_11991 = G__12014;
i__11952_11992 = G__12015;
continue;
}
}
} else
{}
}
break;
}
{
var G__12016 = seq__11938_11982;
var G__12017 = chunk__11945_11983;
var G__12018 = count__11946_11984;
var G__12019 = (i__11947_11985 + 1);
seq__11938_11982 = G__12016;
chunk__11945_11983 = G__12017;
count__11946_11984 = G__12018;
i__11947_11985 = G__12019;
continue;
}
} else
{var temp__4092__auto___12020 = cljs.core.seq.call(null,seq__11938_11982);if(temp__4092__auto___12020)
{var seq__11938_12021__$1 = temp__4092__auto___12020;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11938_12021__$1))
{var c__4150__auto___12022 = cljs.core.chunk_first.call(null,seq__11938_12021__$1);{
var G__12023 = cljs.core.chunk_rest.call(null,seq__11938_12021__$1);
var G__12024 = c__4150__auto___12022;
var G__12025 = cljs.core.count.call(null,c__4150__auto___12022);
var G__12026 = 0;
seq__11938_11982 = G__12023;
chunk__11945_11983 = G__12024;
count__11946_11984 = G__12025;
i__11947_11985 = G__12026;
continue;
}
} else
{var vec__11957_12027 = cljs.core.first.call(null,seq__11938_12021__$1);var tag_12028 = cljs.core.nth.call(null,vec__11957_12027,0,null);var keys_12029 = cljs.core.nth.call(null,vec__11957_12027,1,null);var seq__11939_12030 = cljs.core.seq.call(null,keys_12029);var chunk__11941_12031 = null;var count__11942_12032 = 0;var i__11943_12033 = 0;while(true){
if((i__11943_12033 < count__11942_12032))
{var vec__11958_12034 = cljs.core._nth.call(null,chunk__11941_12031,i__11943_12033);var key_12035 = cljs.core.nth.call(null,vec__11958_12034,0,null);var commands_12036 = cljs.core.nth.call(null,vec__11958_12034,1,null);var tag_vec_12037 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_12028,key_12035], null);flat.push(cljs.core.into.call(null,tag_vec_12037,commands_12036));
{
var G__12038 = seq__11939_12030;
var G__12039 = chunk__11941_12031;
var G__12040 = count__11942_12032;
var G__12041 = (i__11943_12033 + 1);
seq__11939_12030 = G__12038;
chunk__11941_12031 = G__12039;
count__11942_12032 = G__12040;
i__11943_12033 = G__12041;
continue;
}
} else
{var temp__4092__auto___12042__$1 = cljs.core.seq.call(null,seq__11939_12030);if(temp__4092__auto___12042__$1)
{var seq__11939_12043__$1 = temp__4092__auto___12042__$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11939_12043__$1))
{var c__4150__auto___12044 = cljs.core.chunk_first.call(null,seq__11939_12043__$1);{
var G__12045 = cljs.core.chunk_rest.call(null,seq__11939_12043__$1);
var G__12046 = c__4150__auto___12044;
var G__12047 = cljs.core.count.call(null,c__4150__auto___12044);
var G__12048 = 0;
seq__11939_12030 = G__12045;
chunk__11941_12031 = G__12046;
count__11942_12032 = G__12047;
i__11943_12033 = G__12048;
continue;
}
} else
{var vec__11959_12049 = cljs.core.first.call(null,seq__11939_12043__$1);var key_12050 = cljs.core.nth.call(null,vec__11959_12049,0,null);var commands_12051 = cljs.core.nth.call(null,vec__11959_12049,1,null);var tag_vec_12052 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_12028,key_12050], null);flat.push(cljs.core.into.call(null,tag_vec_12052,commands_12051));
{
var G__12053 = cljs.core.next.call(null,seq__11939_12043__$1);
var G__12054 = null;
var G__12055 = 0;
var G__12056 = 0;
seq__11939_12030 = G__12053;
chunk__11941_12031 = G__12054;
count__11942_12032 = G__12055;
i__11943_12033 = G__12056;
continue;
}
}
} else
{}
}
break;
}
{
var G__12057 = cljs.core.next.call(null,seq__11938_12021__$1);
var G__12058 = null;
var G__12059 = 0;
var G__12060 = 0;
seq__11938_11982 = G__12057;
chunk__11945_11983 = G__12058;
count__11946_11984 = G__12059;
i__11947_11985 = G__12060;
continue;
}
}
} else
{}
}
break;
}
var seq__11960_12061 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"-","-",1013904287).cljs$core$IFn$_invoke$arity$1(keymap));var chunk__11967_12062 = null;var count__11968_12063 = 0;var i__11969_12064 = 0;while(true){
if((i__11969_12064 < count__11968_12063))
{var vec__11976_12065 = cljs.core._nth.call(null,chunk__11967_12062,i__11969_12064);var tag_12066 = cljs.core.nth.call(null,vec__11976_12065,0,null);var keys_12067 = cljs.core.nth.call(null,vec__11976_12065,1,null);var seq__11970_12068 = cljs.core.seq.call(null,keys_12067);var chunk__11972_12069 = null;var count__11973_12070 = 0;var i__11974_12071 = 0;while(true){
if((i__11974_12071 < count__11973_12070))
{var key_12072 = cljs.core._nth.call(null,chunk__11972_12069,i__11974_12071);var vec__11977_12073 = ((cljs.core.map_QMARK_.call(null,keys_12067))?key_12072:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [key_12072,cljs.core.PersistentVector.EMPTY], null));var key_12074__$1 = cljs.core.nth.call(null,vec__11977_12073,0,null);var command_12075 = cljs.core.nth.call(null,vec__11977_12073,1,null);var tag_vec_12076 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_12066,[cljs.core.str("-"),cljs.core.str(key_12074__$1)].join('')], null);flat.push(cljs.core.into.call(null,tag_vec_12076,command_12075));
{
var G__12077 = seq__11970_12068;
var G__12078 = chunk__11972_12069;
var G__12079 = count__11973_12070;
var G__12080 = (i__11974_12071 + 1);
seq__11970_12068 = G__12077;
chunk__11972_12069 = G__12078;
count__11973_12070 = G__12079;
i__11974_12071 = G__12080;
continue;
}
} else
{var temp__4092__auto___12081 = cljs.core.seq.call(null,seq__11970_12068);if(temp__4092__auto___12081)
{var seq__11970_12082__$1 = temp__4092__auto___12081;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11970_12082__$1))
{var c__4150__auto___12083 = cljs.core.chunk_first.call(null,seq__11970_12082__$1);{
var G__12084 = cljs.core.chunk_rest.call(null,seq__11970_12082__$1);
var G__12085 = c__4150__auto___12083;
var G__12086 = cljs.core.count.call(null,c__4150__auto___12083);
var G__12087 = 0;
seq__11970_12068 = G__12084;
chunk__11972_12069 = G__12085;
count__11973_12070 = G__12086;
i__11974_12071 = G__12087;
continue;
}
} else
{var key_12088 = cljs.core.first.call(null,seq__11970_12082__$1);var vec__11978_12089 = ((cljs.core.map_QMARK_.call(null,keys_12067))?key_12088:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [key_12088,cljs.core.PersistentVector.EMPTY], null));var key_12090__$1 = cljs.core.nth.call(null,vec__11978_12089,0,null);var command_12091 = cljs.core.nth.call(null,vec__11978_12089,1,null);var tag_vec_12092 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_12066,[cljs.core.str("-"),cljs.core.str(key_12090__$1)].join('')], null);flat.push(cljs.core.into.call(null,tag_vec_12092,command_12091));
{
var G__12093 = cljs.core.next.call(null,seq__11970_12082__$1);
var G__12094 = null;
var G__12095 = 0;
var G__12096 = 0;
seq__11970_12068 = G__12093;
chunk__11972_12069 = G__12094;
count__11973_12070 = G__12095;
i__11974_12071 = G__12096;
continue;
}
}
} else
{}
}
break;
}
{
var G__12097 = seq__11960_12061;
var G__12098 = chunk__11967_12062;
var G__12099 = count__11968_12063;
var G__12100 = (i__11969_12064 + 1);
seq__11960_12061 = G__12097;
chunk__11967_12062 = G__12098;
count__11968_12063 = G__12099;
i__11969_12064 = G__12100;
continue;
}
} else
{var temp__4092__auto___12101 = cljs.core.seq.call(null,seq__11960_12061);if(temp__4092__auto___12101)
{var seq__11960_12102__$1 = temp__4092__auto___12101;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11960_12102__$1))
{var c__4150__auto___12103 = cljs.core.chunk_first.call(null,seq__11960_12102__$1);{
var G__12104 = cljs.core.chunk_rest.call(null,seq__11960_12102__$1);
var G__12105 = c__4150__auto___12103;
var G__12106 = cljs.core.count.call(null,c__4150__auto___12103);
var G__12107 = 0;
seq__11960_12061 = G__12104;
chunk__11967_12062 = G__12105;
count__11968_12063 = G__12106;
i__11969_12064 = G__12107;
continue;
}
} else
{var vec__11979_12108 = cljs.core.first.call(null,seq__11960_12102__$1);var tag_12109 = cljs.core.nth.call(null,vec__11979_12108,0,null);var keys_12110 = cljs.core.nth.call(null,vec__11979_12108,1,null);var seq__11961_12111 = cljs.core.seq.call(null,keys_12110);var chunk__11963_12112 = null;var count__11964_12113 = 0;var i__11965_12114 = 0;while(true){
if((i__11965_12114 < count__11964_12113))
{var key_12115 = cljs.core._nth.call(null,chunk__11963_12112,i__11965_12114);var vec__11980_12116 = ((cljs.core.map_QMARK_.call(null,keys_12110))?key_12115:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [key_12115,cljs.core.PersistentVector.EMPTY], null));var key_12117__$1 = cljs.core.nth.call(null,vec__11980_12116,0,null);var command_12118 = cljs.core.nth.call(null,vec__11980_12116,1,null);var tag_vec_12119 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_12109,[cljs.core.str("-"),cljs.core.str(key_12117__$1)].join('')], null);flat.push(cljs.core.into.call(null,tag_vec_12119,command_12118));
{
var G__12120 = seq__11961_12111;
var G__12121 = chunk__11963_12112;
var G__12122 = count__11964_12113;
var G__12123 = (i__11965_12114 + 1);
seq__11961_12111 = G__12120;
chunk__11963_12112 = G__12121;
count__11964_12113 = G__12122;
i__11965_12114 = G__12123;
continue;
}
} else
{var temp__4092__auto___12124__$1 = cljs.core.seq.call(null,seq__11961_12111);if(temp__4092__auto___12124__$1)
{var seq__11961_12125__$1 = temp__4092__auto___12124__$1;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11961_12125__$1))
{var c__4150__auto___12126 = cljs.core.chunk_first.call(null,seq__11961_12125__$1);{
var G__12127 = cljs.core.chunk_rest.call(null,seq__11961_12125__$1);
var G__12128 = c__4150__auto___12126;
var G__12129 = cljs.core.count.call(null,c__4150__auto___12126);
var G__12130 = 0;
seq__11961_12111 = G__12127;
chunk__11963_12112 = G__12128;
count__11964_12113 = G__12129;
i__11965_12114 = G__12130;
continue;
}
} else
{var key_12131 = cljs.core.first.call(null,seq__11961_12125__$1);var vec__11981_12132 = ((cljs.core.map_QMARK_.call(null,keys_12110))?key_12131:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [key_12131,cljs.core.PersistentVector.EMPTY], null));var key_12133__$1 = cljs.core.nth.call(null,vec__11981_12132,0,null);var command_12134 = cljs.core.nth.call(null,vec__11981_12132,1,null);var tag_vec_12135 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [tag_12109,[cljs.core.str("-"),cljs.core.str(key_12133__$1)].join('')], null);flat.push(cljs.core.into.call(null,tag_vec_12135,command_12134));
{
var G__12136 = cljs.core.next.call(null,seq__11961_12125__$1);
var G__12137 = null;
var G__12138 = 0;
var G__12139 = 0;
seq__11961_12111 = G__12136;
chunk__11963_12112 = G__12137;
count__11964_12113 = G__12138;
i__11965_12114 = G__12139;
continue;
}
}
} else
{}
}
break;
}
{
var G__12140 = cljs.core.next.call(null,seq__11960_12102__$1);
var G__12141 = null;
var G__12142 = 0;
var G__12143 = 0;
seq__11960_12061 = G__12140;
chunk__11967_12062 = G__12141;
count__11968_12063 = G__12142;
i__11969_12064 = G__12143;
continue;
}
}
} else
{}
}
break;
}
return cljs.core.vec.call(null,cljs.core.sort_by.call(null,cljs.core.first,cljs.core.js__GT_clj.call(null,flat)));
});
lt.objs.settings.parse_key_file = (function parse_key_file(file){var keys = lt.objs.settings.safe_read.call(null,new cljs.core.Keyword(null,"content","content",1965434859).cljs$core$IFn$_invoke$arity$1(lt.objs.files.open_sync.call(null,file)),file);if(cljs.core.map_QMARK_.call(null,keys))
{return keys;
} else
{if(cljs.core.vector_QMARK_.call(null,keys))
{return lt.objs.settings.flat_keymap__GT_map.call(null,keys);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{return lt.objs.console.error.call(null,[cljs.core.str("Invalid keymap file: "),cljs.core.str(file),cljs.core.str(". Keymaps must be either a vector or a map.")].join(''));
} else
{return null;
}
}
}
});
lt.objs.settings.keymap_diffs_in = (function keymap_diffs_in(path){if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,path)))
{return cljs.core.map.call(null,lt.objs.settings.parse_key_file,cljs.core.filter.call(null,(function (p1__12144_SHARP_){return cljs.core._EQ_.call(null,lt.objs.files.ext.call(null,p1__12144_SHARP_),"keymap");
}),lt.objs.files.full_path_ls.call(null,path)));
} else
{return null;
}
});
lt.objs.settings.__BEH__default_keymap_diffs = (function __BEH__default_keymap_diffs(this$,diffs){return cljs.core.concat.call(null,diffs,lt.objs.settings.keymap_diffs_in.call(null,lt.objs.files.lt_home.call(null,"/settings/default/")));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","default-keymap-diffs","lt.objs.settings/default-keymap-diffs",3391340802),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__default_keymap_diffs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keymap.diffs.default+","keymap.diffs.default+",711992781),null], null), null));
lt.objs.settings.__BEH__user_keymap_diffs = (function __BEH__user_keymap_diffs(this$,diffs){return cljs.core.concat.call(null,diffs,lt.objs.settings.keymap_diffs_in.call(null,lt.objs.settings.user_plugin_dir));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","user-keymap-diffs","lt.objs.settings/user-keymap-diffs",3926753964),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__user_keymap_diffs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keymap.diffs.user+","keymap.diffs.user+",1410763393),null], null), null));
lt.objs.settings.pair_keybindings = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"editor.keys.normal","editor.keys.normal",2927389330),new cljs.core.PersistentArrayMap(null, 7, ["\"",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.repeat-pair","editor.repeat-pair",1820110909),"\"")], null),"(",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.open-pair","editor.open-pair",4001431726),"(")], null),")",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.close-pair","editor.close-pair",2068601890),")")], null),"[",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.open-pair","editor.open-pair",4001431726),"[")], null),"{",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.open-pair","editor.open-pair",4001431726),"{")], null),"]",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.close-pair","editor.close-pair",2068601890),"]")], null),"}",new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Keyword(null,"editor.close-pair","editor.close-pair",2068601890),"}")], null)], null)], null);
lt.objs.settings.__BEH__pair_keymap_diffs = (function __BEH__pair_keymap_diffs(this$,diffs){return cljs.core.concat.call(null,diffs,cljs.core._conj.call(null,cljs.core.List.EMPTY,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"+","+",1013904285),lt.objs.settings.pair_keybindings], null)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","pair-keymap-diffs","lt.objs.settings/pair-keymap-diffs",3790818555),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__pair_keymap_diffs,new cljs.core.Keyword(null,"desc","desc",1016984067),"Editor: auto-close parens/brackets/quotes/pairs",new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keymap.diffs.user+","keymap.diffs.user+",1410763393),null], null), null),new cljs.core.Keyword(null,"type","type",1017479852),new cljs.core.Keyword(null,"user","user",1017503549));
lt.objs.settings.__BEH__on_behaviors_editor_save = (function __BEH__on_behaviors_editor_save(editor){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"behaviors.reload","behaviors.reload",2942796600));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","on-behaviors-editor-save","lt.objs.settings/on-behaviors-editor-save",3927833097),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__on_behaviors_editor_save,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"saved","saved",1123115513),null], null), null));
lt.objs.settings.__BEH__on_keymap_editor_save = (function __BEH__on_keymap_editor_save(editor){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"keymaps.reload","keymaps.reload",666881155));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.settings","on-keymap-editor-save","lt.objs.settings/on-keymap-editor-save",1834857841),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.settings.__BEH__on_keymap_editor_save,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"saved","saved",1123115513),null], null), null));
lt.object.tag_behaviors.call(null,new cljs.core.Keyword(null,"app","app",1014001043),new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("lt.objs.settings","initial-behaviors","lt.objs.settings/initial-behaviors",1554007604),new cljs.core.Keyword("lt.objs.settings","create-user-plugin","lt.objs.settings/create-user-plugin",4382856776),new cljs.core.Keyword("lt.objs.settings","flatten-map-settings","lt.objs.settings/flatten-map-settings",824167599),new cljs.core.Keyword("lt.objs.settings","load-behaviors","lt.objs.settings/load-behaviors",1077508690),new cljs.core.Keyword("lt.objs.settings","default-behavior-diffs","lt.objs.settings/default-behavior-diffs",3478385645),new cljs.core.Keyword("lt.objs.settings","user-behavior-diffs","lt.objs.settings/user-behavior-diffs",2390870839),new cljs.core.Keyword("lt.objs.settings","default-keymap-diffs","lt.objs.settings/default-keymap-diffs",3391340802),new cljs.core.Keyword("lt.objs.settings","user-keymap-diffs","lt.objs.settings/user-keymap-diffs",3926753964)], null));

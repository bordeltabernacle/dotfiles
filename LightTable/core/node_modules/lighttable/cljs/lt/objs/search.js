// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.search');
goog.require('cljs.core');
goog.require('crate.binding');
goog.require('lt.util.js');
goog.require('lt.objs.thread');
goog.require('lt.objs.files');
goog.require('lt.util.js');
goog.require('lt.util.dom');
goog.require('lt.objs.context');
goog.require('lt.objs.platform');
goog.require('lt.objs.tabs');
goog.require('crate.core');
goog.require('lt.objs.workspace');
goog.require('lt.objs.context');
goog.require('lt.objs.notifos');
goog.require('lt.objs.proc');
goog.require('lt.objs.notifos');
goog.require('lt.util.dom');
goog.require('lt.objs.editor.pool');
goog.require('clojure.string');
goog.require('lt.objs.command');
goog.require('lt.objs.platform');
goog.require('lt.objs.files');
goog.require('lt.objs.thread');
goog.require('lt.util.load');
goog.require('clojure.string');
goog.require('lt.objs.workspace');
goog.require('crate.binding');
goog.require('lt.objs.editor');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.util.load');
goog.require('lt.objs.proc');
goog.require('lt.objs.tabs');
goog.require('lt.objs.editor');
goog.require('crate.core');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.command');
lt.objs.search.search_BANG_ = lt.objs.thread.thread_STAR_.call(null,(function tfun11129(){var orig__4408__auto__ = argsArray(arguments);var msg__4409__auto__ = orig__4408__auto__.shift();var args__4410__auto__ = orig__4408__auto__.map(cljs.reader.read_string);var raise = ((function (orig__4408__auto__,msg__4409__auto__,args__4410__auto__){
return (function (obj__4411__auto__,k__4412__auto__,v__4413__auto__){return _send(obj__4411__auto__,k__4412__auto__,cljs.core.pr_str.call(null,v__4413__auto__),"clj");
});})(orig__4408__auto__,msg__4409__auto__,args__4410__auto__))
;args__4410__auto__.unshift(msg__4409__auto__.obj);
return (function (obj_id,opts){var replacer = require([cljs.core.str(ltpath),cljs.core.str("/core/node_modules/replace")].join(''));var search = (function (){var temp__4090__auto__ = cljs.core.re_seq.call(null,/^\/(.+)\/$/,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(opts));if(cljs.core.truth_(temp__4090__auto__))
{var pattern = temp__4090__auto__;return (new RegExp(cljs.core.second.call(null,cljs.core.first.call(null,pattern))));
} else
{return new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(opts);
}
})();var final$ = replacer.call(null,cljs.core.clj__GT_js.call(null,new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"regex","regex",1122296761),search,new cljs.core.Keyword(null,"exclude","exclude",3987722572),(cljs.core.truth_(new cljs.core.Keyword(null,"exclude","exclude",3987722572).cljs$core$IFn$_invoke$arity$1(opts))?(new RegExp(new cljs.core.Keyword(null,"exclude","exclude",3987722572).cljs$core$IFn$_invoke$arity$1(opts))):null),new cljs.core.Keyword(null,"recursive","recursive",2179684260),true,new cljs.core.Keyword(null,"ignoreCase","ignoreCase",1893967764),!(cljs.core.boolean$.call(null,cljs.core.re_seq.call(null,/[A-Z]/,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(opts)))),new cljs.core.Keyword(null,"replacement","replacement",1444823428),new cljs.core.Keyword(null,"replacement","replacement",1444823428).cljs$core$IFn$_invoke$arity$1(opts),new cljs.core.Keyword(null,"paths","paths",1120343136),new cljs.core.Keyword(null,"paths","paths",1120343136).cljs$core$IFn$_invoke$arity$1(opts),new cljs.core.Keyword(null,"result","result",4374444943),((function (replacer,search){
return (function (r){return _send(obj_id,new cljs.core.Keyword(null,"result","result",4374444943),r);
});})(replacer,search))
], null)));return raise.call(null,obj_id,new cljs.core.Keyword(null,"done-searching","done-searching",1230467105),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"total","total",1124454070),final$.totalFiles,new cljs.core.Keyword(null,"time","time",1017464383),final$.time,new cljs.core.Keyword(null,"replace?","replace?",583571325),cljs.core.boolean$.call(null,new cljs.core.Keyword(null,"replacement","replacement",1444823428).cljs$core$IFn$_invoke$arity$1(opts))], null));
}).apply(null,args__4410__auto__);
}));
lt.objs.search.result_threshold = 500;
lt.objs.search.location = (function (){var method_table__4260__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var prefer_table__4261__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var method_cache__4262__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var cached_hierarchy__4263__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var hierarchy__4264__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",3129050535),cljs.core.get_global_hierarchy.call(null));return (new cljs.core.MultiFn("location",cljs.core.identity,new cljs.core.Keyword(null,"default","default",2558708147),hierarchy__4264__auto__,method_table__4260__auto__,prefer_table__4261__auto__,method_cache__4262__auto__,cached_hierarchy__4263__auto__));
})();
cljs.core._add_method.call(null,lt.objs.search.location,"<workspace>",(function (_){return cljs.core.apply.call(null,cljs.core.concat,cljs.core.juxt.call(null,new cljs.core.Keyword(null,"folders","folders",4625622327),new cljs.core.Keyword(null,"files","files",1111338473)).call(null,lt.objs.workspace.serialize.call(null,cljs.core.deref.call(null,lt.objs.workspace.current_ws))));
}));
cljs.core._add_method.call(null,lt.objs.search.location,new cljs.core.Keyword(null,"default","default",2558708147),(function (loc){return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [loc], null);
}));
lt.objs.search.string__GT_loc = (function string__GT_loc(loc_str){return cljs.core.mapcat.call(null,cljs.core.comp.call(null,lt.objs.search.location,clojure.string.trim),cljs.core.remove.call(null,cljs.core.empty_QMARK_,clojure.string.split.call(null,loc_str,",")));
});
lt.objs.search.__GT_res = (function __GT_res(this$){return lt.util.dom.$.call(null,new cljs.core.Keyword(null,".res",".res",1015387428),lt.object.__GT_content.call(null,this$));
});
lt.objs.search.__GT_entry = (function __GT_entry(r,file){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.entry","p.entry",3043677414),crate.core.raw.call(null,[cljs.core.str("<span class='line'>"),cljs.core.str(r.line),cljs.core.str("</span><pre>"),cljs.core.str(r.text),cljs.core.str("</pre>")].join(''))], null));var seq__11136_11142 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),file);
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"goto-line","goto-line",2802035088),r.line);
})], null)));var chunk__11137_11143 = null;var count__11138_11144 = 0;var i__11139_11145 = 0;while(true){
if((i__11139_11145 < count__11138_11144))
{var vec__11140_11146 = cljs.core._nth.call(null,chunk__11137_11143,i__11139_11145);var ev__4336__auto___11147 = cljs.core.nth.call(null,vec__11140_11146,0,null);var func__4337__auto___11148 = cljs.core.nth.call(null,vec__11140_11146,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11147,func__4337__auto___11148);
{
var G__11149 = seq__11136_11142;
var G__11150 = chunk__11137_11143;
var G__11151 = count__11138_11144;
var G__11152 = (i__11139_11145 + 1);
seq__11136_11142 = G__11149;
chunk__11137_11143 = G__11150;
count__11138_11144 = G__11151;
i__11139_11145 = G__11152;
continue;
}
} else
{var temp__4092__auto___11153 = cljs.core.seq.call(null,seq__11136_11142);if(temp__4092__auto___11153)
{var seq__11136_11154__$1 = temp__4092__auto___11153;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11136_11154__$1))
{var c__4150__auto___11155 = cljs.core.chunk_first.call(null,seq__11136_11154__$1);{
var G__11156 = cljs.core.chunk_rest.call(null,seq__11136_11154__$1);
var G__11157 = c__4150__auto___11155;
var G__11158 = cljs.core.count.call(null,c__4150__auto___11155);
var G__11159 = 0;
seq__11136_11142 = G__11156;
chunk__11137_11143 = G__11157;
count__11138_11144 = G__11158;
i__11139_11145 = G__11159;
continue;
}
} else
{var vec__11141_11160 = cljs.core.first.call(null,seq__11136_11154__$1);var ev__4336__auto___11161 = cljs.core.nth.call(null,vec__11141_11160,0,null);var func__4337__auto___11162 = cljs.core.nth.call(null,vec__11141_11160,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11161,func__4337__auto___11162);
{
var G__11163 = cljs.core.next.call(null,seq__11136_11154__$1);
var G__11164 = null;
var G__11165 = 0;
var G__11166 = 0;
seq__11136_11142 = G__11163;
chunk__11137_11143 = G__11164;
count__11138_11144 = G__11165;
i__11139_11145 = G__11166;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.__GT_result_item = (function __GT_result_item(r){var e__4335__auto__ = crate.core.html.call(null,(function (){var file = r.file;return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.path","p.path",4266284629),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.file","span.file",4619643154),lt.objs.files.basename.call(null,file)], null),"(",lt.objs.files.parent.call(null,file),")"], null),(function (){var iter__4119__auto__ = ((function (file){
return (function iter__11177(s__11178){return (new cljs.core.LazySeq(null,((function (file){
return (function (){var s__11178__$1 = s__11178;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11178__$1);if(temp__4092__auto__)
{var s__11178__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11178__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11178__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11180 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11179 = 0;while(true){
if((i__11179 < size__4118__auto__))
{var r__$1 = cljs.core._nth.call(null,c__4117__auto__,i__11179);cljs.core.chunk_append.call(null,b__11180,lt.objs.search.__GT_entry.call(null,r__$1,file));
{
var G__11187 = (i__11179 + 1);
i__11179 = G__11187;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11180),iter__11177.call(null,cljs.core.chunk_rest.call(null,s__11178__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11180),null);
}
} else
{var r__$1 = cljs.core.first.call(null,s__11178__$2);return cljs.core.cons.call(null,lt.objs.search.__GT_entry.call(null,r__$1,file),iter__11177.call(null,cljs.core.rest.call(null,s__11178__$2)));
}
} else
{return null;
}
break;
}
});})(file))
,null,null));
});})(file))
;return iter__4119__auto__.call(null,r.results);
})()], null);
})());var seq__11181_11188 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__11182_11189 = null;var count__11183_11190 = 0;var i__11184_11191 = 0;while(true){
if((i__11184_11191 < count__11183_11190))
{var vec__11185_11192 = cljs.core._nth.call(null,chunk__11182_11189,i__11184_11191);var ev__4336__auto___11193 = cljs.core.nth.call(null,vec__11185_11192,0,null);var func__4337__auto___11194 = cljs.core.nth.call(null,vec__11185_11192,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11193,func__4337__auto___11194);
{
var G__11195 = seq__11181_11188;
var G__11196 = chunk__11182_11189;
var G__11197 = count__11183_11190;
var G__11198 = (i__11184_11191 + 1);
seq__11181_11188 = G__11195;
chunk__11182_11189 = G__11196;
count__11183_11190 = G__11197;
i__11184_11191 = G__11198;
continue;
}
} else
{var temp__4092__auto___11199 = cljs.core.seq.call(null,seq__11181_11188);if(temp__4092__auto___11199)
{var seq__11181_11200__$1 = temp__4092__auto___11199;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11181_11200__$1))
{var c__4150__auto___11201 = cljs.core.chunk_first.call(null,seq__11181_11200__$1);{
var G__11202 = cljs.core.chunk_rest.call(null,seq__11181_11200__$1);
var G__11203 = c__4150__auto___11201;
var G__11204 = cljs.core.count.call(null,c__4150__auto___11201);
var G__11205 = 0;
seq__11181_11188 = G__11202;
chunk__11182_11189 = G__11203;
count__11183_11190 = G__11204;
i__11184_11191 = G__11205;
continue;
}
} else
{var vec__11186_11206 = cljs.core.first.call(null,seq__11181_11200__$1);var ev__4336__auto___11207 = cljs.core.nth.call(null,vec__11186_11206,0,null);var func__4337__auto___11208 = cljs.core.nth.call(null,vec__11186_11206,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11207,func__4337__auto___11208);
{
var G__11209 = cljs.core.next.call(null,seq__11181_11200__$1);
var G__11210 = null;
var G__11211 = 0;
var G__11212 = 0;
seq__11181_11188 = G__11209;
chunk__11182_11189 = G__11210;
count__11183_11190 = G__11211;
i__11184_11191 = G__11212;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.search_box = (function search_box(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.search","input.search",1599745982),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"placeholder","placeholder",1612151013),"Search"], null)], null));var seq__11219_11225 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.search","searcher.search",1646738643),this$);
return lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input.search","input.search",1599745982),lt.object.__GT_content.call(null,this$)).select();
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.search","searcher.search",1646738643));
})], null)));var chunk__11220_11226 = null;var count__11221_11227 = 0;var i__11222_11228 = 0;while(true){
if((i__11222_11228 < count__11221_11227))
{var vec__11223_11229 = cljs.core._nth.call(null,chunk__11220_11226,i__11222_11228);var ev__4336__auto___11230 = cljs.core.nth.call(null,vec__11223_11229,0,null);var func__4337__auto___11231 = cljs.core.nth.call(null,vec__11223_11229,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11230,func__4337__auto___11231);
{
var G__11232 = seq__11219_11225;
var G__11233 = chunk__11220_11226;
var G__11234 = count__11221_11227;
var G__11235 = (i__11222_11228 + 1);
seq__11219_11225 = G__11232;
chunk__11220_11226 = G__11233;
count__11221_11227 = G__11234;
i__11222_11228 = G__11235;
continue;
}
} else
{var temp__4092__auto___11236 = cljs.core.seq.call(null,seq__11219_11225);if(temp__4092__auto___11236)
{var seq__11219_11237__$1 = temp__4092__auto___11236;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11219_11237__$1))
{var c__4150__auto___11238 = cljs.core.chunk_first.call(null,seq__11219_11237__$1);{
var G__11239 = cljs.core.chunk_rest.call(null,seq__11219_11237__$1);
var G__11240 = c__4150__auto___11238;
var G__11241 = cljs.core.count.call(null,c__4150__auto___11238);
var G__11242 = 0;
seq__11219_11225 = G__11239;
chunk__11220_11226 = G__11240;
count__11221_11227 = G__11241;
i__11222_11228 = G__11242;
continue;
}
} else
{var vec__11224_11243 = cljs.core.first.call(null,seq__11219_11237__$1);var ev__4336__auto___11244 = cljs.core.nth.call(null,vec__11224_11243,0,null);var func__4337__auto___11245 = cljs.core.nth.call(null,vec__11224_11243,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11244,func__4337__auto___11245);
{
var G__11246 = cljs.core.next.call(null,seq__11219_11237__$1);
var G__11247 = null;
var G__11248 = 0;
var G__11249 = 0;
seq__11219_11225 = G__11246;
chunk__11220_11226 = G__11247;
count__11221_11227 = G__11248;
i__11222_11228 = G__11249;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.replace_box = (function replace_box(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.replace","input.replace",1121297410),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"placeholder","placeholder",1612151013),"Replace"], null)], null));var seq__11256_11262 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace","searcher.replace",2578069901),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace","searcher.replace",2578069901));
})], null)));var chunk__11257_11263 = null;var count__11258_11264 = 0;var i__11259_11265 = 0;while(true){
if((i__11259_11265 < count__11258_11264))
{var vec__11260_11266 = cljs.core._nth.call(null,chunk__11257_11263,i__11259_11265);var ev__4336__auto___11267 = cljs.core.nth.call(null,vec__11260_11266,0,null);var func__4337__auto___11268 = cljs.core.nth.call(null,vec__11260_11266,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11267,func__4337__auto___11268);
{
var G__11269 = seq__11256_11262;
var G__11270 = chunk__11257_11263;
var G__11271 = count__11258_11264;
var G__11272 = (i__11259_11265 + 1);
seq__11256_11262 = G__11269;
chunk__11257_11263 = G__11270;
count__11258_11264 = G__11271;
i__11259_11265 = G__11272;
continue;
}
} else
{var temp__4092__auto___11273 = cljs.core.seq.call(null,seq__11256_11262);if(temp__4092__auto___11273)
{var seq__11256_11274__$1 = temp__4092__auto___11273;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11256_11274__$1))
{var c__4150__auto___11275 = cljs.core.chunk_first.call(null,seq__11256_11274__$1);{
var G__11276 = cljs.core.chunk_rest.call(null,seq__11256_11274__$1);
var G__11277 = c__4150__auto___11275;
var G__11278 = cljs.core.count.call(null,c__4150__auto___11275);
var G__11279 = 0;
seq__11256_11262 = G__11276;
chunk__11257_11263 = G__11277;
count__11258_11264 = G__11278;
i__11259_11265 = G__11279;
continue;
}
} else
{var vec__11261_11280 = cljs.core.first.call(null,seq__11256_11274__$1);var ev__4336__auto___11281 = cljs.core.nth.call(null,vec__11261_11280,0,null);var func__4337__auto___11282 = cljs.core.nth.call(null,vec__11261_11280,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11281,func__4337__auto___11282);
{
var G__11283 = cljs.core.next.call(null,seq__11256_11274__$1);
var G__11284 = null;
var G__11285 = 0;
var G__11286 = 0;
seq__11256_11262 = G__11283;
chunk__11257_11263 = G__11284;
count__11258_11264 = G__11285;
i__11259_11265 = G__11286;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.replace_all_button = (function replace_all_button(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.replace","button.replace",910855018),"all"], null));var seq__11293_11299 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (e){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace-all","searcher.replace-all",1613341281));
})], null)));var chunk__11294_11300 = null;var count__11295_11301 = 0;var i__11296_11302 = 0;while(true){
if((i__11296_11302 < count__11295_11301))
{var vec__11297_11303 = cljs.core._nth.call(null,chunk__11294_11300,i__11296_11302);var ev__4336__auto___11304 = cljs.core.nth.call(null,vec__11297_11303,0,null);var func__4337__auto___11305 = cljs.core.nth.call(null,vec__11297_11303,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11304,func__4337__auto___11305);
{
var G__11306 = seq__11293_11299;
var G__11307 = chunk__11294_11300;
var G__11308 = count__11295_11301;
var G__11309 = (i__11296_11302 + 1);
seq__11293_11299 = G__11306;
chunk__11294_11300 = G__11307;
count__11295_11301 = G__11308;
i__11296_11302 = G__11309;
continue;
}
} else
{var temp__4092__auto___11310 = cljs.core.seq.call(null,seq__11293_11299);if(temp__4092__auto___11310)
{var seq__11293_11311__$1 = temp__4092__auto___11310;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11293_11311__$1))
{var c__4150__auto___11312 = cljs.core.chunk_first.call(null,seq__11293_11311__$1);{
var G__11313 = cljs.core.chunk_rest.call(null,seq__11293_11311__$1);
var G__11314 = c__4150__auto___11312;
var G__11315 = cljs.core.count.call(null,c__4150__auto___11312);
var G__11316 = 0;
seq__11293_11299 = G__11313;
chunk__11294_11300 = G__11314;
count__11295_11301 = G__11315;
i__11296_11302 = G__11316;
continue;
}
} else
{var vec__11298_11317 = cljs.core.first.call(null,seq__11293_11311__$1);var ev__4336__auto___11318 = cljs.core.nth.call(null,vec__11298_11317,0,null);var func__4337__auto___11319 = cljs.core.nth.call(null,vec__11298_11317,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11318,func__4337__auto___11319);
{
var G__11320 = cljs.core.next.call(null,seq__11293_11311__$1);
var G__11321 = null;
var G__11322 = 0;
var G__11323 = 0;
seq__11293_11299 = G__11320;
chunk__11294_11300 = G__11321;
count__11295_11301 = G__11322;
i__11296_11302 = G__11323;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.location_box = (function location_box(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.loc","input.loc",2719736462),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"placeholder","placeholder",1612151013),"Locations",new cljs.core.Keyword(null,"value","value",1125876963),"<workspace>"], null)], null));var seq__11330_11336 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.location","searcher.location",4589776032),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.location","searcher.location",4589776032));
})], null)));var chunk__11331_11337 = null;var count__11332_11338 = 0;var i__11333_11339 = 0;while(true){
if((i__11333_11339 < count__11332_11338))
{var vec__11334_11340 = cljs.core._nth.call(null,chunk__11331_11337,i__11333_11339);var ev__4336__auto___11341 = cljs.core.nth.call(null,vec__11334_11340,0,null);var func__4337__auto___11342 = cljs.core.nth.call(null,vec__11334_11340,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11341,func__4337__auto___11342);
{
var G__11343 = seq__11330_11336;
var G__11344 = chunk__11331_11337;
var G__11345 = count__11332_11338;
var G__11346 = (i__11333_11339 + 1);
seq__11330_11336 = G__11343;
chunk__11331_11337 = G__11344;
count__11332_11338 = G__11345;
i__11333_11339 = G__11346;
continue;
}
} else
{var temp__4092__auto___11347 = cljs.core.seq.call(null,seq__11330_11336);if(temp__4092__auto___11347)
{var seq__11330_11348__$1 = temp__4092__auto___11347;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11330_11348__$1))
{var c__4150__auto___11349 = cljs.core.chunk_first.call(null,seq__11330_11348__$1);{
var G__11350 = cljs.core.chunk_rest.call(null,seq__11330_11348__$1);
var G__11351 = c__4150__auto___11349;
var G__11352 = cljs.core.count.call(null,c__4150__auto___11349);
var G__11353 = 0;
seq__11330_11336 = G__11350;
chunk__11331_11337 = G__11351;
count__11332_11338 = G__11352;
i__11333_11339 = G__11353;
continue;
}
} else
{var vec__11335_11354 = cljs.core.first.call(null,seq__11330_11348__$1);var ev__4336__auto___11355 = cljs.core.nth.call(null,vec__11335_11354,0,null);var func__4337__auto___11356 = cljs.core.nth.call(null,vec__11335_11354,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11355,func__4337__auto___11356);
{
var G__11357 = cljs.core.next.call(null,seq__11330_11348__$1);
var G__11358 = null;
var G__11359 = 0;
var G__11360 = 0;
seq__11330_11336 = G__11357;
chunk__11331_11337 = G__11358;
count__11332_11338 = G__11359;
i__11333_11339 = G__11360;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.__GT_search_info = (function __GT_search_info(this$){var search = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",2278031048),lt.object.__GT_content.call(null,this$));var replace = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".replace",".replace",673297976),lt.object.__GT_content.call(null,this$));var loc = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".loc",".loc",1015381956),lt.object.__GT_content.call(null,this$));return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"search","search",4402534682),lt.util.dom.val.call(null,search),new cljs.core.Keyword(null,"replace","replace",2108401190),lt.util.dom.val.call(null,replace),new cljs.core.Keyword(null,"loc","loc",1014011570),lt.util.dom.val.call(null,loc)], null);
});
lt.objs.search.__BEH__on_close = (function __BEH__on_close(this$){return lt.objs.tabs.rem_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","on-close","lt.objs.search/on-close",852635541),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__on_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close","close",1108660586),null], null), null));
lt.objs.search.__BEH__clear_BANG_ = (function __BEH__clear_BANG_(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"timeout","timeout",3994960083),null,new cljs.core.Keyword(null,"results","results",2111450984),[],new cljs.core.Keyword(null,"result-count","result-count",4392277713),0,new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424),null,new cljs.core.Keyword("lt.objs.search","filesSearched","lt.objs.search/filesSearched",2511844033),null,new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,-1], null)], null));
return lt.util.dom.empty.call(null,lt.objs.search.__GT_res.call(null,this$));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","clear!","lt.objs.search/clear!",4760733279),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__clear_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null));
lt.objs.search.__BEH__search_BANG_ = (function __BEH__search_BANG_(this$,search_info){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
var info = (function (){var or__3408__auto__ = search_info;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.search.__GT_search_info.call(null,this$);
}
})();if(cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(info)))
{return null;
} else
{lt.object.merge_BANG_.call(null,this$,info);
lt.objs.notifos.working.call(null,"Searching workspace...");
return lt.objs.search.search_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"exclude","exclude",3987722572),lt.objs.files.ignore_pattern.source,new cljs.core.Keyword(null,"paths","paths",1120343136),lt.objs.search.string__GT_loc.call(null,new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","search!","lt.objs.search/search!",3582214748),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__search_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"search!","search!",2982232811),null], null), null));
lt.objs.search.__BEH__replace_BANG_ = (function __BEH__replace_BANG_(this$){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
var info = lt.objs.search.__GT_search_info.call(null,this$);if(cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(info)))
{return null;
} else
{lt.object.merge_BANG_.call(null,this$,info);
lt.objs.notifos.working.call(null,"Replacing all in workspace...");
return lt.objs.search.search_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"replacement","replacement",1444823428),new cljs.core.Keyword(null,"replace","replace",2108401190).cljs$core$IFn$_invoke$arity$1(info),new cljs.core.Keyword(null,"exclude","exclude",3987722572),lt.objs.files.ignore_pattern.source,new cljs.core.Keyword(null,"paths","paths",1120343136),lt.objs.search.string__GT_loc.call(null,new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","replace!","lt.objs.search/replace!",1148909304),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__replace_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"replace!","replace!",583571295),null], null), null));
lt.objs.search.__BEH__done_searching = (function __BEH__done_searching(this$,info){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424),(new cljs.core.Keyword(null,"time","time",1017464383).cljs$core$IFn$_invoke$arity$1(info) / 1000),new cljs.core.Keyword("lt.objs.search","filesSearched","lt.objs.search/filesSearched",2511844033),new cljs.core.Keyword(null,"total","total",1124454070).cljs$core$IFn$_invoke$arity$1(info)], null));
if(cljs.core.truth_(new cljs.core.Keyword(null,"replace?","replace?",583571325).cljs$core$IFn$_invoke$arity$1(info)))
{lt.objs.notifos.done_working.call(null,[cljs.core.str("Replaced "),cljs.core.str(new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" results in "),cljs.core.str((new cljs.core.Keyword(null,"time","time",1017464383).cljs$core$IFn$_invoke$arity$1(info) / 1000)),cljs.core.str("s.")].join(''));
return lt.util.dom.empty.call(null,lt.objs.search.__GT_res.call(null,this$));
} else
{return lt.objs.notifos.done_working.call(null,[cljs.core.str("Found "),cljs.core.str(new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" results searching "),cljs.core.str(new cljs.core.Keyword(null,"total","total",1124454070).cljs$core$IFn$_invoke$arity$1(info)),cljs.core.str(" files in "),cljs.core.str((new cljs.core.Keyword(null,"time","time",1017464383).cljs$core$IFn$_invoke$arity$1(info) / 1000)),cljs.core.str("s.")].join(''));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","done-searching","lt.objs.search/done-searching",1038716850),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__done_searching,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"done-searching","done-searching",1230467105),null], null), null));
lt.objs.search.__BEH__next_BANG_ = (function __BEH__next_BANG_(this$){if((new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).length > 0))
{var all = new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var vec__11363 = new cljs.core.Keyword(null,"position","position",1761709211).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var file = cljs.core.nth.call(null,vec__11363,0,null);var result = cljs.core.nth.call(null,vec__11363,1,null);var cur = (all[file]);var vec__11364 = ((((result + 1) >= cur.results.length))?((((file + 1) >= all.length))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,0], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(file + 1),0], null)):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file,(result + 1)], null));var file__$1 = cljs.core.nth.call(null,vec__11364,0,null);var result__$1 = cljs.core.nth.call(null,vec__11364,1,null);var neue = (all[file__$1]);lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file__$1,result__$1], null)], null));
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),neue.file);
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"goto-line","goto-line",2802035088),(neue.results[result__$1]).line);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","next!","lt.objs.search/next!",614385297),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__next_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"next!","next!",1118619392),null], null), null));
lt.objs.search.__BEH__prev_BANG_ = (function __BEH__prev_BANG_(this$){if((new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).length > 0))
{var all = new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var vec__11367 = new cljs.core.Keyword(null,"position","position",1761709211).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var file = cljs.core.nth.call(null,vec__11367,0,null);var result = cljs.core.nth.call(null,vec__11367,1,null);var cur = (all[file]);var vec__11368 = ((((result - 1) < 0))?((((file - 1) < 0))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(all.length - 1),((all[(all.length - 1)]).results.length - 1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(file - 1),((all[(file - 1)]).results.length - 1)], null)):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file,(result - 1)], null));var file__$1 = cljs.core.nth.call(null,vec__11368,0,null);var result__$1 = cljs.core.nth.call(null,vec__11368,1,null);var neue = (new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))[file__$1]);lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file__$1,result__$1], null)], null));
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),neue.file);
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"goto-line","goto-line",2802035088),(neue.results[result__$1]).line);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","prev!","lt.objs.search/prev!",611383121),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__prev_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"prev!","prev!",1120835520),null], null), null));
lt.objs.search.__BEH__on_result = (function __BEH__on_result(this$,result){var total = cljs.core.count.call(null,result.results);var result__$1 = ((true)?(function (){var obj11372 = {"file":result.file,"results":result.results.slice(0,(lt.objs.search.result_threshold - new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))};return obj11372;
})():result);if((new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)) < lt.objs.search.result_threshold))
{lt.util.dom.append.call(null,lt.objs.search.__GT_res.call(null,this$),lt.objs.search.__GT_result_item.call(null,result__$1));
} else
{}
new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).push(result__$1);
return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"result-count","result-count",4392277713)], null),cljs.core._PLUS_,total);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","on-result","lt.objs.search/on-result",564457174),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__on_result,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"result","result",4374444943),null], null), null));
lt.objs.search.__BEH__focus = (function __BEH__focus(this$){return lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",2278031048),lt.object.__GT_content.call(null,this$)).focus();
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","focus","lt.objs.search/focus",620932027),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__focus,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"focus!","focus!",4039653819),null,new cljs.core.Keyword(null,"show","show",1017433711),null], null), null));
lt.objs.search.result_count = (function result_count(this$){return cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,(cljs.core.truth_(new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424).cljs$core$IFn$_invoke$arity$1(this$))?cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,"s"),new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424).cljs$core$IFn$_invoke$arity$1(this$))," in "):null)),(((new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(this$) > lt.objs.search.result_threshold))?cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,")"),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),lt.objs.search.result_threshold], null))," (showing "):null)),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(this$)," results"], null)),"Found  ");
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","workspace-search","lt.objs.search/workspace-search",4343830723),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"searcher","searcher",1902549959),null], null), null),new cljs.core.Keyword(null,"results","results",2111450984),[],new cljs.core.Keyword(null,"name","name",1017277949),"Search results",new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){lt.object.add_tags.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((lt.objs.platform.win_QMARK_.call(null))?new cljs.core.Keyword(null,"searcher.win","searcher.win",1645682229):new cljs.core.Keyword(null,"searcher.unix","searcher.unix",3419097843))], null));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.search-results","div.search-results",980356928),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.res","ul.res",4464738363)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.searcher","div.searcher",3267271812),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),crate.binding.bound.call(null,this$,lt.objs.search.result_count)], null),lt.objs.search.search_box.call(null,this$),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),lt.objs.search.replace_box.call(null,this$),lt.objs.search.replace_all_button.call(null,this$)], null),lt.objs.search.location_box.call(null,this$)], null)], null);
}));
lt.objs.search.searcher = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.search","workspace-search","lt.objs.search/workspace-search",4343830723));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.search","searcher.search",1646738643),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Execute search",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (info){var info__$1 = (function (){var or__3408__auto__ = info;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.search.__GT_search_info.call(null,lt.objs.search.searcher);
}
})();return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"search!","search!",2982232811),info__$1);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.show","searcher.show",3419032680),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Show",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto___11373 = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto___11373))
{var e_11374 = temp__4092__auto___11373;var temp__4092__auto___11375__$1 = lt.objs.editor.selection.call(null,e_11374);if(cljs.core.truth_(temp__4092__auto___11375__$1))
{var sel_11376 = temp__4092__auto___11375__$1;if(cljs.core.truth_(clojure.string.blank_QMARK_.call(null,sel_11376)))
{} else
{var search_11377 = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",2278031048),lt.object.__GT_content.call(null,lt.objs.search.searcher));lt.util.dom.val.call(null,search_11377,sel_11376);
}
} else
{}
} else
{}
return lt.objs.tabs.add_or_focus_BANG_.call(null,lt.objs.search.searcher);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.next","searcher.next",3418881118),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Next result",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"next!","next!",1118619392));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.prev","searcher.prev",3418952606),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Prev result",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"prev!","prev!",1120835520));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.replace-all","searcher.replace-all",1613341281),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Replace all",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"replace!","replace!",583571295));
})], null));
